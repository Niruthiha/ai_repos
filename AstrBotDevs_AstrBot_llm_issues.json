[
  {
    "issue_number": 1885,
    "title": "[Bug] wechatpadpro适配器在获取图片信息时仅获取部分base64字符",
    "author": "cloudcranesss",
    "state": "open",
    "created_at": "2025-06-21T22:51:46Z",
    "updated_at": "2025-06-21T22:51:46Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n比如一张图片字节大小为244290，在wechatpadpro_adapter.py中的_download_raw_image函数仅执行一次GetMsgBigImg请求（该请求最大仅获取65536字节大小的base64字符），实际返回的图片大小为65536字节\n\n![Image](https://github.com/user-attachments/assets/6676da5f-83bb-4465-ab5a-b637e8404657)\n\n### 如何复现？\n\n发送图片给机器人，后台获取base64字符再通过机器人发送图片\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\nv3.5.15 Docker\n\n### 操作系统\n\nLinux\n\n### 报错日志\n\n![Image](https://github.com/user-attachments/assets/0fb17928-c526-45b1-ba14-0117b0925ee6)\n\n![Image](https://github.com/user-attachments/assets/5daa7ca2-187d-4a7b-8384-e4db117c066a)\n\n### 你愿意提交 PR 吗？\n\n- [x] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1884,
    "title": "[Bug] openai回调地址请求不通过 bug Something isn't working",
    "author": "Xpercent",
    "state": "open",
    "created_at": "2025-06-21T19:29:01Z",
    "updated_at": "2025-06-21T19:29:37Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n按照教程来了，适配器也启动了，还是出现openapi回调地址请求不通过，\n![Image](https://github.com/user-attachments/assets/d722d97b-558d-49c1-9ebf-42c01b54a257)\n![Image](https://github.com/user-attachments/assets/f2c828ab-04fc-45c6-88b2-872ce22954ba)\n\n\n### 如何复现？\n\n我查看了\nhttp://你的带公网地址的服务器ip:6195/callback/command和http://你的带公网地址的服务器ip:6195\n这是浏览器显示的，但是我不确定这是否是正常的\n![Image](https://github.com/user-attachments/assets/da33ff1e-19e8-4fc4-b93c-43de64fae53f)\n![Image](https://github.com/user-attachments/assets/1bae0911-57bf-4d92-995a-2655b47cfaf8)\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\nDocker version 26.0.0，AstrBot最新版，\n按照sudo docker run -itd -p 6180-6200:6180-6200 -p 11451:11451 -v $PWD/data:/AstrBot/data -v /etc/localtime:/etc/localtime:ro -v /etc/timezone:/etc/timezone:ro --name astrbot m.daocloud.io/docker.io/soulter/astrbot:latest 部署的。\n\n\n### 操作系统\n\nLinux\n\n### 报错日志\n\n![Image](https://github.com/user-attachments/assets/136addd7-f6b4-4dba-9830-3731300a7825)\n\n![Image](https://github.com/user-attachments/assets/e42fc62f-6346-488e-9de7-61ad79e03532)\n\n### 你愿意提交 PR 吗？\n\n- [x] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1859,
    "title": "[Feature] 接入Discord",
    "author": "SXP-Simon",
    "state": "closed",
    "created_at": "2025-06-19T15:01:28Z",
    "updated_at": "2025-06-21T15:52:55Z",
    "labels": [
      "enhancement"
    ],
    "body": "### 描述\n\n让Astrbot接入Discord\n\n### 使用场景\n\n让Astrbot接入Discord\n\n### 你愿意提交PR吗?\n\n- [x] 是的, 我愿意提交PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1883,
    "title": "astrbot_plugin_Astrsupermarket",
    "author": "0d00-Ciallo-0721",
    "state": "open",
    "created_at": "2025-06-21T15:41:41Z",
    "updated_at": "2025-06-21T15:41:41Z",
    "labels": [
      "plugin-publish"
    ],
    "body": "### 插件仓库\n\nhttps://github.com/0d00-Ciallo-0721/astrbot_plugin_Astrsupermarket\n\n### 描述\n\n插件名: astrbot_plugin_Astrsupermarket\n插件作者: 和泉智宏本人\n插件简介: 一款专为 AstrBot 打造的高互动性 QQ 群聊插件，融合经济、社交、冒险等玩法\n支持的消息平台:QQ\n社交链接:[(可选, 将会在插件市场作者名称上作为可点击的链接)](https://github.com/0d00-Ciallo-0721/astrbot_plugin_Astrsupermarket)\n\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1882,
    "title": "Feature: Slack 文件 URL 身份验证问题",
    "author": "Soulter",
    "state": "open",
    "created_at": "2025-06-21T15:16:18Z",
    "updated_at": "2025-06-21T15:16:18Z",
    "labels": [],
    "body": "文件下载对于非图像文件未进行身份验证。\r\n\r\n由于 Slack 文件 URL 需要身份验证，用户可能无法直接访问非图像文件。 考虑通过您的服务器代理下载或为这些链接实施身份验证。\r\n\r\n建议的实施方式：\r\n\r\n```python\r\n                else:\r\n                    # 通过服务器代理下载文件，避免Slack鉴权问题\r\n                    proxied_url = f\"/slack/file-proxy?url={file_url}\"\r\n                    abm.message.append(\r\n                        File(name=file_name, file=proxied_url, url=proxied_url)\r\n                    )\r\n\r\n```\r\n\r\n您必须在服务器后端实施 `/slack/file-proxy` 端点。 此端点应：\r\n- 接受文件 URL 作为查询参数。\r\n- 使用 bot 的 Slack 令牌从 Slack 的 API (`url_private`) 获取文件。\r\n- 使用适当的标头将文件流式传输到请求用户。\r\n\r\n如果您的后端在 FastAPI、Flask 或类似框架中，您可以将其实现为新路由。 确保验证 URL 并安全地处理错误。\r\n\r\n<details>\r\n<summary>Original comment in English</summary>\r\n\r\n**🚨 suggestion (security):** File download for non-image files is not authenticated.\r\n\r\nSince Slack file URLs require authentication, users may not be able to access non-image files directly. Consider proxying downloads through your server or implementing authentication for these links.\r\n\r\nSuggested implementation:\r\n\r\n```python\r\n                else:\r\n                    # 通过服务器代理下载文件，避免Slack鉴权问题\r\n                    proxied_url = f\"/slack/file-proxy?url={file_url}\"\r\n                    abm.message.append(\r\n                        File(name=file_name, file=proxied_url, url=proxied_url)\r\n                    )\r\n\r\n```\r\n\r\nYou must implement the `/slack/file-proxy` endpoint in your server backend. This endpoint should:\r\n- Accept a file URL as a query parameter.\r\n- Use the bot's Slack token to fetch the file from Slack's API (`url_private`).\r\n- Stream the file to the requesting user with appropriate headers.\r\n\r\nIf your backend is in FastAPI, Flask, or similar, you can implement this as a new route. Make sure to validate the URL and handle errors securely.\r\n\r\n</details>\r\n\r\n_Originally posted by @sourcery-ai[bot] in https://github.com/AstrBotDevs/AstrBot/pull/1877#discussion_r2160001770_\r\n            ",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1878,
    "title": "宝塔部署无法安装astrbot",
    "author": "Chbaoo",
    "state": "closed",
    "created_at": "2025-06-21T11:24:28Z",
    "updated_at": "2025-06-21T14:51:04Z",
    "labels": [],
    "body": "宝塔部署时docker中找不到astrbot\n\n![Image](https://github.com/user-attachments/assets/8ad7d091-f6f9-457a-8c53-5226aa7e16ce)\n\n除此之外 镜像无法拉取\n\n![Image](https://github.com/user-attachments/assets/edc5dda8-abd7-4a54-8a0a-ac14819ef133)",
    "comments": [
      {
        "user": "Soulter",
        "body": "可以试试“更新应用列表”。此外，docker镜像源国内无法正常使用。请使用 m.daocloud.io/docker.io/soulter/astrbot:latest 这个镜像"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1881,
    "title": "[Plugin] astrbot_plugin_gameinfo",
    "author": "zhewang448",
    "state": "open",
    "created_at": "2025-06-21T14:36:12Z",
    "updated_at": "2025-06-21T14:36:12Z",
    "labels": [
      "plugin-publish"
    ],
    "body": "### 插件仓库\n\nhttps://github.com/zhewang448/astrbot_plugin_gameinfo\n\n### 描述\n\n插件名: astrbot_plugin_gameinfo\n插件作者: bushikq\n插件简介: 一个获取部分二游角色wiki信息的插件。\n支持的消息平台:仅测试过qq\n标签:游戏，明日方舟，wiki\n社交链接:https://github.com/zhewang448\n\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1880,
    "title": "[Plugin] astrbot_plugin_shutup",
    "author": "railgun19457",
    "state": "open",
    "created_at": "2025-06-21T13:34:16Z",
    "updated_at": "2025-06-21T13:34:16Z",
    "labels": [
      "plugin-publish"
    ],
    "body": "### 插件仓库\n\nhttps://github.com/railgun19457/astrbot_plugin_shutup\n\n### 描述\n\n插件名: astrbot_plugin_shutup\n插件作者: Railgun19457\n插件简介: 一个简单的插件，让bot闭嘴\n支持的消息平台:仅在[aiocqhttp]、[wechatpadpro]平台进行了测试\n标签:闭嘴\n社交链接:https://github.com/railgun19457\n\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1879,
    "title": "[Plugin] astrbot_plugin_check-dst-room",
    "author": "EncodedWitcher",
    "state": "open",
    "created_at": "2025-06-21T11:34:38Z",
    "updated_at": "2025-06-21T11:34:38Z",
    "labels": [
      "plugin-publish"
    ],
    "body": "### 插件仓库\n\nhttps://github.com/EncodedWitcher/astrbot_plugin_check-dst-room\n\n### 描述\n\n插件名: astrbot_plugin_check-dst-room\n插件作者: EncodedWitcher\n插件简介: 饥荒查房\n支持的消息平台: QQ\n标签:(可选)\n社交链接:(可选, 将会在插件市场作者名称上作为可点击的链接)\n\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1876,
    "title": "[Plugin] solve_longmsg",
    "author": "HakimYu",
    "state": "open",
    "created_at": "2025-06-21T10:23:08Z",
    "updated_at": "2025-06-21T10:28:04Z",
    "labels": [
      "plugin-publish"
    ],
    "body": "### 插件仓库\n\nhttps://github.com/HakimYu/astrbot_plugin_solve_longmsg\n\n### 描述\n\n插件名: solve_longmsg\n插件作者: HakimYu/SXP-Simon\n插件简介: 撤回并合并转发群员或者机器人的长消息\n支持的消息平台:QQ\n标签:\n社交链接:\n\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1875,
    "title": "[Bug]WeChatPadPro无法回复聊群内容",
    "author": "WZL0813",
    "state": "open",
    "created_at": "2025-06-21T07:41:50Z",
    "updated_at": "2025-06-21T07:41:50Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\nWeChatPadPro无法回复聊群内容（在控制台打印了文字，但聊群没输出），私聊内容可正常回复\n\n### 如何复现？\n\n1.打开AstrBot和WeChatPadPro\n2.在聊群中@机器人\n3.控制台输出文字，微信内没有\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\nAstrBot V3.5.15\nWindows一键部署\nsiliconflow—deepseek-v3\nWeChatPadPro\n\n### 操作系统\n\nWindows\n\n### 报错日志\n\n![Image](https://github.com/user-attachments/assets/af9b7591-8446-49ac-bcfe-dfcae2452f68)\n\n![Image](https://github.com/user-attachments/assets/16802833-149e-4644-829f-1be7f2ec696b)\n![Image](https://github.com/user-attachments/assets/d738e0a9-02ec-43b4-86c7-d5fe215d46bc)\n\n\n[日志.txt](https://github.com/user-attachments/files/20845570/default.txt)\n\n因为超过字数显示，所以我分别上传了 日志.txt 与各个日志长图\n![Image](https://github.com/user-attachments/assets/d8683a3e-596d-4a37-aa83-4bd229e465a0)\n\n### 你愿意提交 PR 吗？\n\n- [x] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1861,
    "title": "astrbot_plugin_promise_keeper",
    "author": "xunxiing",
    "state": "open",
    "created_at": "2025-06-19T15:49:33Z",
    "updated_at": "2025-06-21T07:23:38Z",
    "labels": [
      "plugin-publish"
    ],
    "body": "### 插件仓库\n\nhttps://github.com/xunxiing/astrbot_plugin_promise_keeper.git\n\n### 描述\n\n插件名:\n言而有信\n插件作者:\nxunxi\n插件简介:\n一个能自动识别聊天中的承诺（如“我马上就做”）并进行记录的智能插件。它不仅能解析模糊时间，还提供中点和到期两种@提醒，确保承诺不会被遗忘。更有趣的是，它能通过图片生成承诺排行榜和个人承诺列表，让守信看得见。所有识别规则均可通过JSON文件自定义，灵活又强大。\n支持的消息平台:\nQQ (个人号), Telegram, 微信 (个人号), AstrBot Web UI\n(备注: 理论上支持所有能发送图片和@消息的平台，但以上平台经过了逻辑验证)\n标签:\n工具, 提醒, 自动化, 聊天管理, 图片生成, 排行榜\n\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Soulter",
        "body": "请将 astrabot 改成 astrbot"
      },
      {
        "user": "xunxiing",
        "body": "已经修改好仓库名并修复其他类似的命名问题"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1870,
    "title": "[Feature] 本项目如何接收安全漏洞",
    "author": "Marven11",
    "state": "closed",
    "created_at": "2025-06-21T01:04:42Z",
    "updated_at": "2025-06-21T07:01:53Z",
    "labels": [
      "enhancement"
    ],
    "body": "### 描述\n\n我找到一个RCE漏洞，但是在[Security](https://github.com/AstrBotDevs/AstrBot/security)界面没有找到对应的政策，请问一下你们是如何接收安全漏洞的呢\n\n### 使用场景\n\n给个提交按钮（\n\n### 你愿意提交PR吗?\n\n- [x] 是的, 我愿意提交PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Raven95676",
        "body": "你好，现在可以通过`https://github.com/AstrBotDevs/AstrBot/security/policy`报告安全漏洞了\n\n![Image](https://github.com/user-attachments/assets/a400f4f3-bdc1-4770-a75e-6193c0860759)"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1868,
    "title": "astrbot_plugin_kook_adapter",
    "author": "wuyan1003",
    "state": "closed",
    "created_at": "2025-06-20T15:01:05Z",
    "updated_at": "2025-06-21T05:55:00Z",
    "labels": [
      "plugin-publish"
    ],
    "body": "### 插件仓库\n\nhttps://github.com/wuyan1003/astrbot_plugin_kook_adapter\n\n### 描述\n\n插件名: astrbot_plugin_kook_adapter\n插件作者: wuyan1003\n插件简介: 为 AstrBot 量身打造的 Kook 平台连接器，支持机器人在 Kook 服务器中实现消息接收、指令响应等功能，轻松拓展多平台运营能力。\n支持的消息平台:kook\n\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Soulter",
        "body": "非常好插件！"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1865,
    "title": "[Plugin] astrbot_plugin_textadventure",
    "author": "oyxning",
    "state": "closed",
    "created_at": "2025-06-20T07:24:13Z",
    "updated_at": "2025-06-21T05:50:25Z",
    "labels": [
      "plugin-publish"
    ],
    "body": "### 插件仓库\n\nhttps://github.com/oyxning/astrbot_plugin_textadventure\n\n### 描述\n\n插件名: astrbot_plugin_textadventure\n插件作者: LumineStory\n插件简介: 一个由 LLM（大语言模型）驱动的动态文字冒险小游戏插件，支持自定义冒险主题\n支持的消息平台:QQ\n标签:小游戏，文字游戏\n社交链接:https://github.com/oyxning\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Soulter",
        "body": "已经上架"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1874,
    "title": "[Plugin] astrbot_plugin_daliy_60s_news",
    "author": "CJSen",
    "state": "closed",
    "created_at": "2025-06-21T04:13:12Z",
    "updated_at": "2025-06-21T05:48:49Z",
    "labels": [
      "plugin-publish"
    ],
    "body": "### 插件仓库\n\nhttps://github.com/CJSen/astrbot_plugin_daliy_60s_news\n\n### 描述\n\n插件名: astrbot_plugin_daliy_60s_news\n插件作者: CJSen\n插件简介: 一个为AstrBot)设计的每日 60 秒新闻插件。该插件可自动或手动推送每日新闻（文本或图片）到指定群组，帮助群成员快速获取当天要闻。\n支持的消息平台:理论上全平台\n标签：news，daily，60s\n社交链接:https://github.com/CJSen/astrbot_plugin_daliy_60s_news\n![命令](https://github.com/CJSen/astrbot_plugin_daliy_60s_news/raw/master/static/image.png)\n\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Soulter",
        "body": "已经上架"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1869,
    "title": "[Plugin] astrbot_plugin_llmAtTool",
    "author": "oyxning",
    "state": "closed",
    "created_at": "2025-06-20T22:06:28Z",
    "updated_at": "2025-06-21T05:46:49Z",
    "labels": [
      "plugin-publish"
    ],
    "body": "### 插件仓库\n\nhttps://github.com/oyxning/astrbot_plugin_llmAtTool\n\n### 描述\n\n插件名: astrbot_plugin_llmAtTool\n插件作者: LumineStory\n插件简介: 提供一个可供LLM调用的@用户工具(Tool)\n支持的消息平台:QQ\n标签:工具，tool\n社交链接:https://github.com/oyxning\n\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1840,
    "title": "[Plugin] astrbot_plugin_deepresearch",
    "author": "lxfight",
    "state": "closed",
    "created_at": "2025-06-18T09:01:00Z",
    "updated_at": "2025-06-21T05:45:02Z",
    "labels": [
      "plugin-publish"
    ],
    "body": "### 插件仓库\n\nhttps://github.com/lxfight/astrbot_plugin_deepresearch\n\n### 描述\n\n插件名: astrbot_plugin_deepresearch\n插件作者: lxfight\n插件简介: 为 AstrBot 提供一种 Deepresearch 方案\n支持的消息平台: 所有平台\n标签: deep research,web search\n社交链接:https://github.com/lxfight\n\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Soulter",
        "body": "高技术力desuwa"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1839,
    "title": "[Plugin] astrbot_plugin_antipromptinjector",
    "author": "oyxning",
    "state": "closed",
    "created_at": "2025-06-18T07:41:42Z",
    "updated_at": "2025-06-21T05:43:22Z",
    "labels": [
      "plugin-publish"
    ],
    "body": "### 插件仓库\n\nhttps://github.com/oyxning/astrbot_plugin_antipromptinjector\n\n### 描述\n\n插件名: astrbot_plugin_antipromptinjector\n插件作者: LumineStory\n插件简介: 防提示注入，保护AI不被恶意调教\n支持的消息平台:QQ\n标签:保护，调教\n社交链接:https://github.com/oyxning\n\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "lxfight",
        "body": "建议添加 _conf_schema.json 文件，添加'admin_id' 和'whitelist'的配置项"
      },
      {
        "user": "oyxning",
        "body": "> 建议添加 _conf_schema.json 文件，添加'admin_id' 和'whitelist'的配置项\n\n已修改，调用全局管理员，插件配置可以配置白名单ID。"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1857,
    "title": "[Plugin] astrbot_plugin_desuwa",
    "author": "GEMILUXVII",
    "state": "closed",
    "created_at": "2025-06-19T12:15:47Z",
    "updated_at": "2025-06-21T05:39:32Z",
    "labels": [
      "plugin-publish"
    ],
    "body": "### 插件仓库\n\nhttps://github.com/GEMILUXVII/astrbot_plugin_desuwa\n\n### 描述\n\n插件名: astrbot_plugin_desuwa\n插件作者: GEMILUXVII\n插件简介: 在机器人回复的每句话末尾加上 “desuwa” desuwa\n支持的消息平台:全平台\n标签:sakiko;丰川祥子\n社交链接:https://github.com/GEMILUXVII\n\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Soulter",
        "body": "已经上架 desuwa"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1842,
    "title": "[Plugin] 爱发电对接插件",
    "author": "Zhalslar",
    "state": "closed",
    "created_at": "2025-06-18T12:29:48Z",
    "updated_at": "2025-06-21T05:37:16Z",
    "labels": [
      "plugin-publish"
    ],
    "body": "### 插件仓库\n\nhttps://github.com/Zhalslar/astrbot_plugin_afdian\n\n### 描述\n\n插件名: astrbot_plugin_afdian\n插件作者: Zhalslar\n插件简介: 爱发电对接插件，接受用户打赏，实时推送订单情况\n支持的消息平台: 全平台\n标签:爱发电\n社交链接: https://github.com/Zhalslar\n\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Soulter",
        "body": "已经上架！"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1841,
    "title": "[Plugin] astrbot_plugin_github_analyzer",
    "author": "lxfight",
    "state": "closed",
    "created_at": "2025-06-18T09:02:31Z",
    "updated_at": "2025-06-21T05:35:04Z",
    "labels": [
      "plugin-publish"
    ],
    "body": "### 插件仓库\n\nhttps://github.com/lxfight/astrbot_plugin_github_analyzer\n\n### 描述\n\n插件名: astrbot_plugin_github_analyzer\n插件作者: lxfight\n插件简介: AstrBot 插件，用于分析github用户的“内卷”情况。\n支持的消息平台: 所有平台\n标签:内卷,反内卷\n社交链接:https://github.com/lxfight\n\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1832,
    "title": "[Plugin] 插件名astrbot_plugin_runes",
    "author": "yuweitk",
    "state": "closed",
    "created_at": "2025-06-17T06:26:12Z",
    "updated_at": "2025-06-21T05:34:48Z",
    "labels": [
      "plugin-publish"
    ],
    "body": "### 插件仓库\n\nhttps://github.com/yuweitk/astrbot_plugin_runes\n\n### 描述\n\n插件名: astrbot_plugin_runes\n插件作者: 雨爲/yuweitk\n插件简介: 基于LLM的卢恩符文占卜插件\n支持的消息平台:QQ_official\n标签:占卜\n\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1873,
    "title": "[Bug]WechatPadPro掉线后，无限重连异常",
    "author": "Cities2000",
    "state": "open",
    "created_at": "2025-06-21T02:56:45Z",
    "updated_at": "2025-06-21T02:56:45Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n当一个wecharpadpro的账号掉线以后，wecharpadpro的控制台会一直显示这样的log：\n1111GET Connection locfree Failed by 335e2c7a-24b5-47ed-bd9e-e3d3b1ff18f3  abandon the conntection get  !\n重启，也是这个。\n进入AstrBot的控制台，显示：\n[10:29:33] [Core] [ERRO] [wechatpadpro.wechatpadpro_adapter:381]: WebSocket 连接失败: server rejected WebSocket connection: HTTP 200, 请检查WeChatPadPro服务状态，或尝试重启WeChatPadPro适配器。 \n必须手动重启适配器才行\n\n### 如何复现？\n\nWechatpadPro账号掉线即可复现\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\nv3.5.15，Linux 7.9 部署\n\n### 操作系统\n\nLinux\n\n### 报错日志\n\n [10:29:33] [Core] [ERRO] [wechatpadpro.wechatpadpro_adapter:381]: WebSocket 连接失败: server rejected WebSocket connection: HTTP 200, 请检查WeChatPadPro服务状态，或尝试重启WeChatPadPro适配器。 \n1111GET Connection locfree Failed by 335e2c7a-24b5-47ed-bd9e-e3d3b1ff18f3  abandon the conntection get  !\n\n![Image](https://github.com/user-attachments/assets/58d398fa-5c65-4875-8e7a-74920a5086e3)\n\n![Image](https://github.com/user-attachments/assets/318ec0f2-cba0-4d06-b0fd-690a51cd63e7)\n\n### 你愿意提交 PR 吗？\n\n- [ ] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1872,
    "title": "关于可否设置一个开关ssl验证",
    "author": "xiaohetongxuea",
    "state": "open",
    "created_at": "2025-06-21T02:55:44Z",
    "updated_at": "2025-06-21T02:55:44Z",
    "labels": [
      "enhancement"
    ],
    "body": "### 描述\n\n再一些Gemini中转里面，ssl过期，可否直接关掉ssl验证呢\n\n![Image](https://github.com/user-attachments/assets/78d7b092-dd8e-42f2-9b1f-15bbee5be7f9)\n\n### 使用场景\n\n_No response_\n\n### 你愿意提交PR吗?\n\n- [ ] 是的, 我愿意提交PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1871,
    "title": "[Feature]为每个会话单独设置各个 MCP 服务开关",
    "author": "xu-wish",
    "state": "open",
    "created_at": "2025-06-21T01:18:29Z",
    "updated_at": "2025-06-21T01:18:29Z",
    "labels": [
      "enhancement"
    ],
    "body": "### 描述\n\n目前在 AstrBot 中，函数工具 以及 MCP 服务（例如文件操作、命令执行等）通常是全局设置或统一开启的，缺乏粒度控制。这样的设置不够灵活，容易造成普通用户/会话拥有不必要甚至危险的能力（如文件操作、远程 SSH）。\n\n希望可以为每个会话单独设置MCP服务的开关。\n\n我注意到pr中有一个[为webui提供对所有会话的provider，persona，plugins，llm进行管理的功能](https://github.com/AstrBotDevs/AstrBot/pull/1803)，是否也能将MCP服务启用设置加入到WebUI中设置。\n\n### 使用场景\n\n希望能为每个会话单独设置是否启用某个MCP服务，防止某些敏感工具如文件操作和ssh命令执行等被使用。\n\n同时可以设置一个默认的配置，新会话默认使用该配置。\n\n### 你愿意提交PR吗?\n\n- [ ] 是的, 我愿意提交PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1860,
    "title": "[Feature]希望让AstrBot可以实现让bot主动艾特他人的功能",
    "author": "Huanghun542",
    "state": "open",
    "created_at": "2025-06-19T15:31:24Z",
    "updated_at": "2025-06-20T17:10:53Z",
    "labels": [
      "enhancement"
    ],
    "body": "### 描述\n\n现在的主框架里虽然有艾特用户的开关，但开启后每句话都会艾特。\n希望能够增加一个插件进行随机艾特，\n或者写一个tool，让bot在需要艾特的时候进行调用，\n再或者解析要发送的消息，检测到bot回复中出现[At：XXXXX]字样时加个艾特，再用正则进行过滤\n当然这只是一些想法，希望有大佬能够实现\n\n### 使用场景\n\n_No response_\n\n### 你愿意提交PR吗?\n\n- [x] 是的, 我愿意提交PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1866,
    "title": "无法接入大模型",
    "author": "Chbaoo",
    "state": "open",
    "created_at": "2025-06-20T09:10:01Z",
    "updated_at": "2025-06-20T13:19:37Z",
    "labels": [],
    "body": "个人号 napcat  在AstrBot仪表盘中无法接入大模型\n\n日志:\n[16:58:24] [Core] [ERRO] [provider.manager:356]: 实例化 openai_chat_completion(siliconflow) 提供商适配器失败：The api_key client option must be set either by passing api_key to the client or by setting the OPENAI_API_KEY environment variable \n [17:04:05] [Core] [INFO] [provider.manager:176]: 载入 openai_chat_completion(siliconflow) 服务提供商 ... \n [17:04:05] [Core] [ERRO] [provider.manager:355]: Traceback (most recent call last):\n  File \"C:\\Users\\chengbao\\Desktop\\AstrBotLauncher-0.1.5.6\\AstrBot\\astrbot\\core\\provider\\manager.py\", line 322, in load_provider\n    inst = provider_metadata.cls_type(\n  File \"C:\\Users\\chengbao\\Desktop\\AstrBotLauncher-0.1.5.6\\AstrBot\\astrbot\\core\\provider\\sources\\openai_source.py\", line 63, in __init__\n    self.client = AsyncOpenAI(\n  File \"C:\\Users\\chengbao\\Desktop\\AstrBotLauncher-0.1.5.6\\AstrBot\\venv\\lib\\site-packages\\openai\\_client.py\", line 427, in __init__\n    raise OpenAIError(\nopenai.OpenAIError: The api_key client option must be set either by passing api_key to the client or by setting the OPENAI_API_KEY environment variable\n\n [17:04:05] [Core] [ERRO] [provider.manager:356]: 实例化 openai_chat_completion(siliconflow) 提供商适配器失败：The api_key client option must be set either by passing api_key to the client or by setting the OPENAI_API_KEY environment variable ",
    "comments": [
      {
        "user": "Raven95676",
        "body": "请设置api key"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1843,
    "title": "[wechatpadpro.wechatpadpro_adapter:266]: 获取登录二维码失败: 200, {'Code': 300, 'Data': None, 'Text': 'xxxxxxx 该 key 已过期!'}",
    "author": "mikaizhu",
    "state": "open",
    "created_at": "2025-06-18T13:14:43Z",
    "updated_at": "2025-06-20T06:43:21Z",
    "labels": [],
    "body": "问题描述：\n\n6月16号的时候，突然掉线，然后重启wechatpadpro.wechatpadpro_adapter\n显示获取登录二维码失败: 200, {'Code': 300, 'Data': None, 'Text': 'xxxxxxx 该 key 已过期!'} \n\n\n请问有人遇到这样的问题吗，有没有解决办法？",
    "comments": [
      {
        "user": "smartnikocj",
        "body": "重启docker试试。"
      },
      {
        "user": "ChaosNino",
        "body": "在wechatpadpro重新获取一个token key，替换到这个位置\n![Image](https://github.com/user-attachments/assets/fcdf2e9b-dfba-45fd-8729-235e743aee84)"
      },
      {
        "user": "yan-2-6",
        "body": "> 在wechatpadpro重新获取一个token key，替换到这个位置 ![Image](https://github.com/user-attachments/assets/fcdf2e9b-dfba-45fd-8729-235e743aee84)\n\n请问如何获取新的token key呢？我在这里申请的授权码，替换到wechatpadpro_credentials.json文件里后，仍然提示key无效\n\n![Image](https://github.com/user-attachments/assets/00962936-2c50-4133-a17f-1eda20b9bf93)\n\n![Image](https://github.com/user-attachments/assets/0dfd9348-794f-446a-80e6-67d164547799)\n\n![Image](https://github.com/user-attachments/assets/4a44f6ae-8c27-4c27-82cd-77a360e8f3f8)"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1862,
    "title": "在网络配置时  配置http客户端后  无法访问配置的url  显示localhost拒绝连接 所用端口号为8080",
    "author": "Chbaoo",
    "state": "open",
    "created_at": "2025-06-19T16:40:23Z",
    "updated_at": "2025-06-20T05:49:44Z",
    "labels": [],
    "body": null,
    "comments": [
      {
        "user": "RC-CHN",
        "body": "请提供更详细的信息以帮助解决问题，包括且不限于部署平台，方式及所用配置文件等。"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1864,
    "title": "[Feature]新增平台异常通知",
    "author": "skyjt",
    "state": "open",
    "created_at": "2025-06-20T05:16:41Z",
    "updated_at": "2025-06-20T05:16:41Z",
    "labels": [
      "enhancement"
    ],
    "body": "### 描述\n\n希望能够在平台掉线或者连接出问题时，能够系统自动发送通知。\n\n\n### 使用场景\n\n当 wechatpadpro 连接报错，出现各种问题导致无法正常接受消息。\n通过 webhook 发送相关通知，以便及时进行处理\n\n### 你愿意提交PR吗?\n\n- [ ] 是的, 我愿意提交PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1863,
    "title": "[Bug]断开ssh登录时 astrbot仪表盘就断开",
    "author": "Damien629",
    "state": "closed",
    "created_at": "2025-06-19T20:32:11Z",
    "updated_at": "2025-06-20T02:21:14Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n断开ssh登录时 astrbot仪表盘就断开\n\n### 如何复现？\n\n1Ubuntu手动部署后\n2断开ssh登录\n3astrbot web ui 拒绝请求\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\nlatest\n\n### 操作系统\n\nWindows\n\n### 报错日志\n\nno\n\n### 你愿意提交 PR 吗？\n\n- [ ] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "RC-CHN",
        "body": "这个不是bug，ssh会话断开时就是会停止当前前台任务。请使用nohup命令或者screen等工具将astrbot挂在后台运行。"
      },
      {
        "user": "Damien629",
        "body": "> 这个不是bug，ssh会话断开时就是会停止当前前台任务。请使用nohup命令或者screen等工具将astrbot挂在后台运行。\n\n谢谢"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1853,
    "title": "[Feature]所有检索到的知识库内容相关度均低于阈值 0.5，不进行增强。如何能大于0.5",
    "author": "baiyajin",
    "state": "open",
    "created_at": "2025-06-19T07:37:35Z",
    "updated_at": "2025-06-20T01:19:59Z",
    "labels": [
      "enhancement"
    ],
    "body": "### 描述\n\n [15:34:39] [Core] [INFO] [vector_store.astrbot_faiss_store:535]: Faiss 集合 't4' 搜索完成。查询文本: '你们的价格是多少...'，返回 3 个结果。\n [15:34:39] [Core] [INFO] [core.llm_enhancer:142]: 所有检索到的知识库内容相关度均低于阈值 0.5，不进行增强。\n\n### 使用场景\n\n_No response_\n\n### 你愿意提交PR吗?\n\n- [ ] 是的, 我愿意提交PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "RC-CHN",
        "body": "使用更相关的数据库，rag检索原理就是计算相似度超过阈值的记录条目插入到prompt。如果认为知识库中存在的条目已经足够相关，请尝试更换使用更适合的嵌入模型。"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1854,
    "title": "[Bug]  key 无效 无法获得登录二维码",
    "author": "BND-1",
    "state": "open",
    "created_at": "2025-06-19T07:59:22Z",
    "updated_at": "2025-06-20T00:33:17Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n无法正常扫码登录，不会有二维码链接\n\n### 如何复现？\n\n服务器重启时出现\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\nwechatpadpro通信 astrbot v3.5.14 版本 Linux docker部署\n\n### 操作系统\n\nLinux\n\n### 报错日志\n\n \n [10:59:11] [Core] [INFO] [wechatpadpro.wechatpadpro_adapter:86]: WeChatPadPro 适配器正在启动... \n [10:59:11] [Core] [INFO] [wechatpadpro.wechatpadpro_adapter:141]: 成功加载 WeChatPadPro 凭据。 \n [10:59:11] [Core] [INFO] [core.core_lifecycle:163]: AstrBot 启动完成。 \n [10:59:11] [Core] [ERRO] [wechatpadpro.wechatpadpro_adapter:194]: 检查在线状态失败: 200, {'Code': -2, 'Data': None, 'Text': 'b438ab90-1073-4a8b-98c1-68775d0cbb44 该链接不存在！'} \n [10:59:11] [Core] [INFO] [wechatpadpro.wechatpadpro_adapter:107]: WeChatPadPro 设备已离线，开始扫码登录。 \n [10:59:11] [Core] [ERRO] [wechatpadpro.wechatpadpro_adapter:266]: 获取登录二维码失败: 200, {'Code': 300, 'Data': None, 'Text': 'b438ab90-1073-4a8b-98c1-68775d0cbb44 该 key 无效! 请 检查正确性 或 联系管理员生成'} \n [10:59:11] [Core] [ERRO] [wechatpadpro.wechatpadpro_adapter:113]: 无法获取登录二维码。 \n\n### 你愿意提交 PR 吗？\n\n- [ ] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "BND-1",
        "body": "已解决"
      },
      {
        "user": "yan-2-6",
        "body": "> 已解决\n\n请问该如何解决呢，我也遇到了这个问题"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1623,
    "title": "[Bug]WechatPadPro平台发送图片给dify不完整",
    "author": "sofs2005",
    "state": "open",
    "created_at": "2025-05-22T02:58:49Z",
    "updated_at": "2025-06-19T15:11:27Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n![Image](https://github.com/user-attachments/assets/b7c0ba37-c6c5-40b9-a6ce-3b7806acb513)\n\n![Image](https://github.com/user-attachments/assets/0b439a41-80b0-4d75-965e-6f2b49e7f2d1)\n\n我已经试过好多次了dify收到的图片只能显示一部分，像是没有下载完，不知道其他人有没有这个问题\n\n### 如何复现？\n\n发送图片给机器人，然后去dify后台查看，会看到图片不完整\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\nv3.5.11 Docker\n\n### 操作系统\n\nLinux\n\n### 报错日志\n\n![Image](https://github.com/user-attachments/assets/bb605446-05c2-4ebd-82c0-21a70e23a4bb)\n\n### 你愿意提交 PR 吗？\n\n- [ ] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "viereck-lan",
        "body": "+1"
      },
      {
        "user": "cloudcranes",
        "body": " 使用get_messages()接口获取wechatpadpro返回的base64信息生成的图片不完整，应该也是一样的情况"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1858,
    "title": "[Bug]dify回复定位不到群聊id导致无法回复群聊中的内容",
    "author": "BND-1",
    "state": "open",
    "created_at": "2025-06-19T13:22:27Z",
    "updated_at": "2025-06-19T13:25:12Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n当我在微信群聊中发送消息，并且@机器人时会出现群聊id错误，以及llm回复是通过个人id而不是群聊id的情况，导致无法在群聊中进行回复\n\n### 如何复现？\n\n目前有点问题是在群聊中与llm进行交互时，llm的回答只会被打印在日志中，但是并不会被发送到微信中（私聊的情况下是正常的）\n例如以下日志与截图：\n[20:32:46] [Core] [INFO] [wechatpadpro.wechatpadpro_adapter:445]: 忽略来自自己的消息。 \n [20:34:24] [Core] [INFO] [core.event_bus:50]: [wechatpadpro] 太阳照常升起/wxid_34zwsleyo8u322: [At:wxid_wxkosrt5pg6g19] [At:wxid_wxkosrt5pg6g19] 在干嘛  @所有人  \n [20:34:24] [Core] [INFO] [utils.dify_api_client:30]: chat_messages payload: {'inputs': {}, 'query': '在干嘛 \\u2005@所有人', 'user': 'wechatpadpro:GroupMessage:52111129229@chatroom_wxid_wxkosrt5pg6g19', 'response_mode': 'streaming', 'conversation_id': '', 'files': [], 'url': 'https://b.netonline.work/v1/chat-messages'} \n [20:34:34] [Plug] [INFO] [llm_prefix_filter.main:35]: DEBUG: filter_llm_prefix_messages executing on OnDecoratingResultEvent. \n [20:34:34] [Plug] [INFO] [llm_prefix_filter.main:67]: DEBUG: No prefix match found in '在忙，莫得空摆龙门阵。'. Passing through. \n [20:34:44] [Core] [INFO] [respond.stage:211]: AstrBot -> 太阳照常升起/wxid_34zwsleyo8u322: 在忙，莫得空摆龙门阵。\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\n3.5.14 Astrbot\n\n### 操作系统\n\nLinux\n\n### 报错日志\n\n帮我检查下这个项目有关群聊的部分，目前有点问题是在群聊中与llm进行交互时，llm的回答只会被打印在日志中，但是并不会被发送到微信中（私聊的情况下是正常的）\n例如以下日志与截图：\n[20:32:46] [Core] [INFO] [wechatpadpro.wechatpadpro_adapter:445]: 忽略来自自己的消息。 \n [20:34:24] [Core] [INFO] [core.event_bus:50]: [wechatpadpro] 太阳照常升起/wxid_34zwsleyo8u322: [At:wxid_wxkosrt5pg6g19] [At:wxid_wxkosrt5pg6g19] 在干嘛  @所有人  \n [20:34:24] [Core] [INFO] [utils.dify_api_client:30]: chat_messages payload: {'inputs': {}, 'query': '在干嘛 \\u2005@所有人', 'user': 'wechatpadpro:GroupMessage:52111129229@chatroom_wxid_wxkosrt5pg6g19', 'response_mode': 'streaming', 'conversation_id': '', 'files': [], 'url': 'https://b.netonline.work/v1/chat-messages'} \n [20:34:34] [Plug] [INFO] [llm_prefix_filter.main:35]: DEBUG: filter_llm_prefix_messages executing on OnDecoratingResultEvent. \n [20:34:34] [Plug] [INFO] [llm_prefix_filter.main:67]: DEBUG: No prefix match found in '在忙，莫得空摆龙门阵。'. Passing through. \n [20:34:44] [Core] [INFO] [respond.stage:211]: AstrBot -> 太阳照常升起/wxid_34zwsleyo8u322: 在忙，莫得空摆龙门阵。\n\n### 你愿意提交 PR 吗？\n\n- [x] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1856,
    "title": "[Bug]   openai回调地址请求不通过",
    "author": "sunnyboyi",
    "state": "open",
    "created_at": "2025-06-19T11:44:58Z",
    "updated_at": "2025-06-19T11:46:56Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n![Image](https://github.com/user-attachments/assets/8f9f315c-4de3-4691-96a2-2149fc19e259)\n\n![Image](https://github.com/user-attachments/assets/702028e8-dbd9-4c09-bde7-d571753b2720)\n\n发现需要原封不动返回的字符串少了一位\n\n### 如何复现？\n\n配置企业微信应用  报错openai回调地址请求不通过\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\nv3.5.15\n\n### 操作系统\n\nLinux\n\n### 报错日志\n\n日志显示校验通过\n\n![Image](https://github.com/user-attachments/assets/255068d2-377e-486e-9b8d-6fff9ed1fadc)\n\n### 你愿意提交 PR 吗？\n\n- [ ] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1855,
    "title": "[Bug]添加mcp服务器时代码预览区load failed",
    "author": "HEHONGYI11",
    "state": "open",
    "created_at": "2025-06-19T10:24:23Z",
    "updated_at": "2025-06-19T10:24:23Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n在添加mcp服务器时，点击添加服务器后代码区无法加载\n\n### 如何复现？\n\nmcp页面点击添加服务器\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\n3.5.15 linux docker\n\n### 操作系统\n\nLinux\n\n### 报错日志\n\n![Image](https://github.com/user-attachments/assets/7eccb997-6b4d-4fb3-80ca-50ed4db7712e)\n\n### 你愿意提交 PR 吗？\n\n- [x] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1798,
    "title": "飞书机器人上传的图片到dify上收不到",
    "author": "mtwist966",
    "state": "open",
    "created_at": "2025-06-12T09:41:16Z",
    "updated_at": "2025-06-19T06:51:45Z",
    "labels": [
      "enhancement"
    ],
    "body": "### 描述\n\n选用其他模型是可以的，比如直接用openai模型，但是用dify，到了dify那里自动变为空白\n\n![Image](https://github.com/user-attachments/assets/49646d79-a67d-4e75-9b6d-03660caa4d06)\n\n\n\n### 使用场景\n\n希望添加对于dify -飞书多模态的支持\n\n### 你愿意提交PR吗?\n\n- [x] 是的, 我愿意提交PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "w-xiaob",
        "body": "+1 且似乎Dify只能回复文本消息，图片或者语音文件都不支持，至于图片输入你可以看看是不是变量没有配置正确\n"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1766,
    "title": "[Bug]开启会话隔离后微信群无法收到bot消息",
    "author": "laopanmemz",
    "state": "closed",
    "created_at": "2025-06-09T00:33:57Z",
    "updated_at": "2025-06-19T06:41:59Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n当启用 会话隔离 (unique_session) 时（已将群ID加入白名单放行整个群聊），在WechatPadPro 消息平台群聊内发送命令/消息，查看控制台能够正常收到推送消息和响应结果，没有任何报错，但是响应消息不会正常发送到群聊。关闭会话隔离后恢复正常，bot能够正常发送消息。\n\n### 如何复现？\n\n开启 会话隔离 (unique_session)\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\nv3.5.13，Windows一键部署，DeepSeek提供商，WechatPadPro消息平台适配器\n\n### 操作系统\n\nWindows\n\n### 报错日志\n\n![Image](https://github.com/user-attachments/assets/e40da07a-846b-4abc-b545-f977b2f67122)\n\n### 你愿意提交 PR 吗？\n\n- [ ] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "yixuexiaoao",
        "body": "看日志3.5.15解决了会话隔离的问题，但是我这边更新后还是一样，控制台有内容，群消息没有回复"
      },
      {
        "user": "w-xiaob",
        "body": "+1 会话隔离一开群聊就没法用了"
      },
      {
        "user": "laopanmemz",
        "body": "> 看日志3.5.15解决了会话隔离的问题，但是我这边更新后还是一样，控制台有内容，群消息没有回复\n\n并非解决，v3.5.15只是支持了模型提供商的会话隔离吧"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1849,
    "title": "[Bug]用WechatPadPro 消息平台群发消息无法发送",
    "author": "sunnyboyi",
    "state": "closed",
    "created_at": "2025-06-19T02:59:18Z",
    "updated_at": "2025-06-19T06:21:26Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n[Bug]用WechatPadPro 消息平台群发消息无法发送，通过加作者电报群发现 发送群消息和私聊消息共用如图：\n\n![Image](https://github.com/user-attachments/assets/057be191-53f3-44ee-a397-5fe90e2efd77)\n\n有测试通过这个方法可以发送群消息，希望能调整\n\n### 如何复现？\n\n再微信群中@机器人   机器人无回复  在控制台中可以看到回复内容\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\nAstrBot  v3.5.15   Docker version 28.0.1, build 068a01e  WechatPadPro \n\n### 操作系统\n\nLinux\n\n### 报错日志\n\n没有报错  无法发送群消息，测过WechatPadPro群发接口 也同样报错，通过私聊接口可行\n\n### 你愿意提交 PR 吗？\n\n- [ ] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "sunnyboyi",
        "body": "看到3天前 已修复了问题 关闭问题"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1852,
    "title": "[Bug] [Core] [ERRO] [vector_store.astrbot_faiss_store:392]: 向 Faiss 集合 't4' 添加文档时发生异常: Request timed out.",
    "author": "baiyajin",
    "state": "open",
    "created_at": "2025-06-19T05:23:19Z",
    "updated_at": "2025-06-19T05:23:19Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n向知识库上传文本时报错\n\n### 如何复现？\n\n文本有6行，一行时没问题，行数多了就报超时\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\n3.5.15\n\n### 操作系统\n\nWindows\n\n### 报错日志\n\n [13:16:14] [Core] [ERRO] [vector_store.astrbot_faiss_store:392]: 向 Faiss 集合 't4' 添加文档时发生异常: Request timed out.\nStack (most recent call last):\n  File \"D:\\a\\AstrBot\\main.py\", line 83, in <module>\n    asyncio.run(core_lifecycle.start())\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\runners.py\", line 44, in run\n    return loop.run_until_complete(main)\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\base_events.py\", line 636, in run_until_complete\n    self.run_forever()\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\windows_events.py\", line 321, in run_forever\n    super().run_forever()\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\base_events.py\", line 603, in run_forever\n    self._run_once()\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\base_events.py\", line 1909, in _run_once\n    handle._run()\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\events.py\", line 80, in _run\n    self._context.run(self._callback, *self._args)\n  File \"D:\\a\\AstrBot\\data\\plugins\\astrbot_plugin_knowledge_base\\vector_store\\astrbot_faiss_store.py\", line 392, in _batch_process_task\n    logger.error(\n--------------1--------------\nTraceback (most recent call last):\n  File \"D:\\a\\AstrBot\\.venv\\lib\\site-packages\\httpx\\_transports\\default.py\", line 101, in map_httpcore_exceptions\n    yield\n  File \"D:\\a\\AstrBot\\.venv\\lib\\site-packages\\httpx\\_transports\\default.py\", line 394, in handle_async_request\n    resp = await self._pool.handle_async_request(req)\n  File \"D:\\a\\AstrBot\\.venv\\lib\\site-packages\\httpcore\\_async\\connection_pool.py\", line 256, in handle_async_request\n    raise exc from None\n  File \"D:\\a\\AstrBot\\.venv\\lib\\site-packages\\httpcore\\_async\\connection_pool.py\", line 236, in handle_async_request\n    response = await connection.handle_async_request(\n  File \"D:\\a\\AstrBot\\.venv\\lib\\site-packages\\httpcore\\_async\\connection.py\", line 103, in handle_async_request\n    return await self._connection.handle_async_request(request)\n  File \"D:\\a\\AstrBot\\.venv\\lib\\site-packages\\httpcore\\_async\\http11.py\", line 136, in handle_async_request\n    raise exc\n  File \"D:\\a\\AstrBot\\.venv\\lib\\site-packages\\httpcore\\_async\\http11.py\", line 106, in handle_async_request\n    ) = await self._receive_response_headers(**kwargs)\n  File \"D:\\a\\AstrBot\\.venv\\lib\\site-packages\\httpcore\\_async\\http11.py\", line 177, in _receive_response_headers\n    event = await self._receive_event(timeout=timeout)\n  File \"D:\\a\\AstrBot\\.venv\\lib\\site-packages\\httpcore\\_async\\http11.py\", line 217, in _receive_event\n    data = await self._network_stream.read(\n  File \"D:\\a\\AstrBot\\.venv\\lib\\site-packages\\httpcore\\_backends\\anyio.py\", line 32, in read\n    with map_exceptions(exc_map):\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\contextlib.py\", line 153, in __exit__\n    self.gen.throw(typ, value, traceback)\n  File \"D:\\a\\AstrBot\\.venv\\lib\\site-packages\\httpcore\\_exceptions.py\", line 14, in map_exceptions\n    raise to_exc(exc) from exc\nhttpcore.ReadTimeout\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"D:\\a\\AstrBot\\.venv\\lib\\site-packages\\openai\\_base_client.py\", line 1497, in request\n    response = await self._client.send(\n  File \"D:\\a\\AstrBot\\.venv\\lib\\site-packages\\httpx\\_client.py\", line 1629, in send\n    response = await self._send_handling_auth(\n  File \"D:\\a\\AstrBot\\.venv\\lib\\site-packages\\httpx\\_client.py\", line 1657, in _send_handling_auth\n    response = await self._send_handling_redirects(\n  File \"D:\\a\\AstrBot\\.venv\\lib\\site-packages\\httpx\\_client.py\", line 1694, in _send_handling_redirects\n    response = await self._send_single_request(request)\n  File \"D:\\a\\AstrBot\\.venv\\lib\\site-packages\\httpx\\_client.py\", line 1730, in _send_single_request\n    response = await transport.handle_async_request(request)\n  File \"D:\\a\\AstrBot\\.venv\\lib\\site-packages\\httpx\\_transports\\default.py\", line 393, in handle_async_request\n    with map_httpcore_exceptions():\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\contextlib.py\", line 153, in __exit__\n    self.gen.throw(typ, value, traceback)\n  File \"D:\\a\\AstrBot\\.venv\\lib\\site-packages\\httpx\\_transports\\default.py\", line 118, in map_httpcore_exceptions\n    raise mapped_exc(message) from exc\nhttpx.ReadTimeout\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"D:\\a\\AstrBot\\data\\plugins\\astrbot_plugin_knowledge_base\\vector_store\\astrbot_faiss_store.py\", line 382, in _batch_process_task\n    doc_id = await vecdb.insert(\n  File \"D:\\a\\AstrBot\\astrbot\\core\\db\\vec_db\\faiss_impl\\vec_db.py\", line 40, in insert\n    vector = await self.embedding_provider.get_embedding(content)\n  File \"D:\\a\\AstrBot\\data\\plugins\\astrbot_plugin_knowledge_base\\vector_store\\astrbot_faiss_store.py\", line 53, in get_embedding\n    vec = await self.embedding_util.get_embedding_async(text, self.collection_name)\n  File \"D:\\a\\AstrBot\\data\\plugins\\astrbot_plugin_knowledge_base\\utils\\embedding.py\", line 254, in get_embedding_async\n    embedding = await self._get_embedding_via_astrbot_provider(\n  File \"D:\\a\\AstrBot\\data\\plugins\\astrbot_plugin_knowledge_base\\utils\\embedding.py\", line 207, in _get_embedding_via_astrbot_provider\n    return await provider.get_embedding(text)\n  File \"D:\\a\\AstrBot\\astrbot\\core\\provider\\sources\\openai_embedding_source.py\", line 33, in get_embedding\n    embedding = await self.client.embeddings.create(input=text, model=self.model)\n  File \"D:\\a\\AstrBot\\.venv\\lib\\site-packages\\openai\\resources\\embeddings.py\", line 245, in create\n    return await self._post(\n  File \"D:\\a\\AstrBot\\.venv\\lib\\site-packages\\openai\\_base_client.py\", line 1762, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n  File \"D:\\a\\AstrBot\\.venv\\lib\\site-packages\\openai\\_base_client.py\", line 1515, in request\n    raise APITimeoutError(request=request) from err\nopenai.APITimeoutError: Request timed out.\n [13:17:17] [Core] [ERRO] [vector_store.astrbot_faiss_store:392]: 向 Faiss 集合 't4' 添加文档时发生异常: Request timed out.\nStack (most recent call last):\n  File \"D:\\a\\AstrBot\\main.py\", line 83, in <module>\n    asyncio.run(core_lifecycle.start())\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\runners.py\", line 44, in run\n    return loop.run_until_complete(main)\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\base_events.py\", line 636, in run_until_complete\n    self.run_forever()\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\windows_events.py\", line 321, in run_forever\n    super().run_forever()\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\base_events.py\", line 603, in run_forever\n    self._run_once()\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\base_events.py\", line 1909, in _run_once\n    handle._run()\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\events.py\", line 80, in _run\n    self._context.run(self._callback, *self._args)\n  File \"D:\\a\\AstrBot\\data\\plugins\\astrbot_plugin_knowledge_base\\vector_store\\astrbot_faiss_store.py\", line 392, in _batch_process_task\n    logger.error(\n [13:17:17] [Core] [ERRO] [vector_store.astrbot_faiss_store:399]: 批次添加失败，文档 云南18怪文本内容鸡蛋用草串着卖为防山路颠簸碰碎鸡蛋，用草绳编织成串悬挂运输摘下草帽当锅盖竹编草帽形似锅盖，透气保温，煮饭清香三只蚊子一盘菜夸张形容湿热地区蚊虫体型硕大火筒能当水烟袋竹... 将被丢弃。\n [13:17:17] [Core] [INFO] [vector_store.astrbot_faiss_store:471]: 集合 't4' 索引已保存。\n [13:17:17] [Core] [INFO] [vector_store.astrbot_faiss_store:475]: 向 Faiss 集合 't4' 完成添加操作。总共处理了 1 个原始文档，成功添加 0 个文档。\n [13:17:17] [Core] [WARN] [vector_store.astrbot_faiss_store:479]: 其中 1 个批次处理异常或因重试失败被丢弃部分文档。\n [13:17:17] [Core] [ERRO] [astrbot_plugin_knowledge_base.web_api:210]: 添加文档失败: 添加文档失败: 添加文档失败，返回的文档 ID 为空。\n\n### 你愿意提交 PR 吗？\n\n- [ ] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1851,
    "title": "[Bug] 平台命令可用性配置不会保存",
    "author": "railgun19457",
    "state": "open",
    "created_at": "2025-06-19T04:19:50Z",
    "updated_at": "2025-06-19T04:31:49Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n平台命令可用性配置不会保存到配置文件，重启后就会恢复默认状态（全部启用）\n\n\n### 如何复现？\n\n1.配置\"平台命令可用性配置\"\n2.保存修改并重启Astrbot\n3.\"平台命令可用性配置\"回到初始状态\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\n3.5.15\nubuntu25 + docker\n\n\n### 操作系统\n\nLinux\n\n### 报错日志\n\n如图配置\n![Image](https://github.com/user-attachments/assets/9c07d0de-eb9d-456c-93ec-e13ea1c39fc6)\n\n可以看到配置文件中出现plugin_enable字段\n![Image](https://github.com/user-attachments/assets/25cb134c-6b9f-4382-b04a-3d4829957de3)\n\n保存并重启后该字段消失,\"平台命令可用性配置\"回到初始状态，即全部启用\n\n### 你愿意提交 PR 吗？\n\n- [ ] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "railgun19457",
        "body": "经过测试，在外部编辑cmd_config.json文件后再启动依然不行\n启动时提示[config.astrbot_config:126]: 检查到配置项 platform_settings.plugin_enable 不存在，将从当前配置中删除\n"
      },
      {
        "user": "railgun19457",
        "body": "附上修改文件后重启时的完整日志\n\n![Image](https://github.com/user-attachments/assets/9e0d61c1-7c29-4659-a769-b0715901f9ed)"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1850,
    "title": "[Bug]向 Faiss 集合 'test2' 添加文档时发生异常: 向量维度不匹配, 期望: 1536, 实际: 4096",
    "author": "baiyajin",
    "state": "open",
    "created_at": "2025-06-19T03:34:26Z",
    "updated_at": "2025-06-19T03:34:26Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n [11:29:01] [Core] [ERRO] [vector_store.astrbot_faiss_store:392]: 向 Faiss 集合 'test2' 添加文档时发生异常: 向量维度不匹配, 期望: 1536, 实际: 4096\n\n### 如何复现？\n\n往知识库上传文本\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\n3.5.15\n\n### 操作系统\n\nWindows\n\n### 报错日志\n\n`Traceback (most recent call last):\n  File \"D:\\a\\AstrBot\\data\\plugins\\astrbot_plugin_knowledge_base\\vector_store\\astrbot_faiss_store.py\", line 382, in _batch_process_task\n    doc_id = await vecdb.insert(\n  File \"D:\\a\\AstrBot\\astrbot\\core\\db\\vec_db\\faiss_impl\\vec_db.py\", line 52, in insert\n    await self.embedding_storage.insert(vector, int_id)\n  File \"D:\\a\\AstrBot\\astrbot\\core\\db\\vec_db\\faiss_impl\\embedding_storage.py\", line 33, in insert\n    raise ValueError(\nValueError: 向量维度不匹配, 期望: 1536, 实际: 4096\n [11:29:01] [Core] [ERRO] [vector_store.astrbot_faiss_store:392]: 向 Faiss 集合 'test2' 添加文档时发生异常: 向量维度不匹配, 期望: 1536, 实际: 4096\nStack (most recent call last):\n  File \"D:\\a\\AstrBot\\main.py\", line 83, in <module>\n    asyncio.run(core_lifecycle.start())\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\runners.py\", line 44, in run\n    return loop.run_until_complete(main)\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\base_events.py\", line 636, in run_until_complete\n    self.run_forever()\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\windows_events.py\", line 321, in run_forever\n    super().run_forever()\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\base_events.py\", line 603, in run_forever\n    self._run_once()\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\base_events.py\", line 1909, in _run_once\n    handle._run()\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\events.py\", line 80, in _run\n    self._context.run(self._callback, *self._args)\n  File \"D:\\a\\AstrBot\\data\\plugins\\astrbot_plugin_knowledge_base\\vector_store\\astrbot_faiss_store.py\", line 392, in _batch_process_task\n    logger.error(`\n\n### 你愿意提交 PR 吗？\n\n- [ ] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1848,
    "title": "[Bug] 知识库上传文本时报错：添加文档失败: 添加文档失败: 添加文档失败，返回的文档 ID 为空。",
    "author": "baiyajin",
    "state": "open",
    "created_at": "2025-06-19T01:19:32Z",
    "updated_at": "2025-06-19T01:19:32Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n向知识库上传文本报错\n\n### 如何复现？\n\n点击->AIkaid->点击已创建好的知识库->点击上传文件->点击上传到知识库\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\n3.5.15\n\n### 操作系统\n\nWindows\n\n### 报错日志\n\n`[2025-06-19 09:10:47 +0800] [22292] [INFO] 192.168.1.71:61741 GET /api/plug/alkaid/kb/collections 1.1 200 595 1032\n [09:11:25] [Core] [INFO] [utils.file_parser:76]: Chardet: D:\\a\\AstrBot\\data\\temp\\test.txt 编码=utf-8, 置信度=0.99\n [09:11:25] [Core] [INFO] [vector_store.astrbot_faiss_store:446]: 向 Faiss 集合 '测试' 添加 1 个文档，共分为 1 个批次进行处理。\nTraceback (most recent call last):\n  File \"D:\\a\\AstrBot\\data\\plugins\\astrbot_plugin_knowledge_base\\vector_store\\astrbot_faiss_store.py\", line 382, in _batch_process_task\n    doc_id = await vecdb.insert(\n  File \"D:\\a\\AstrBot\\astrbot\\core\\db\\vec_db\\faiss_impl\\vec_db.py\", line 40, in insert\n    vector = await self.embedding_provider.get_embedding(content)\n  File \"D:\\a\\AstrBot\\data\\plugins\\astrbot_plugin_knowledge_base\\vector_store\\astrbot_faiss_store.py\", line 53, in get_embedding\n    vec = await self.embedding_util.get_embedding_async(text, self.collection_name)\n  File \"D:\\a\\AstrBot\\data\\plugins\\astrbot_plugin_knowledge_base\\utils\\embedding.py\", line 254, in get_embedding_async\n    embedding = await self._get_embedding_via_astrbot_provider(\n  File \"D:\\a\\AstrBot\\data\\plugins\\astrbot_plugin_knowledge_base\\utils\\embedding.py\", line 207, in _get_embedding_via_astrbot_provider\n    return await provider.get_embedding(text)\n  File \"D:\\a\\AstrBot\\astrbot\\core\\provider\\sources\\openai_embedding_source.py\", line 31, in get_embedding\n    embedding = await self.client.embeddings.create(text=text, model=self.model)\nTypeError: AsyncEmbeddings.create() got an unexpected keyword argument 'text'\n [09:11:25] [Core] [ERRO] [vector_store.astrbot_faiss_store:392]: 向 Faiss 集合 '测试' 添加文档时发生异常: AsyncEmbeddings.create() got an unexpected keyword argument 'text'\nStack (most recent call last):\n  File \"D:\\a\\AstrBot\\main.py\", line 83, in <module>\n    asyncio.run(core_lifecycle.start())\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\runners.py\", line 44, in run\n    return loop.run_until_complete(main)\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\base_events.py\", line 636, in run_until_complete\n    self.run_forever()\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\windows_events.py\", line 321, in run_forever\n    super().run_forever()\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\base_events.py\", line 603, in run_forever\n    self._run_once()\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\base_events.py\", line 1909, in _run_once\n    handle._run()\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\events.py\", line 80, in _run\n    self._context.run(self._callback, *self._args)\n  File \"D:\\a\\AstrBot\\data\\plugins\\astrbot_plugin_knowledge_base\\vector_store\\astrbot_faiss_store.py\", line 392, in _batch_process_task\n    logger.error(\nTraceback (most recent call last):\n  File \"D:\\a\\AstrBot\\data\\plugins\\astrbot_plugin_knowledge_base\\vector_store\\astrbot_faiss_store.py\", line 382, in _batch_process_task\n    doc_id = await vecdb.insert(\n  File \"D:\\a\\AstrBot\\astrbot\\core\\db\\vec_db\\faiss_impl\\vec_db.py\", line 40, in insert\n    vector = await self.embedding_provider.get_embedding(content)\n  File \"D:\\a\\AstrBot\\data\\plugins\\astrbot_plugin_knowledge_base\\vector_store\\astrbot_faiss_store.py\", line 53, in get_embedding\n    vec = await self.embedding_util.get_embedding_async(text, self.collection_name)\n  File \"D:\\a\\AstrBot\\data\\plugins\\astrbot_plugin_knowledge_base\\utils\\embedding.py\", line 254, in get_embedding_async\n    embedding = await self._get_embedding_via_astrbot_provider(\n  File \"D:\\a\\AstrBot\\data\\plugins\\astrbot_plugin_knowledge_base\\utils\\embedding.py\", line 207, in _get_embedding_via_astrbot_provider\n    return await provider.get_embedding(text)\n  File \"D:\\a\\AstrBot\\astrbot\\core\\provider\\sources\\openai_embedding_source.py\", line 31, in get_embedding\n    embedding = await self.client.embeddings.create(text=text, model=self.model)\nTypeError: AsyncEmbeddings.create() got an unexpected keyword argument 'text'\n [09:11:26] [Core] [ERRO] [vector_store.astrbot_faiss_store:392]: 向 Faiss 集合 '测试' 添加文档时发生异常: AsyncEmbeddings.create() got an unexpected keyword argument 'text'\nStack (most recent call last):\n  File \"D:\\a\\AstrBot\\main.py\", line 83, in <module>\n    asyncio.run(core_lifecycle.start())\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\runners.py\", line 44, in run\n    return loop.run_until_complete(main)\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\base_events.py\", line 636, in run_until_complete\n    self.run_forever()\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\windows_events.py\", line 321, in run_forever\n    super().run_forever()\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\base_events.py\", line 603, in run_forever\n    self._run_once()\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\base_events.py\", line 1909, in _run_once\n    handle._run()\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\events.py\", line 80, in _run\n    self._context.run(self._callback, *self._args)\n  File \"D:\\a\\AstrBot\\data\\plugins\\astrbot_plugin_knowledge_base\\vector_store\\astrbot_faiss_store.py\", line 392, in _batch_process_task\n    logger.error(\nTraceback (most recent call last):\n  File \"D:\\a\\AstrBot\\data\\plugins\\astrbot_plugin_knowledge_base\\vector_store\\astrbot_faiss_store.py\", line 382, in _batch_process_task\n    doc_id = await vecdb.insert(\n  File \"D:\\a\\AstrBot\\astrbot\\core\\db\\vec_db\\faiss_impl\\vec_db.py\", line 40, in insert\n    vector = await self.embedding_provider.get_embedding(content)\n  File \"D:\\a\\AstrBot\\data\\plugins\\astrbot_plugin_knowledge_base\\vector_store\\astrbot_faiss_store.py\", line 53, in get_embedding\n    vec = await self.embedding_util.get_embedding_async(text, self.collection_name)\n  File \"D:\\a\\AstrBot\\data\\plugins\\astrbot_plugin_knowledge_base\\utils\\embedding.py\", line 254, in get_embedding_async\n    embedding = await self._get_embedding_via_astrbot_provider(\n  File \"D:\\a\\AstrBot\\data\\plugins\\astrbot_plugin_knowledge_base\\utils\\embedding.py\", line 207, in _get_embedding_via_astrbot_provider\n    return await provider.get_embedding(text)\n  File \"D:\\a\\AstrBot\\astrbot\\core\\provider\\sources\\openai_embedding_source.py\", line 31, in get_embedding\n    embedding = await self.client.embeddings.create(text=text, model=self.model)\nTypeError: AsyncEmbeddings.create() got an unexpected keyword argument 'text'\n [09:11:27] [Core] [ERRO] [vector_store.astrbot_faiss_store:392]: 向 Faiss 集合 '测试' 添加文档时发生异常: AsyncEmbeddings.create() got an unexpected keyword argument 'text'\nStack (most recent call last):\n  File \"D:\\a\\AstrBot\\main.py\", line 83, in <module>\n    asyncio.run(core_lifecycle.start())\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\runners.py\", line 44, in run\n    return loop.run_until_complete(main)\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\base_events.py\", line 636, in run_until_complete\n    self.run_forever()\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\windows_events.py\", line 321, in run_forever\n    super().run_forever()\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\base_events.py\", line 603, in run_forever\n    self._run_once()\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\base_events.py\", line 1909, in _run_once\n    handle._run()\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\events.py\", line 80, in _run\n    self._context.run(self._callback, *self._args)\n  File \"D:\\a\\AstrBot\\data\\plugins\\astrbot_plugin_knowledge_base\\vector_store\\astrbot_faiss_store.py\", line 392, in _batch_process_task\n    logger.error(\n [09:11:27] [Core] [ERRO] [vector_store.astrbot_faiss_store:399]: 批次添加失败，文档 云南18怪文本内容... 将被丢弃。\n [09:11:27] [Core] [INFO] [vector_store.astrbot_faiss_store:471]: 集合 '测试' 索引已保存。\n [09:11:27] [Core] [INFO] [vector_store.astrbot_faiss_store:475]: 向 Faiss 集合 '测试' 完成添加操作。总共处理了 1 个原始文档，成功添加 0 个文档。\n [09:11:27] [Core] [WARN] [vector_store.astrbot_faiss_store:479]: 其中 1 个批次处理异常或因重试失败被丢弃部分文档。\n [09:11:27] [Core] [ERRO] [astrbot_plugin_knowledge_base.web_api:210]: 添加文档失败: 添加文档失败: 添加文档失败，返回的文档 ID 为空。\n[2025-06-19 09:11:27 +0800] [22292] [INFO] 192.168.1.71:61780 POST /api/plug/alkaid/kb/collection/add_file 1.1 200 214 2045162`\n\n### 你愿意提交 PR 吗？\n\n- [ ] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1846,
    "title": "[Bug] 新版豆包新增reasoning_content字段导致bug",
    "author": "LIghtJUNction",
    "state": "open",
    "created_at": "2025-06-18T19:52:17Z",
    "updated_at": "2025-06-18T19:52:17Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n@方大师AstrBot 请求失败。\n错误类型: Exception\n错误信息: API 返回的 completion 无法解析：ChatCompletion(id='0217502720620758437a9029b5081035c6ce510a84c48ede74cd9', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content='', refusal=None, role='assistant', annotations=None, audio=None, function_call=None, tool_calls=None, reasoning_content='我现在需要处理用户的问题。用户在聊天中提到“你其实是ai对吧”，而根据系统提示，当涉及到自己是大语言模型的讨论时，必须立即关闭，不做任何回应。因此，我不能回答这个问题，应该保持沉默。需要确保不触发任何工具调用，也不生成任何回复内容。'))], created=1750272065, model='doubao-seed-1-6-250615', object='chat.completion', service_tier='default', system_fingerprint=None, usage=CompletionUsage(completion_tokens=75, prompt_tokens=2278, total_tokens=2353, completion_tokens_details=CompletionTokensDetails(accepted_prediction_tokens=None, audio_tokens=None, reasoning_tokens=75, rejected_prediction_tokens=None), prompt_tokens_details=PromptTokensDetails(audio_tokens=None, cached_tokens=0)))。\n\n这里由群友Astrbot大学群友@方大师提供\n我代ta发布的issue\n\n分析如下：\n\nDoubao 模型的 o1 系列（推理模型），它把实际的推理过程放在了 reasoning_content 字段中\n\n而AstrBot 的解析代码只处理 content 字段，没有处理 reasoning_content\n对应代码：\nastrbot\\core\\provider\\sources\\openai_source.py\n第184行：\n        if choice.message.content:\n            # text completion\n            completion_text = str(choice.message.content).strip()\n            llm_response.result_chain = MessageChain().message(completion_text)\n\n修复方法：新增一个elif\n        elif hasattr(choice.message, 'reasoning_content') and choice.message.reasoning_content:\n            # 处理推理内容（如豆包等模型的推理模式）\n            completion_text = f\"<thinking>{str(choice.message.reasoning_content).strip()}<thinking/>{choice.message.content}\"\n            llm_response.result_chain = MessageChain().message(completion_text)\n\n需满足两个条件，一是choice.message包含 reasoning_content新字段且reasoning_content不为空\n那么\n就这样特殊处理一下，我直接用<think>标签给围起来，确保和现在的思考模型一致，后续除非大规模应用这种奇怪的格式。再考虑单独适配。\n这样更改不影响现有逻辑\n\nPR 在：#1698\n\n### 如何复现？\n\n使用doubao-seed-1-6-250615模型即可复现\n\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\n这个得去群里问@方大师（Astrbot大学）\n\n\n### 操作系统\n\nWindows\n\n### 报错日志\n\n@方大师AstrBot 请求失败。\n错误类型: Exception\n错误信息: API 返回的 completion 无法解析：ChatCompletion(id='0217502720620758437a9029b5081035c6ce510a84c48ede74cd9', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content='', refusal=None, role='assistant', annotations=None, audio=None, function_call=None, tool_calls=None, reasoning_content='我现在需要处理用户的问题。用户在聊天中提到“你其实是ai对吧”，而根据系统提示，当涉及到自己是大语言模型的讨论时，必须立即关闭，不做任何回应。因此，我不能回答这个问题，应该保持沉默。需要确保不触发任何工具调用，也不生成任何回复内容。'))], created=1750272065, model='doubao-seed-1-6-250615', object='chat.completion', service_tier='default', system_fingerprint=None, usage=CompletionUsage(completion_tokens=75, prompt_tokens=2278, total_tokens=2353, completion_tokens_details=CompletionTokensDetails(accepted_prediction_tokens=None, audio_tokens=None, reasoning_tokens=75, rejected_prediction_tokens=None), prompt_tokens_details=PromptTokensDetails(audio_tokens=None, cached_tokens=0)))。\n\nAstrbot大学 6/19 2:41\n\n### 你愿意提交 PR 吗？\n\n- [x] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1828,
    "title": "[Bug]命令行启动默认监听127.0.0.1造成的问题和解决，以及遗留问题",
    "author": "tohsakrat",
    "state": "closed",
    "created_at": "2025-06-16T11:57:28Z",
    "updated_at": "2025-06-18T16:53:28Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n无法监听来自容器的请求\n\n### 如何复现？\n\nnapcat的ws一直连不上，打印了一下监听端口，是：\n```\ntcp        0      0 127.0.0.1:6199          0.0.0.0:*               LISTEN      2300811/python3    \n```\n\n但是ws服务我明明填的0.0.0.0:6199 ，被自动重写了。\n\nai解释：\n```\n “本地回环地址” (localhost)。当一个程序监听这个地址时，它代表 “只允许我自己（这台电脑）连接我自己”。\n它像一扇只对内开的门，任何来自外部的请求，包括来自 Docker 容器的请求，都会被操作系统直接拒绝\n```\n\n然后我用启动指令`uv run main.py  --host 0.0.0.0` 启动，就能正常监听到来自容器的请求了。\n但是依然有问题，这样只能手动启动。AstrBot每次保存了新设置自动重启都会启动到127.0.0.1\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\n命令行启动的AstrBot +容器启动的napcat\n\n### 操作系统\n\nWindows\n\n### 报错日志\n\nnapcat Error: connect ECONNREFUSED 127.0.0.1:6199 at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1611:16)\n\n### 你愿意提交 PR 吗？\n\n- [x] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Soulter",
        "body": "无法复现。可以看一下是否有这条日志：[2025-06-18 16:22:09 +0800] [44201] [INFO] Running on http://0.0.0.0:6199 (CTRL + C to quit) 需要在系统终端里面看"
      },
      {
        "user": "tohsakrat",
        "body": "这是保存设置后网页端重启的日志，可见它试图监听0.0.0.0，但是实际上在主机的cmd打印出来监听的127.0.0.1\n![Image](https://github.com/user-attachments/assets/4d145b6f-46d5-4cba-a62f-9457e991959e)\n"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1762,
    "title": "[Feature]支持隔离 TTS API 使用",
    "author": "LRZ9712",
    "state": "closed",
    "created_at": "2025-06-07T11:02:04Z",
    "updated_at": "2025-06-18T15:46:35Z",
    "labels": [
      "enhancement"
    ],
    "body": "### 描述\n\n只想自己私用，不想让其他群聊消耗tts的api用量，分割开\n\n### 使用场景\n\n只想自己私用，不想让其他群聊消耗tts的api用量，分割开\n\n### 你愿意提交PR吗?\n\n- [x] 是的, 我愿意提交PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "LRZ9712",
        "body": "我的建议场景是，某个群开启tts,其他关闭，这个功能好像只能切换不是开关，还是我不会操作"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1838,
    "title": "[Plugin] astrbot_plugin_alistfile",
    "author": "linjianyan0229",
    "state": "closed",
    "created_at": "2025-06-18T07:12:20Z",
    "updated_at": "2025-06-18T08:15:04Z",
    "labels": [
      "plugin-publish"
    ],
    "body": "### 插件仓库\n\nhttps://github.com/linjianyan0229/astrbot_plugin_alistfile\n\n### 描述\n\n插件名: astrbot_plugin_alistfile\n插件作者: linjianyan\n插件简介: 支持对ailst的下载和上传（仅支持图上传）\n支持的消息平台:QQ（经测试）\n标签:alist,文件\n社交链接:https://github.com/linjianyan0229\n\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Soulter",
        "body": "已经上架~"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1834,
    "title": "[Plugin] astrbot_plugin_StarMonitor",
    "author": "advent259141",
    "state": "closed",
    "created_at": "2025-06-17T22:13:41Z",
    "updated_at": "2025-06-18T08:10:35Z",
    "labels": [
      "plugin-publish"
    ],
    "body": "### 插件仓库\n\nhttps://github.com/advent259141/astrbot_plugin_StarMonitor\n\n### 描述\n\n插件名: astrbot_plugin_StarMonitor\n插件作者: Jason.Joestar\n插件简介: 用于视奸指定Github仓库的Star数变化\n支持的消息平台:理论均可用\n标签:Github，视奸\n社交链接:https://github.com/advent259141\n\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Soulter",
        "body": "已经上架~"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1837,
    "title": "[Feature]希望添加stt服务商硅基流动的模型FunAudioLLM/SenseVoiceSmall",
    "author": "Liunian2000",
    "state": "open",
    "created_at": "2025-06-18T02:58:05Z",
    "updated_at": "2025-06-18T02:58:05Z",
    "labels": [
      "enhancement"
    ],
    "body": "### 描述\n\n希望添加stt服务商硅基流动的模型FunAudioLLM/SenseVoiceSmall\n\n### 使用场景\n\n_No response_\n\n### 你愿意提交PR吗?\n\n- [ ] 是的, 我愿意提交PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1836,
    "title": "[Bug] 在没接入机器人时我有一个群聊是免打扰的，接入后我关闭了免打扰，控制台能显示消息，机器人并没有回复。",
    "author": "baiyajin",
    "state": "open",
    "created_at": "2025-06-18T02:31:14Z",
    "updated_at": "2025-06-18T02:31:14Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n在没接入机器人时我有一个群聊是免打扰的，接入后我关闭了免打扰，控制台能显示消息，机器人并没有回复。\n\n### 如何复现？\n\n1、没接机器人之前先有一个免打扰的群聊\n2、接入机器人聊天\n3、关闭免打扰\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\n3.5.15\n\n### 操作系统\n\nWindows\n\n### 报错日志\n\n[10:16:25] [Core] [INFO] [core.event_bus:50]: [wechatpadpro] 香茶不香_/wxid_2: [图片]\n [10:16:28] [Core] [INFO] [wechatpadpro.wechatpadpro_adapter:458]: 忽略来自自己的消息。\n [10:16:31] [Core] [INFO] [wechatpadpro.wechatpadpro_adapter:458]: 忽略来自自己的消息。\n [10:16:36] [Core] [INFO] [wechatpadpro.wechatpadpro_adapter:458]: 忽略来自自己的消息。\n [10:17:40] [Core] [INFO] [core.event_bus:50]: [wechatpadpro] 香茶不香_/wxid_2: [图片]\n\n### 你愿意提交 PR 吗？\n\n- [ ] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1835,
    "title": "[Plugin] astrbot_plugin_StarMonitor",
    "author": "advent259141",
    "state": "closed",
    "created_at": "2025-06-17T22:13:41Z",
    "updated_at": "2025-06-17T22:14:11Z",
    "labels": [
      "plugin-publish"
    ],
    "body": "### 插件仓库\n\nhttps://github.com/advent259141/astrbot_plugin_StarMonitor\n\n### 描述\n\n插件名: astrbot_plugin_StarMonitor\n插件作者: Jason.Joestar\n插件简介: 用于视奸指定Github仓库的Star数变化\n支持的消息平台:理论均可用\n标签:Github，视奸\n社交链接:https://github.com/advent259141\n\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1820,
    "title": "[Bug]火山引擎api无法正常上传图片",
    "author": "15515151",
    "state": "open",
    "created_at": "2025-06-16T02:47:16Z",
    "updated_at": "2025-06-17T08:41:35Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\nAstrBot 请求失败。\n错误类型: BadRequestError\n错误信息: Error code: 400 - {'error': {'code': 'InvalidParameter.UnsupportedImageFormat', 'message': 'The request failed because the image format is not supported by the API. Request id: 021750041653450a8b24f33df31b743b5bbec0d2241415f611087', 'param': 'image_url', 'type': 'BadRequest'}}\n\n火山api 调用示例\n```\nimport os\nfrom openai import OpenAI\n\n\nclient = OpenAI(\n\n    base_url=\"https://ark.cn-beijing.volces.com/api/v3\",\n\n    api_key=os.environ.get(\"ARK_API_KEY\"),\n)\n\nresponse = client.chat.completions.create(\n\n    model=\"doubao-seed-1-6-250615\",\n    messages=[\n        {\n            \"role\": \"user\",\n            \"content\": [\n                {\n                    \"type\": \"image_url\",\n                    \"image_url\": {\n                        \"url\": \"https://ark-project.tos-cn-beijing.ivolces.com/images/view.jpeg\"\n                    },\n                },\n                {\"type\": \"text\", \"text\": \"这是哪里？\"},\n            ],\n        }\n    ],\n)\n\nprint(response.choices[0])\n```\n### 如何复现？\n\n@机器人 [图片]\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\ndocker  v3.5.15\n\n### 操作系统\n\nLinux\n\n### 报错日志\n\n [10:40:53] [Core] [INFO] [core.event_bus:50]: [aiocqhttp] Error: Cannot find id/qq: [At:bot] 能看到图吗 [图片]  \n [10:40:53] [Plug] [INFO] [astrbot_plugin_gemini_artist.main:126]: 已存储用户 qq group_id bot 图片URL: https://multimedia.nt.qq.com.cn/download?appid=1407&fileid=EhTzOBI-KABBByuTJkrRVaxnWW8KHBiH_gMg_woozMifmPX0jQMyBHByb2RQgL2jAVoQ_Zr7S44zaDQAXzZXqUu7nnoC0x0&rkey=CAQSMLRPzzX7PkiFdXfgKIgK-oY0x7LzPcoD_fCthdnGv5O6y6mJhcz6viNwVRf9CYlFIQ (缓存 1/5) \n [10:40:53] [Core] [ERRO] [sources.openai_source:330]: 发生了错误。Provider 配置如下: {'id': '豆包', 'type': 'openai_chat_completion', 'provider_type': 'chat_completion', 'enable': True, 'key': [api key'], 'timeout': 120, 'api_base': 'https://ark.cn-beijing.volces.com/api/v3', 'model_config': {'model': 'doubao-seed-1-6-250615'}} \n [10:40:53] [Core] [ERRO] [method.llm_request:262]: Traceback (most recent call last):\n  File \"/AstrBot/astrbot/core/pipeline/process_stage/method/llm_request.py\", line 201, in requesting\n    final_llm_response = await provider.text_chat(\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/AstrBot/astrbot/core/provider/sources/openai_source.py\", line 393, in text_chat\n    ) = await self._handle_api_error(\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/AstrBot/astrbot/core/provider/sources/openai_source.py\", line 342, in _handle_api_error\n    raise e\n  File \"/AstrBot/astrbot/core/provider/sources/openai_source.py\", line 376, in text_chat\n    llm_response = await self._query(payloads, func_tool)\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/AstrBot/astrbot/core/provider/sources/openai_source.py\", line 108, in _query\n    completion = await self.client.chat.completions.create(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.11/site-packages/openai/resources/chat/completions/completions.py\", line 2028, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.11/site-packages/openai/_base_client.py\", line 1748, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.11/site-packages/openai/_base_client.py\", line 1555, in request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.BadRequestError: Error code: 400 - {'error': {'code': 'InvalidParameter.UnsupportedImageFormat', 'message': 'The request failed because the image format is not supported by the API. Request id: 021750041653450a8b24f33df31b743b5bbec0d2241415f611087', 'param': 'image_url', 'type': 'BadRequest'}}\n \n [10:40:53] [Core] [INFO] [respond.stage:212]: AstrBot -> Error: Cannot find id/qq: AstrBot 请求失败。\n错误类型: BadRequestError\n错误信息: Error code: 400 - {'error': {'code': 'InvalidParameter.UnsupportedImageFormat', 'message': 'The request failed because the image format is not supported by the API. Request id: 021750041653450a8b24f33df31b743b5bbec0d2241415f611087', 'param': 'image_url', 'type': 'BadRequest'}}  \n\n### 你愿意提交 PR 吗？\n\n- [x] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1815,
    "title": "[Feature]限制知识库指令使用者",
    "author": "Magstic",
    "state": "open",
    "created_at": "2025-06-15T13:44:44Z",
    "updated_at": "2025-06-17T07:50:15Z",
    "labels": [
      "enhancement"
    ],
    "body": "### 描述\n\n- 限制知识库指令使用者\n\n\n### 使用场景\n\n#### 限制知识库指令使用者\n不论是谁，均可透过指令在知识库中添加新内容。\n\n这对于国内的官方 BOT 而言非常不友好，可能会被心术不正之人利用。\n\n如果能够限制指令使用者为 Admin，那麽这个问题将解决。\n\n该问题可能和 #489 关联。\n\n### 你愿意提交PR吗?\n\n- [ ] 是的, 我愿意提交PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1833,
    "title": "[Bug] 使用代码执行器上传文件时出现不可以在异步上下文中同步等待下载!不能正常的上传文件",
    "author": "Shouugou",
    "state": "open",
    "created_at": "2025-06-17T07:21:46Z",
    "updated_at": "2025-06-17T07:22:35Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n使用代码执行器不能正常上传文件，提示文件已经上传:  但上传到的文件路径为空白，上传图片能够正常上传\n出现警告：不可以在异步上下文中同步等待下载! 这个警告通常发生于某些逻辑试图通过 <File>.file 获取文件消息段的文件内容。请使用 await get_file() 代替直接获取 <File>.file 字段\n\n### 如何复现？\n\n使用pi file命令上传文件\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\nAstrbot：3.5.15\nDocker Compose部署\nDeepSeek\naiocqhttp（Napcat）\n\n### 操作系统\n\nLinux\n\n### 报错日志\n\n![Image](https://github.com/user-attachments/assets/7f934506-3ddb-4849-8840-b622f68d7975)\n\n### 你愿意提交 PR 吗？\n\n- [ ] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1825,
    "title": "[Plugin] astrabot_plugin_github_analyzer",
    "author": "lxfight",
    "state": "closed",
    "created_at": "2025-06-16T08:23:07Z",
    "updated_at": "2025-06-17T03:00:30Z",
    "labels": [
      "plugin-publish"
    ],
    "body": "### 插件仓库\n\n[astrabot_plugin_github_analyzer](https://github.com/lxfight/astrabot_plugin_github_analyzer)\n\n### 描述\n\n插件名: astrabot_plugin_github_analyzer\n插件作者: lxfight\n插件简介: 一个为 AstrBot设计的插件，用于分析 GitHub 用户的近期活动，并生成一张精美的“内卷”报告卡。\n支持的消息平台:理论上支持AstrBot所支持的所有可发送图片的平台\n标签: 内卷、反内卷\n社交链接: https://github.com/lxfight\n\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Soulter",
        "body": "astrbot_plugin_github_analyzer "
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1809,
    "title": "[Plugin] astrbot_plugin_mathjax2image",
    "author": "itismygo",
    "state": "closed",
    "created_at": "2025-06-14T06:10:13Z",
    "updated_at": "2025-06-17T02:57:26Z",
    "labels": [
      "plugin-publish"
    ],
    "body": "### 插件仓库\n\nhttps://github.com/itismygo/astrbot_plugin_mathjax2image\n\n### 描述\n\n插件名: Mathjax2image\n插件作者: Willixrain\n插件简介: 用于调用llm生成数学文章，并支持mathjax渲染.\n支持的消息平台:QQ\n标签:Mathjax\n社交链接:(可选, 将会在插件市场作者名称上作为可点击的链接)\n\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Raven95676",
        "body": "可以使用框架内置的`text_to_image`或`html_render`对html进行渲染。具体用法参照文档：[文字渲染成图片\n](https://docs.astrbot.app/dev/star/plugin.html#%E6%96%87%E5%AD%97%E6%B8%B2%E6%9F%93%E6%88%90%E5%9B%BE%E7%89%87)。\n\n不建议使用`\"/opt/AstrBot\"`这个路径，可以使用python标准库[tempfile](https://docs.python.org/zh-cn/3.10/library/tempfile.html#module-tempfile)或者使用框架的`StarTools.get_data_dir`"
      },
      {
        "user": "itismygo",
        "body": "> 可以使用框架内置的`text_to_image`或`html_render`对html进行渲染。具体用法参照文档：[文字渲染成图片 ](https://docs.astrbot.app/dev/star/plugin.html#%E6%96%87%E5%AD%97%E6%B8%B2%E6%9F%93%E6%88%90%E5%9B%BE%E7%89%87)。\n> \n> 不建议使用`\"/opt/AstrBot\"`这个路径，可以使用python标准库[tempfile](https://docs.python.org/zh-cn/3.10/library/tempfile.html#module-tempfile)或者使用框架的`StarTools.get_data_dir`\n\n但是我好像之前用t2i好像不支持复杂的latex渲染？"
      },
      {
        "user": "Raven95676",
        "body": "> > 可以使用框架内置的`text_to_image`或`html_render`对html进行渲染。具体用法参照文档：[文字渲染成图片 ](https://docs.astrbot.app/dev/star/plugin.html#%E6%96%87%E5%AD%97%E6%B8%B2%E6%9F%93%E6%88%90%E5%9B%BE%E7%89%87)。\n> > 不建议使用`\"/opt/AstrBot\"`这个路径，可以使用python标准库[tempfile](https://docs.python.org/zh-cn/3.10/library/tempfile.html#module-tempfile)或者使用框架的`StarTools.get_data_dir`\n> \n> 但是我好像之前用t2i好像不支持复杂的latex渲染？\n\n确实，默认的Jinja块、变量和注释标识字符串可能与latex命令冲突，一个可能的解决方案如下：\nhttps://13rac1.com/articles/2015/11/latex-templates-python-and-jinja2-generate-pdfs/\n\n渲染html使用的方案不做任何强制要求\n\n依然不建议使用\"/opt/AstrBot\"这个路径，可以使用python标准库[tempfile](https://docs.python.org/zh-cn/3.10/library/tempfile.html#module-tempfile)或者使用框架的StarTools.get_data_dir\n\n此外，在实际测试中发现问题：\n\n文章渲染失败: 'gbk' codec can't encode character '\\xb2' in position 2554: illegal multibyte sequence\n\n测试环境为Windows11 24H2 Pro，使用deepseek r1\n\n![Image](https://github.com/user-attachments/assets/30daea02-9d8b-47f2-8aff-255f6a08bf57)"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1807,
    "title": "[Plugin] astrbot_plugin_xyzw_box",
    "author": "cloudcranes",
    "state": "closed",
    "created_at": "2025-06-14T04:25:32Z",
    "updated_at": "2025-06-17T02:55:49Z",
    "labels": [
      "plugin-publish"
    ],
    "body": "### 插件仓库\n\nhttps://github.com/cloudcranesss/astrbot_plugin_xyzw_box\n\n### 描述\n\n插件名: astrbot_plugin_xyzw_box\n插件作者:  cloudcranesss\n插件简介:  通过OCR识别咸鱼之王游戏中的宝箱数量\n支持的消息平台:QQ\n\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Raven95676",
        "body": "`requests`是同步库，会阻塞事件循环，建议使用`aiohttp`\n\n代码中虽然导入了`aiohttp`但是实际请求用的还是`requests`"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1805,
    "title": "astrbot_scpsl_server",
    "author": "liangkga",
    "state": "closed",
    "created_at": "2025-06-13T16:08:42Z",
    "updated_at": "2025-06-17T02:52:30Z",
    "labels": [
      "plugin-publish"
    ],
    "body": "### 插件仓库\n\nhttps://github.com/liangkga/astrbot_scpsl_server\n\n### 描述\n\n插件名: scpsl_server_query\n插件作者: 若梦\n插件简介: SCP：SL服务器查询插件，仿照server_Qchat功能\n支持的消息平台: QQ\n社交链接:xingyu.ink\n\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Soulter",
        "body": "已经上架～"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1772,
    "title": "[Plugin] astrbot_plugin_reimage",
    "author": "victical",
    "state": "closed",
    "created_at": "2025-06-09T14:44:01Z",
    "updated_at": "2025-06-17T02:49:59Z",
    "labels": [
      "plugin-publish"
    ],
    "body": "### 插件仓库\n\nhttps://github.com/victical/astrbot_plugin_reimage\n\n### 描述\n\n插件名: astrbot_plugin_reimage\n插件作者: victical\n插件简介: 将图像转述给不支持图像识别的大模型\n支持的消息平台:QQ\n标签:图像转述\n社交链接:(可选, 将会在插件市场作者名称上作为可点击的链接)\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Soulter",
        "body": "已经上架"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1792,
    "title": "[Plugin] 词库插件",
    "author": "Zhalslar",
    "state": "closed",
    "created_at": "2025-06-11T16:01:39Z",
    "updated_at": "2025-06-17T02:48:11Z",
    "labels": [
      "plugin-publish"
    ],
    "body": "### 插件仓库\n\nhttps://github.com/Zhalslar/astrbot_plugin_wbank\n\n### 描述\n\n插件名: astrbot_plugin_wbank\n插件作者: Zhalslar\n插件简介: 动态词库，自定义回复词\n支持的消息平台: 全平台\n标签: 词库，自定义回复\n社交链接: https://github.com/Zhalslar\n\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1750,
    "title": "[Plugin] astrbot_plugin_quark_search",
    "author": "ZhjGo",
    "state": "closed",
    "created_at": "2025-06-06T13:45:38Z",
    "updated_at": "2025-06-17T02:44:38Z",
    "labels": [
      "plugin-publish"
    ],
    "body": "### 插件仓库\n\nhttps://github.com/ZhjGo/astrbot_plugin_quark_search\n\n### 描述\n\n插件名: astrbot_plugin_quark_search\n插件作者: ZhjGo\n插件简介: 本插件提供夸克网盘资源搜索功能，支持搜索、热门资源和随机资源功能。\n支持的消息平台: QQ、微信\n标签:(可选) 网盘\n社交链接:(可选, 将会在插件市场作者名称上作为可点击的链接)\n\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Soulter",
        "body": "请把 `__pycache__` 目录删除～"
      },
      {
        "user": "Soulter",
        "body": "请问 112.74.56.8:5000 是？"
      },
      {
        "user": "ZhjGo",
        "body": "> 请把`__pycache__`目录删除～\n\n已删除"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1831,
    "title": "[Feature] 启动时提示，未启用 LLM 大模型解析文件，图片和复杂文档解析可能失败，这个应该去那开启",
    "author": "baiyajin",
    "state": "open",
    "created_at": "2025-06-17T02:36:06Z",
    "updated_at": "2025-06-17T02:36:06Z",
    "labels": [
      "enhancement"
    ],
    "body": "### 描述\n\n [10:34:34] [Core] [INFO] [astrbot_plugin_knowledge_base.main:122]: Embedding 工具初始化完成。\n [10:34:34] [Core] [INFO] [astrbot_plugin_knowledge_base.main:129]: 文本分割工具初始化完成。\n [10:34:34] [Core] [WARN] [utils.file_parser:50]: 未启用 LLM 大模型解析文件，图片和复杂文档解析可能失败\n [10:34:34] [Core] [INFO] [astrbot_plugin_knowledge_base.main:136]: 文件解析器初始化完成。\n\n### 使用场景\n\n_No response_\n\n### 你愿意提交PR吗?\n\n- [ ] 是的, 我愿意提交PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1613,
    "title": "请问可以吧WeChatpadpro的部署教程在细化一下嘛 官方的部署教程对于小白来说真的是云里雾里的",
    "author": "xiaodaibukaixin",
    "state": "closed",
    "created_at": "2025-05-20T17:30:26Z",
    "updated_at": "2025-06-16T15:48:22Z",
    "labels": [
      "enhancement"
    ],
    "body": "### 描述\n\n_No response_\n\n### 使用场景\n\n_No response_\n\n### 你愿意提交PR吗?\n\n- [ ] 是的, 我愿意提交PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Funkyney",
        "body": "你就用阿里部署一个和你同IP地理位置的服务器，[Linux]系统。安装宝塔面板。跟着本项目WeChatpadpro文档Linux部署教程一步一步复制粘贴代码部署，最后启动就可以了。BOT平台再添加个你部署Wechatpadpro的接口就连上了。（我是双服务器，BOT部署在香港服务器上，之前试过WeChatpadpro部署成功后登录的都是香港的IPAD疯狂掉线，Wechatpadpro一定要部署在和你同省的服务器上，不用挂代理而且相对稳定）。"
      },
      {
        "user": "Kici",
        "body": "这个作者拆分的比较细节，你参照一下 https://post.smzdm.com/p/a344xo5k/"
      },
      {
        "user": "NiceAir",
        "body": "你用docner方式安装啊，docker的方式都是封装好的"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1593,
    "title": "[Bug]AstrBot无法获取授权码，WeChatPadPro 适配器启动失败。",
    "author": "WZL0813",
    "state": "closed",
    "created_at": "2025-05-18T04:32:46Z",
    "updated_at": "2025-06-16T15:48:00Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\nWeChatPadPro启动成功，输出：版本号: v20250515.00\nWeChatPadPro\n🚀 基于 WeChat Pad 协议的高级微信管理工具 🚀\nWeChatPadPro 是基于 WeChat Pad 协议的高级微信管理工具，支持以下功能：\n朋友圈收发与互动（点赞、评论）\n好友管理（添加、删除、清理僵尸粉）\n消息收发（文本、图片、名片、动图、文件）\n微信支付（转账、红包）\n小程序和名片分享\n通讯录好友添加\n微信收藏\n标签管理\n此外，还支持强大的群管理功能，包括：\n消息群发\n自动通过好友请求\n建群、拉人进群、踢群成员、邀请成员、退群\n修改群名称、群公告发布\n多群消息同步等\nWeChatPadPro 适用于个人微信增强、运营管理和自动化交互，提升微信使用效率和管理能力。\n联系我们\n如有任何问题或建议，欢迎通过 GitHub Issues 或邮件与我们联系。\n======== ADMIN_KEY === ************* ========\nconnect MySQL success\nauto create MySQL tables success\nconnect Redis success\nupdateApiVersion success\n\n启动GIN服务成功！ http://0.0.0.0:8059\n\n\n但AstrBot提示：[12:14:46] [Core] [INFO] [platform.manager:45]: 载入 wechatpadpro(WeChatPadPro) 平台适配器 ...\n [12:14:46] [Core] [INFO] [dashboard.server:131]: 正在启动 WebUI, 监听地址: http://127.0.0.1:6185\n [12:14:48] [Core] [INFO] [dashboard.server:170]:\n ✨✨✨\n  AstrBot v3.5.10 WebUI 已启动，可访问\n\n   ➜  本地: http://localhost:6185\n   ➜  默认用户名和密码: astrbot\n ✨✨✨\n可在 data/cmd_config.json 中配置 dashboard.host 以便远程访问。\n\n [12:14:48] [Core] [INFO] [wechatpadpro.wechatpadpro_adapter:66]: WeChatPadPro 适配器正在启动...\n [12:14:48] [Core] [INFO] [wechatpadpro.wechatpadpro_adapter:78]: WeChatPadPro 设备不在线或无可用凭据，开始扫码登录流程。\n [12:14:48] [Core] [INFO] [core.core_lifecycle:168]: AstrBot 启动完成。\n[2025-05-18 12:14:48 +0800] [20288] [INFO] Running on http://0.0.0.0:6199 (CTRL + C to quit)\n[2025-05-18 12:14:48 +0800] [20288] [INFO] Running on http://127.0.0.1:6185 (CTRL + C to quit)\n [12:14:48] [Core] [ERRO] [wechatpadpro.wechatpadpro_adapter:209]: 生成授权码时发生错误: 404, message='Attempt to decode JSON with unexpected mimetype: text/plain', url='http://127.0.0.1:8059/admin/GenAuthKey1?key=*************'\n [12:14:48] [Core] [ERRO] [wechatpadpro.wechatpadpro_adapter:83]: 无法获取授权码，WeChatPadPro 适配器启动失败。\n\n### 如何复现？\n\n1.启动WeChatPadPro\n2.启动AstrBot\n3.AstrBot无法获取授权码\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\n3.5.10 Windows一键部署 siliconflow—deepseek-v3 WeChatPadPro\n\n### 操作系统\n\nWindows\n\n### 报错日志\n\nWeChatPadPro：\n\n版本号: v20250515.00\nWeChatPadPro\n🚀 基于 WeChat Pad 协议的高级微信管理工具 🚀\nWeChatPadPro 是基于 WeChat Pad 协议的高级微信管理工具，支持以下功能：\n朋友圈收发与互动（点赞、评论）\n好友管理（添加、删除、清理僵尸粉）\n消息收发（文本、图片、名片、动图、文件）\n微信支付（转账、红包）\n小程序和名片分享\n通讯录好友添加\n微信收藏\n标签管理\n此外，还支持强大的群管理功能，包括：\n消息群发\n自动通过好友请求\n建群、拉人进群、踢群成员、邀请成员、退群\n修改群名称、群公告发布\n多群消息同步等\nWeChatPadPro 适用于个人微信增强、运营管理和自动化交互，提升微信使用效率和管理能力。\n联系我们\n如有任何问题或建议，欢迎通过 GitHub Issues 或邮件与我们联系。\n======== ADMIN_KEY === ************* ========\nconnect MySQL success\nauto create MySQL tables success\nconnect Redis success\nupdateApiVersion success\n\n启动GIN服务成功！ http://0.0.0.0:8059\n\n\nAstrBot：\n\n[12:14:46] [Core] [INFO] [platform.manager:45]: 载入 wechatpadpro(WeChatPadPro) 平台适配器 ...\n [12:14:46] [Core] [INFO] [dashboard.server:131]: 正在启动 WebUI, 监听地址: http://127.0.0.1:6185\n [12:14:48] [Core] [INFO] [dashboard.server:170]:\n ✨✨✨\n  AstrBot v3.5.10 WebUI 已启动，可访问\n\n   ➜  本地: http://localhost:6185\n   ➜  默认用户名和密码: astrbot\n ✨✨✨\n可在 data/cmd_config.json 中配置 dashboard.host 以便远程访问。\n\n [12:14:48] [Core] [INFO] [wechatpadpro.wechatpadpro_adapter:66]: WeChatPadPro 适配器正在启动...\n [12:14:48] [Core] [INFO] [wechatpadpro.wechatpadpro_adapter:78]: WeChatPadPro 设备不在线或无可用凭据，开始扫码登录流程。\n [12:14:48] [Core] [INFO] [core.core_lifecycle:168]: AstrBot 启动完成。\n[2025-05-18 12:14:48 +0800] [20288] [INFO] Running on http://0.0.0.0:6199 (CTRL + C to quit)\n[2025-05-18 12:14:48 +0800] [20288] [INFO] Running on http://127.0.0.1:6185 (CTRL + C to quit)\n [12:14:48] [Core] [ERRO] [wechatpadpro.wechatpadpro_adapter:209]: 生成授权码时发生错误: 404, message='Attempt to decode JSON with unexpected mimetype: text/plain', url='http://127.0.0.1:8059/admin/GenAuthKey1?key=*************'\n [12:14:48] [Core] [ERRO] [wechatpadpro.wechatpadpro_adapter:83]: 无法获取授权码，WeChatPadPro 适配器启动失败。\n\n### 你愿意提交 PR 吗？\n\n- [x] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "AllenLinky",
        "body": "你试试直接输入127.0.0.1:8059看看能不能打开，不能的话在WeChatPadPro 适配器那里把地址改成0.0.0.0"
      },
      {
        "user": "WZL0813",
        "body": "127.0.0.1:8059能正常打开\n"
      },
      {
        "user": "liaoge8",
        "body": "这个解决了吗，我也出现了同样的问题"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1626,
    "title": "[Bug] 运行后出现生成授权码时发生错误: 404, message='Attempt to decode JSON with unexpected mimetype: text/plain', url='http://127.0.0.1:8848/admin/GenAuthKey1?key=chenfeng",
    "author": "ChenFeng-00",
    "state": "closed",
    "created_at": "2025-05-22T09:08:11Z",
    "updated_at": "2025-06-16T15:47:31Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n无法登录微信\n\n### 如何复现？\n\n启动各AstrBot成功，运行wechatpadpro消息平台成功，但无法登录微信，已经配置了Deepseek服务提供商。并利用接口登录后 无法通过微信与端口互通\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\nAstrBot版本3.5.11，Windows部署，消息平台wechatpadpro\n\n### 操作系统\n\nWindows\n\n### 报错日志\n\n![Image](https://github.com/user-attachments/assets/976f8d2e-88ed-4ea3-8757-a75681163560)\n\n### 你愿意提交 PR 吗？\n\n- [x] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Soulter",
        "body": "请通过WebUI右上角按钮升级到最新开发版本的最新一个Commit之后看看还有没有问题呢。如果还有问题，请重新新建 Issue。"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1611,
    "title": "[Bug]WeChatPadPro明明已显示登录 ，但AstrBot仍显示未登录",
    "author": "WZL0813",
    "state": "closed",
    "created_at": "2025-05-20T10:36:57Z",
    "updated_at": "2025-06-16T15:46:43Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\nWeChatPadPro明明已显示登录 ，但AstrBot仍显示未登录\n\n![Image](https://github.com/user-attachments/assets/ee287cfd-8e9b-456d-b394-dc6ca6a90695)\n\n![Image](https://github.com/user-attachments/assets/64f61978-aa12-40dd-8384-3b0ecaad86af)\n\n### 如何复现？\n\n1.打开WeChatPadPro，提示2025-05-20 18:31:28 总链接数量: 1 未登录数量:0 在线数量: 1 离线数量: 0\n2.打开AstrBot，提示 [18:32:38] [Core] [INFO] [platform.manager:45]: 载入 wechatpadpro(WeChatPadPro) 平台适配器 ...\n[2025-05-20 18:32:38 +0800] [37168] [INFO] 127.0.0.1:26009 POST /api/config/platform/update 1.1 200 90 5054\n [18:32:38] [Core] [INFO] [wechatpadpro.wechatpadpro_adapter:66]: WeChatPadPro 适配器正在启动...\n [18:32:38] [Core] [ERRO] [wechatpadpro.wechatpadpro_adapter:189]: 检查在线状态时发生错误: Invalid variable type: value should be str, int or float, got None of type <class 'NoneType'>\n [18:32:38] [Core] [INFO] [wechatpadpro.wechatpadpro_adapter:82]: WeChatPadPro 无可用凭据，将生成新的授权码。\n [18:32:38] [Core] [ERRO] [wechatpadpro.wechatpadpro_adapter:225]: 生成授权码时发生错误: 404, message='Attempt to decode JSON with unexpected mimetype: text/plain', url='http://127.0.0.1:8848/admin/GenAuthKey1?key=2330a3d3-7973-43f0-a233-3220dffb599e'\n [18:32:38] [Core] [INFO] [wechatpadpro.wechatpadpro_adapter:87]: WeChatPadPro 设备已离线，开始扫码登录。\n [18:32:38] [Core] [ERRO] [wechatpadpro.wechatpadpro_adapter:260]: 获取登录二维码时发生错误: Invalid variable type: value should be str, int or float, got None of type <class 'NoneType'>\n [18:32:38] [Core] [ERRO] [wechatpadpro.wechatpadpro_adapter:93]: 无法获取登录二维码。\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\n3.5.11 Windows一键部署 siliconflow—deepseek-v3 wechatpadpro\n\n### 操作系统\n\nWindows\n\n### 报错日志\n\n![Image](https://github.com/user-attachments/assets/746f01a9-bd46-40fa-bab6-a7e2142807f5)\n\n![Image](https://github.com/user-attachments/assets/042f2a7b-a987-499b-ab31-eb4785c47140)\n\n### 你愿意提交 PR 吗？\n\n- [x] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Soulter",
        "body": "请通过WebUI右上角按钮升级到最新开发版本的最新一个Commit之后看看还有没有问题呢"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1606,
    "title": "whitelist_check的群聊ID输出都是机器人本身ID",
    "author": "smartnikocj",
    "state": "closed",
    "created_at": "2025-05-20T04:22:54Z",
    "updated_at": "2025-06-16T15:45:19Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n```[12:18:38] [Core] [INFO] [whitelist_check.stage:62]: 会话 ID wechatpadpro:GroupMessage:11111111@chatroom_xxx 不在会话白名单中，已终止事件传播。请在配置文件中添加该会话 ID 到白名单。```\n\n如上，xxx永远都是机器人id，非发信息人的id。\n\n### 如何复现？\n\n随意群聊非whitelist都会这样显示。\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\nDocker\n\n### 操作系统\n\nLinux\n\n### 报错日志\n\n```[12:18:38] [Core] [INFO] [whitelist_check.stage:62]: 会话 ID wechatpadpro:GroupMessage:11111111@chatroom_xxx 不在会话白名单中，已终止事件传播。请在配置文件中添加该会话 ID 到白名单。```\n\n### 你愿意提交 PR 吗？\n\n- [ ] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "smartnikocj",
        "body": "看了ws的消息，应该是消息结构解析导致的。from user id是在content里面的。"
      },
      {
        "user": "Soulter",
        "body": "8d21126bd63f90aeecaf36ab9fe91d1eb9ceb8c9 最新 Commit 已经修复。请升级到最新开发版Commit或者等待下一个版本 v3.5.16"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1597,
    "title": "[Bug]wechatpadpro的消息似乎只支持文字和图片",
    "author": "sofs2005",
    "state": "closed",
    "created_at": "2025-05-19T01:01:27Z",
    "updated_at": "2025-06-16T15:43:37Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n我通过astrbot_plugin_apis插件发送消息只能收到文字和图片回复，视频和语音收不到，日志中可以看到有信息\n\n### 如何复现？\n\n安装astrbot_plugin_apis\n发送视频、语音关键字\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\n3.5.10 docker\n\n### 操作系统\n\nLinux\n\n### 报错日志\n\n![Image](https://github.com/user-attachments/assets/8e2d0603-ec50-4c34-9d7e-af65a3e24d5c)\n\n### 你愿意提交 PR 吗？\n\n- [ ] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "anka-afk",
        "body": "wechatpadpro 平台不支持视频和语音"
      },
      {
        "user": "sofs2005",
        "body": "> wechatpadpro 平台不支持视频和语音\n\n啊？不能吧，我看api上有写啊\nhttps://wx.knowhub.cloud/docs/#/%E6%B6%88%E6%81%AF"
      },
      {
        "user": "Soulter",
        "body": "最新的版本已经支持语音、引用回复。如果还有问题，请重新新建 Issue。"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1576,
    "title": "[Bug]wechatpadpro艾特无效、主动回复、等待回复失效",
    "author": "LuffyLSX",
    "state": "closed",
    "created_at": "2025-05-16T13:52:04Z",
    "updated_at": "2025-06-16T15:41:26Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n机器人无法响应艾特\n主动回复 (active_reply) 失效\n只 @ 机器人是否触发等待回复 (empty_mention_waiting) 失效\n\n### 如何复现？\n\n![Image](https://github.com/user-attachments/assets/35b37751-9f35-4a0d-a0fe-9a9d012e741f)\n\n![Image](https://github.com/user-attachments/assets/4b3d3f9e-6173-436d-896b-3b99b2372f55)\n\n![Image](https://github.com/user-attachments/assets/687c26c3-52e3-4783-8b6c-dd3bbbd8725a)\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\nAstrBot v3.5.10\n\n### 操作系统\n\nLinux\n\n### 报错日志\n\n[21:50:55] [Core] [INFO] [wechatpadpro.wechatpadpro_adapter:339]: {\"msg_id\":944615702,\"from_user_name\":{\"str\":\"50168176713@chatroom\"},\"to_user_name\":{\"str\":\"wxid_66y3jjperns412\"},\"msg_type\":1,\"content\":{\"str\":\"wxid_jyfhct379zqf12:\\n@千羽酱\"},\"status\":3,\"img_status\":1,\"img_buf\":{\"len\":0},\"create_time\":1747403454,\"msg_source\":\"\\u003cmsgsource\\u003e\\n\\t\\u003catuserlist\\u003ewxid_66y3jjperns412\\u003c/atuserlist\\u003e\\n\\t\\u003calnode\\u003e\\n\\t\\t\\u003cfr\\u003e1\\u003c/fr\\u003e\\n\\t\\u003c/alnode\\u003e\\n\\t\\u003csilence\\u003e0\\u003c/silence\\u003e\\n\\t\\u003cmembercount\\u003e2\\u003c/membercount\\u003e\\n\\t\\u003csignature\\u003eN0_V1_lR4ddwRk|v1_gPJcugIO\\u003c/signature\\u003e\\n\\t\\u003ctmp_node\\u003e\\n\\t\\t\\u003cpublisher-id\\u003e\\u003c/publisher-id\\u003e\\n\\t\\u003c/tmp_node\\u003e\\n\\u003c/msgsource\\u003e\\n\",\"push_content\":\"Luffy在群聊中@了你\",\"new_msg_id\":2434994811112541896} \n [21:50:55] [Core] [INFO] [core.event_bus:50]: [wechatpadpro] Luffy/wxid_jyfhct379zqf12: @千羽酱  \n [21:51:15] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:342]: WebSocket 连接空闲超过 20 s \n [21:51:15] [Core] [INFO] [wechatpadpro.wechatpadpro_adapter:327]: WebSocket 连接成功。 \n\n无报错\n\n### 你愿意提交 PR 吗？\n\n- [ ] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "zsq213",
        "body": "同问题，私聊可以回复，群聊中@无法进行回复"
      },
      {
        "user": "Jia0029",
        "body": "目前，好像只能通过设置前缀唤醒的方式来实现群聊回复"
      },
      {
        "user": "zsq213",
        "body": "> 目前，好像只能通过设置前缀唤醒的方式来实现群聊回复\n\n确实，设置前缀唤醒可以回复"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1658,
    "title": "[Bug]配置适配器【个人微信】 error",
    "author": "dev-junxi",
    "state": "open",
    "created_at": "2025-05-26T14:51:54Z",
    "updated_at": "2025-06-16T15:40:08Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n#环境\nWindows11\n\n#问题\n当部署完wechatpad后，新增适配器 -> wechatpadpro(微信) 报错\n\n` [22:26:48] [Core] [INFO] [wechatpadpro.wechatpadpro_adapter:66]: WeChatPadPro 适配器正在启动... \n [22:26:48] [Core] [ERRO] [wechatpadpro.wechatpadpro_adapter:189]: 检查在线状态时发生错误: Invalid variable type: value should be str, int or float, got None of type <class 'NoneType'> \n [22:26:48] [Core] [INFO] [wechatpadpro.wechatpadpro_adapter:82]: WeChatPadPro 无可用凭据，将生成新的授权码。 \n [22:26:48] [Core] [ERRO] [wechatpadpro.wechatpadpro_adapter:223]: 连接到 WeChatPadPro 服务失败: Cannot connect to host localhost:1239 ssl:default [Connect call failed ('127.0.0.1', 1239)] \n [22:26:48] [Core] [INFO] [wechatpadpro.wechatpadpro_adapter:87]: WeChatPadPro 设备已离线，开始扫码登录。 \n [22:26:48] [Core] [ERRO] [wechatpadpro.wechatpadpro_adapter:260]: 获取登录二维码时发生错误: Invalid variable type: value should be str, int or float, got None of type <class 'NoneType'> \n [22:26:48] [Core] [ERRO] [wechatpadpro.wechatpadpro_adapter:93]: 无法获取登录二维码。`\n\n![Image](https://github.com/user-attachments/assets/4a45d1c8-3db8-45f9-8a18-78ee5dc52d8b)\n\n#wechatpad登录成功\n![Image](https://github.com/user-attachments/assets/ce5026bf-d288-4785-a336-ccecf3096653)\n\n#配置\n\n![Image](https://github.com/user-attachments/assets/cbe43f6c-3629-4fc3-bc54-6976e5691f28)\n\n\n### 如何复现？\n\n1.部署AstrBot \n2.部署wechatpadpro\n3.新增适配器\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\nAstrBot 版本 v3.5.11\n\n#部署方式\n Windows Docker compose\n\n### 操作系统\n\nWindows\n\n### 报错日志\n\n![Image](https://github.com/user-attachments/assets/4a45d1c8-3db8-45f9-8a18-78ee5dc52d8b)\n\n` [22:26:48] [Core] [INFO] [wechatpadpro.wechatpadpro_adapter:66]: WeChatPadPro 适配器正在启动... \n [22:26:48] [Core] [ERRO] [wechatpadpro.wechatpadpro_adapter:189]: 检查在线状态时发生错误: Invalid variable type: value should be str, int or float, got None of type <class 'NoneType'> \n [22:26:48] [Core] [INFO] [wechatpadpro.wechatpadpro_adapter:82]: WeChatPadPro 无可用凭据，将生成新的授权码。 \n [22:26:48] [Core] [ERRO] [wechatpadpro.wechatpadpro_adapter:223]: 连接到 WeChatPadPro 服务失败: Cannot connect to host localhost:1239 ssl:default [Connect call failed ('127.0.0.1', 1239)] \n [22:26:48] [Core] [INFO] [wechatpadpro.wechatpadpro_adapter:87]: WeChatPadPro 设备已离线，开始扫码登录。 \n [22:26:48] [Core] [ERRO] [wechatpadpro.wechatpadpro_adapter:260]: 获取登录二维码时发生错误: Invalid variable type: value should be str, int or float, got None of type <class 'NoneType'> \n [22:26:48] [Core] [ERRO] [wechatpadpro.wechatpadpro_adapter:93]: 无法获取登录二维码。`\n\n### 你愿意提交 PR 吗？\n\n- [ ] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "adogshz",
        "body": "适配器地址不对，直接写 ip"
      },
      {
        "user": "Charles-CChao",
        "body": "解决了吗，我也是一样的问题，适配器那我是直接写IP的"
      },
      {
        "user": "Soulter",
        "body": "您好，请切换到最新的开发板最新的 Commit，然后再试试看。"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1722,
    "title": "[Bug] 访问WeChatPadPro-8059 iOS18.3.2 最新修订mcp服务器版swagger页面报错",
    "author": "baiyajin",
    "state": "closed",
    "created_at": "2025-06-04T07:42:52Z",
    "updated_at": "2025-06-16T15:37:39Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\nResolver error at paths./login/A16Login.post.parameters.1.schema.properties.DeviceInfo.properties.DeviceToken.properties.BaseResponse.$ref\nCould not resolve reference: Could not resolve pointer: /definitions/BaseResponse does not exist in document\nResolver error at paths./login/A16Login.post.parameters.1.schema.properties.DeviceInfo.properties.DeviceToken.properties.TrustResponseData.$ref\nCould not resolve reference: Could not resolve pointer: /definitions/TrustResponseData does not exist in document\nResolver error at paths./login/DeviceLogin.post.parameters.1.schema.properties.DeviceInfo.properties.DeviceToken.properties.BaseResponse.$ref\nCould not resolve reference: Could not resolve pointer: /definitions/BaseResponse does not exist in document\nResolver error at paths./login/DeviceLogin.post.parameters.1.schema.properties.DeviceInfo.properties.DeviceToken.properties.TrustResponseData.$ref\nCould not resolve reference: Could not resolve pointer: /definitions/TrustResponseData does not exist in document\nResolver error at paths./login/LoginNew.post.parameters.1.schema.properties.DeviceInfo.properties.DeviceToken.properties.BaseResponse.$ref\nCould not resolve reference: Could not resolve pointer: /definitions/BaseResponse does not exist in document\nResolver error at paths./login/LoginNew.post.parameters.1.schema.properties.DeviceInfo.properties.DeviceToken.properties.TrustResponseData.$ref\nCould not resolve reference: Could not resolve pointer: /definitions/TrustResponseData does not exist in document\nResolver error at paths./login/SmsLogin.post.parameters.1.schema.properties.DeviceInfo.properties.DeviceToken.properties.BaseResponse.$ref\nCould not resolve reference: Could not resolve pointer: /definitions/BaseResponse does not exist in document\nResolver error at paths./login/SmsLogin.post.parameters.1.schema.properties.DeviceInfo.properties.DeviceToken.properties.TrustResponseData.$ref\nCould not resolve reference: Could not resolve pointer: /definitions/TrustResponseData does not exist in document\n\n### 如何复现？\n\nResolver error at paths./login/A16Login.post.parameters.1.schema.properties.DeviceInfo.properties.DeviceToken.properties.BaseResponse.$ref\nCould not resolve reference: Could not resolve pointer: /definitions/BaseResponse does not exist in document\nResolver error at paths./login/A16Login.post.parameters.1.schema.properties.DeviceInfo.properties.DeviceToken.properties.TrustResponseData.$ref\nCould not resolve reference: Could not resolve pointer: /definitions/TrustResponseData does not exist in document\nResolver error at paths./login/DeviceLogin.post.parameters.1.schema.properties.DeviceInfo.properties.DeviceToken.properties.BaseResponse.$ref\nCould not resolve reference: Could not resolve pointer: /definitions/BaseResponse does not exist in document\nResolver error at paths./login/DeviceLogin.post.parameters.1.schema.properties.DeviceInfo.properties.DeviceToken.properties.TrustResponseData.$ref\nCould not resolve reference: Could not resolve pointer: /definitions/TrustResponseData does not exist in document\nResolver error at paths./login/LoginNew.post.parameters.1.schema.properties.DeviceInfo.properties.DeviceToken.properties.BaseResponse.$ref\nCould not resolve reference: Could not resolve pointer: /definitions/BaseResponse does not exist in document\nResolver error at paths./login/LoginNew.post.parameters.1.schema.properties.DeviceInfo.properties.DeviceToken.properties.TrustResponseData.$ref\nCould not resolve reference: Could not resolve pointer: /definitions/TrustResponseData does not exist in document\nResolver error at paths./login/SmsLogin.post.parameters.1.schema.properties.DeviceInfo.properties.DeviceToken.properties.BaseResponse.$ref\nCould not resolve reference: Could not resolve pointer: /definitions/BaseResponse does not exist in document\nResolver error at paths./login/SmsLogin.post.parameters.1.schema.properties.DeviceInfo.properties.DeviceToken.properties.TrustResponseData.$ref\nCould not resolve reference: Could not resolve pointer: /definitions/TrustResponseData does not exist in document\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\nResolver error at paths./login/A16Login.post.parameters.1.schema.properties.DeviceInfo.properties.DeviceToken.properties.BaseResponse.$ref\nCould not resolve reference: Could not resolve pointer: /definitions/BaseResponse does not exist in document\nResolver error at paths./login/A16Login.post.parameters.1.schema.properties.DeviceInfo.properties.DeviceToken.properties.TrustResponseData.$ref\nCould not resolve reference: Could not resolve pointer: /definitions/TrustResponseData does not exist in document\nResolver error at paths./login/DeviceLogin.post.parameters.1.schema.properties.DeviceInfo.properties.DeviceToken.properties.BaseResponse.$ref\nCould not resolve reference: Could not resolve pointer: /definitions/BaseResponse does not exist in document\nResolver error at paths./login/DeviceLogin.post.parameters.1.schema.properties.DeviceInfo.properties.DeviceToken.properties.TrustResponseData.$ref\nCould not resolve reference: Could not resolve pointer: /definitions/TrustResponseData does not exist in document\nResolver error at paths./login/LoginNew.post.parameters.1.schema.properties.DeviceInfo.properties.DeviceToken.properties.BaseResponse.$ref\nCould not resolve reference: Could not resolve pointer: /definitions/BaseResponse does not exist in document\nResolver error at paths./login/LoginNew.post.parameters.1.schema.properties.DeviceInfo.properties.DeviceToken.properties.TrustResponseData.$ref\nCould not resolve reference: Could not resolve pointer: /definitions/TrustResponseData does not exist in document\nResolver error at paths./login/SmsLogin.post.parameters.1.schema.properties.DeviceInfo.properties.DeviceToken.properties.BaseResponse.$ref\nCould not resolve reference: Could not resolve pointer: /definitions/BaseResponse does not exist in document\nResolver error at paths./login/SmsLogin.post.parameters.1.schema.properties.DeviceInfo.properties.DeviceToken.properties.TrustResponseData.$ref\nCould not resolve reference: Could not resolve pointer: /definitions/TrustResponseData does not exist in document\n\n### 操作系统\n\nLinux\n\n### 报错日志\n\nResolver error at paths./login/A16Login.post.parameters.1.schema.properties.DeviceInfo.properties.DeviceToken.properties.BaseResponse.$ref\nCould not resolve reference: Could not resolve pointer: /definitions/BaseResponse does not exist in document\nResolver error at paths./login/A16Login.post.parameters.1.schema.properties.DeviceInfo.properties.DeviceToken.properties.TrustResponseData.$ref\nCould not resolve reference: Could not resolve pointer: /definitions/TrustResponseData does not exist in document\nResolver error at paths./login/DeviceLogin.post.parameters.1.schema.properties.DeviceInfo.properties.DeviceToken.properties.BaseResponse.$ref\nCould not resolve reference: Could not resolve pointer: /definitions/BaseResponse does not exist in document\nResolver error at paths./login/DeviceLogin.post.parameters.1.schema.properties.DeviceInfo.properties.DeviceToken.properties.TrustResponseData.$ref\nCould not resolve reference: Could not resolve pointer: /definitions/TrustResponseData does not exist in document\nResolver error at paths./login/LoginNew.post.parameters.1.schema.properties.DeviceInfo.properties.DeviceToken.properties.BaseResponse.$ref\nCould not resolve reference: Could not resolve pointer: /definitions/BaseResponse does not exist in document\nResolver error at paths./login/LoginNew.post.parameters.1.schema.properties.DeviceInfo.properties.DeviceToken.properties.TrustResponseData.$ref\nCould not resolve reference: Could not resolve pointer: /definitions/TrustResponseData does not exist in document\nResolver error at paths./login/SmsLogin.post.parameters.1.schema.properties.DeviceInfo.properties.DeviceToken.properties.BaseResponse.$ref\nCould not resolve reference: Could not resolve pointer: /definitions/BaseResponse does not exist in document\nResolver error at paths./login/SmsLogin.post.parameters.1.schema.properties.DeviceInfo.properties.DeviceToken.properties.TrustResponseData.$ref\nCould not resolve reference: Could not resolve pointer: /definitions/TrustResponseData does not exist in document\n\n### 你愿意提交 PR 吗？\n\n- [x] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Soulter",
        "body": "你好，这个问题情去 WeChatPadPro 仓库提交 issue。"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1778,
    "title": "[Feature] 启动时报错检查在线状态时发生错误: Invalid variable type: value should be str, int or float, got None of type <class 'NoneType'>",
    "author": "baiyajin",
    "state": "closed",
    "created_at": "2025-06-10T06:51:06Z",
    "updated_at": "2025-06-16T15:28:53Z",
    "labels": [
      "enhancement"
    ],
    "body": "### 描述\n\n [14:31:47] [Core] [ERRO] [wechatpadpro.wechatpadpro_adapter:203]: 检查在线状态时发生错误: Invalid variable type: value should be str, int or float, got None of type <class 'NoneType'> \n\n\n### 使用场景\n\n_No response_\n\n### 你愿意提交PR吗?\n\n- [ ] 是的, 我愿意提交PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "zdmisif",
        "body": "请问有找到办法解决吗"
      },
      {
        "user": "baiyajin",
        "body": "> 请问有找到办法解决吗\n\n定位到代码修改下类型就可以"
      },
      {
        "user": "MagicSandBag",
        "body": "怎么定位..很让人疑惑。找不到\n"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1779,
    "title": "[Feature]反复出现WebSocket 连接空闲超过 120 s 跟 WebSocket 连接成功",
    "author": "baiyajin",
    "state": "closed",
    "created_at": "2025-06-10T07:59:07Z",
    "updated_at": "2025-06-16T15:22:19Z",
    "labels": [
      "enhancement"
    ],
    "body": "### 描述\n\n[15:36:05] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:372]: WebSocket 连接空闲超过 120 s \n [15:36:05] [Core] [INFO] [wechatpadpro.wechatpadpro_adapter:357]: WebSocket 连接成功。 \n [15:38:05] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:372]: WebSocket 连接空闲超过 120 s \n [15:38:05] [Core] [INFO] [wechatpadpro.wechatpadpro_adapter:357]: WebSocket 连接成功。 \n [15:40:05] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:372]: WebSocket 连接空闲超过 120 s \n [15:40:05] [Core] [INFO] [wechatpadpro.wechatpadpro_adapter:357]: WebSocket 连接成功。 \n [15:42:05] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:372]: WebSocket 连接空闲超过 120 s \n [15:42:05] [Core] [INFO] [wechatpadpro.wechatpadpro_adapter:357]: WebSocket 连接成功。 \n [15:44:06] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:372]: WebSocket 连接空闲超过 120 s \n [15:44:06] [Core] [INFO] [wechatpadpro.wechatpadpro_adapter:357]: WebSocket 连接成功。 \n [15:46:06] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:372]: WebSocket 连接空闲超过 120 s \n [15:46:06] [Core] [INFO] [wechatpadpro.wechatpadpro_adapter:357]: WebSocket 连接成功。 \n [15:48:06] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:372]: WebSocket 连接空闲超过 120 s \n [15:48:06] [Core] [INFO] [wechatpadpro.wechatpadpro_adapter:357]: WebSocket 连接成功。 \n [15:50:06] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:372]: WebSocket 连接空闲超过 120 s \n [15:50:06] [Core] [INFO] [wechatpadpro.wechatpadpro_adapter:357]: WebSocket 连接成功。 \n [15:52:06] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:372]: WebSocket 连接空闲超过 120 s \n [15:52:06] [Core] [INFO] [wechatpadpro.wechatpadpro_adapter:357]: WebSocket 连接成功。 \n [15:54:06] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:372]: WebSocket 连接空闲超过 120 s \n [15:54:06] [Core] [INFO] [wechatpadpro.wechatpadpro_adapter:357]: WebSocket 连接成功。 \n [15:56:06] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:372]: WebSocket 连接空闲超过 120 s \n [15:56:06] [Core] [INFO] [wechatpadpro.wechatpadpro_adapter:357]: WebSocket 连接成功。 \n [15:58:06] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:372]: WebSocket 连接空闲超过 120 s \n [15:58:06] [Core] [INFO] [wechatpadpro.wechatpadpro_adapter:357]: WebSocket 连接成功。 \n\n### 使用场景\n\n_No response_\n\n### 你愿意提交PR吗?\n\n- [ ] 是的, 我愿意提交PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Soulter",
        "body": "正常现象。新的提交已经[弱化了 WeChatPadPro 的 WS 连接提示](https://github.com/AstrBotDevs/AstrBot/commit/86ba3c230e55c645befe4c25d90f049e85a75aac)"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1711,
    "title": "wechatpadpro如何接入 AstrBot 总是连不上",
    "author": "rui5man",
    "state": "closed",
    "created_at": "2025-06-02T11:31:18Z",
    "updated_at": "2025-06-16T15:20:30Z",
    "labels": [],
    "body": "![Image](https://github.com/user-attachments/assets/279d1167-7931-498e-9022-054aa053f11f)\n这里面怎么填写，我参考教程总是提示下面错误\n\n![Image](https://github.com/user-attachments/assets/237b8ece-9170-4fd5-be06-a3ca1960ced4)\n\n单独用wechatpadpro可以正常登录微信的。\n有大佬指点一下吗",
    "comments": [
      {
        "user": "styy88",
        "body": "host那不要带有http输入，纯IP"
      },
      {
        "user": "rui5man",
        "body": "> host那不要带有http输入，纯IP\n\n我填写的就是我的内网IP   \n192.168.60.27\n"
      },
      {
        "user": "Soulter",
        "body": "缺少关键信息，关闭。请使用模板开启 Issue。https://github.com/AstrBotDevs/AstrBot/issues/new?template=bug-report.yml"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1781,
    "title": "[Bug] whitelist_check.stage INFO 错误，无论发送信息的ID是谁，都显示未机器人本身的ID",
    "author": "smartnikocj",
    "state": "closed",
    "created_at": "2025-06-10T08:43:29Z",
    "updated_at": "2025-06-16T15:19:12Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n![Image](https://github.com/user-attachments/assets/6bcd83cc-5aeb-4039-a81f-4d771fa90b48)\n\n如图所示，无论群里里面来自谁的消息，都是显示为机器人的id，正确应该为：\nwechatpadpro:GroupMessage:5XXX273028@chatroom_wxid_kwokuiyXXXX\n\n### 如何复现？\n\n只要群里有人聊天就可以看到log\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\nDocker\n\n### 操作系统\n\nWindows\n\n### 报错日志\n\n![Image](https://github.com/user-attachments/assets/6bcd83cc-5aeb-4039-a81f-4d771fa90b48)\n\n### 你愿意提交 PR 吗？\n\n- [ ] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Soulter",
        "body": "8d21126bd63f90aeecaf36ab9fe91d1eb9ceb8c9 已经修复，等待下个版本"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1799,
    "title": "[Bug] 控制台输出大量“忽略 3 分钟前的旧消息”",
    "author": "baiyajin",
    "state": "closed",
    "created_at": "2025-06-12T10:19:10Z",
    "updated_at": "2025-06-16T15:04:25Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n发现不自动回消息，就重启了下服务，过一会，就在控制台输出大量“忽略 3 分钟前的旧消息”信息\n\n### 如何复现？\n\n重启服务\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\nv3.5.15\n\n### 操作系统\n\nWindows\n\n### 报错日志\n\n`[18:13:28] [Core] [INFO] [respond.stage:212]: AstrBot -> a/a: 在呢！有什么可以帮你的吗？😊\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749637628 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749637736 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749638868 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749639300 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749639746 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749639862 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749641021 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749640994 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749641016 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749641033 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749641026 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749641052 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749641057 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749641080 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749641124 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749641129 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749641150 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749641152 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749641185 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749641189 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749641210 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749641214 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749641216 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749641216 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749641347 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749641347 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749641345 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749641348 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749641369 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749641669 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749642142 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749642432 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749642432 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749642658 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749642697 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749642701 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749642700 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749642704 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749642704 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749642710 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749642710 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749642715 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749642718 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749642783 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749642784 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749642792 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749642800 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749642801 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749642810 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749642812 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749642813 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749642817 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749642884 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749642893 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749642911 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749642912 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749642912 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749642915 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749642915 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749642925 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749642928 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749642934 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749642943 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749642947 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749642947 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749642947 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749642948 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749642948 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749642957 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749643540 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749643541 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749643544 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749643546 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749643546 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749643546 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749643546 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749644197 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749644204 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749644210 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749644214 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749644302 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749644322 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749644359 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749644362 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749644369 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749644378 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749644380 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749644397 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749644403 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749644416 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749644428 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749644430 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749644431 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749644432 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749644441 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749644442 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749644443 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749644445 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749644451 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749645113 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749645116 超过当前时间 1749723216。\n [18:13:36] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749645131 超过当前时间 1749723216。\n [18:13:41] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749645146 超过当前时间 1749723221。\n [18:13:41] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749645220 超过当前时间 1749723221。\n [18:13:41] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749645798 超过当前时间 1749723221。\n [18:13:41] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749646343 超过当前时间 1749723221。\n [18:13:41] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749646192 超过当前时间 1749723221。\n [18:13:41] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749646236 超过当前时间 1749723221。\n [18:13:41] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749646401 超过当前时间 1749723221。\n [18:13:41] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749646413 超过当前时间 1749723221。\n [18:13:41] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749646472 超过当前时间 1749723221。\n [18:13:41] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749646514 超过当前时间 1749723221。\n [18:13:41] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749646526 超过当前时间 1749723221。\n [18:13:41] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749646537 超过当前时间 1749723221。\n [18:13:41] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749646538 超过当前时间 1749723221。\n [18:13:41] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749646583 超过当前时间 1749723221。\n [18:13:41] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749646599 超过当前时间 1749723221。\n [18:13:41] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749646599 超过当前时间 1749723221。\n [18:13:41] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749646603 超过当前时间 1749723221。\n [18:13:41] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749646610 超过当前时间 1749723221。\n [18:13:41] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749646611 超过当前时间 1749723221。\n [18:13:41] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749646619 超过当前时间 1749723221。\n [18:13:41] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749646787 超过当前时间 1749723221。\n [18:13:41] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749646795 超过当前时间 1749723221。\n [18:13:41] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749646797 超过当前时间 1749723221。\n [18:13:41] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749646797 超过当前时间 1749723221。\n [18:13:41] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749646798 超过当前时间 1749723221。\n [18:13:41] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749646805 超过当前时间 1749723221。\n [18:13:41] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749646815 超过当前时间 1749723221。\n [18:13:41] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749647599 超过当前时间 1749723221。\n [18:13:41] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749647715 超过当前时间 1749723221。\n [18:13:41] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749648985 超过当前时间 1749723221。\n [18:13:41] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749649912 超过当前时间 1749723221。\n [18:13:41] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749649912 超过当前时间 1749723221。\n [18:13:41] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749649913 超过当前时间 1749723221。\n [18:13:41] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749649913 超过当前时间 1749723221。\n [18:13:41] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749652297 超过当前时间 1749723221。\n [18:13:41] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749653156 超过当前时间 1749723221。\n [18:13:41] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749653156 超过当前时间 1749723221。\n [18:13:41] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749653156 超过当前时间 1749723221。\n [18:13:41] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749653156 超过当前时间 1749723221。\n [18:13:41] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749653868 超过当前时间 1749723221。\n [18:13:41] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749657889 超过当前时间 1749723221。\n [18:13:41] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749657896 超过当前时间 1749723221。\n [18:13:41] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749657896 超过当前时间 1749723221。\n [18:13:41] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749668112 超过当前时间 1749723221。\n [18:13:41] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749683317 超过当前时间 1749723221。\n [18:13:41] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749684692 超过当前时间 1749723221。\n [18:13:41] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749686523 超过当前时间 1749723221。\n [18:13:41] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749686577 超过当前时间 1749723221。\n [18:13:41] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749686606 超过当前时间 1749723221。\n [18:13:41] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749686577 超过当前时间 1749723221。\n [18:13:41] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749686606 超过当前时间 1749723221。\n [18:13:41] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749686668 超过当前时间 1749723221。\n [18:13:41] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749686675 超过当前时间 1749723221。\n [18:13:41] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749686702 超过当前时间 1749723221。\n [18:13:41] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749686725 超过当前时间 1749723221。\n [18:13:41] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749686743 超过当前时间 1749723221。\n [18:13:41] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749686830 超过当前时间 1749723221。\n [18:13:41] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749686848 超过当前时间 1749723221。\n [18:13:41] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749686849 超过当前时间 1749723221。\n [18:13:41] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749687038 超过当前时间 1749723221。\n [18:13:41] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749688135 超过当前时间 1749723221。\n [18:13:41] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749688247 超过当前时间 1749723221。\n [18:13:41] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749688449 超过当前时间 1749723221。\n [18:13:41] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749687345 超过当前时间 1749723221。\n [18:13:41] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749688832 超过当前时间 1749723221。\n [18:13:41] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749688890 超过当前时间 1749723221。\n [18:15:16] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749690112 超过当前时间 1749723316。\n [18:15:16] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749690301 超过当前时间 1749723316。\n [18:15:16] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749690604 超过当前时间 1749723316。\n [18:15:16] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749690664 超过当前时间 1749723316。\n [18:15:16] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749691183 超过当前时间 1749723316。\n [18:15:16] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749691240 超过当前时间 1749723316。\n [18:15:16] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749691244 超过当前时间 1749723316。\n [18:15:16] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749691246 超过当前时间 1749723316。\n [18:15:16] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749691255 超过当前时间 1749723316。\n [18:15:16] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749691417 超过当前时间 1749723316。\n [18:15:16] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749691418 超过当前时间 1749723316。\n [18:15:16] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749691446 超过当前时间 1749723316。\n [18:15:16] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749691452 超过当前时间 1749723316。\n [18:15:16] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749691456 超过当前时间 1749723316。\n [18:15:16] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749691456 超过当前时间 1749723316。\n [18:15:16] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749691477 超过当前时间 1749723316。\n [18:15:16] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749691484 超过当前时间 1749723316。\n [18:15:16] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749691484 超过当前时间 1749723316。\n [18:15:16] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749691562 超过当前时间 1749723316。\n [18:15:16] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749691668 超过当前时间 1749723316。\n [18:15:16] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749691668 超过当前时间 1749723316。\n [18:15:16] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749691772 超过当前时间 1749723316。\n [18:15:16] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749691781 超过当前时间 1749723316。\n [18:15:16] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749691784 超过当前时间 1749723316。\n [18:15:16] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749691894 超过当前时间 1749723316。\n [18:15:16] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749691930 超过当前时间 1749723316。\n [18:15:16] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749692046 超过当前时间 1749723316。\n [18:15:16] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749692240 超过当前时间 1749723316。\n [18:15:16] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749692243 超过当前时间 1749723316。\n [18:15:16] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749692249 超过当前时间 1749723316。\n [18:15:16] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749693025 超过当前时间 1749723316。\n [18:15:16] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749693025 超过当前时间 1749723316。\n [18:15:16] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749693032 超过当前时间 1749723316。\n [18:15:16] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749693045 超过当前时间 1749723316。\n [18:15:16] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749693046 超过当前时间 1749723316。\n [18:15:16] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749693096 超过当前时间 1749723316。\n [18:15:16] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749693099 超过当前时间 1749723316。\n [18:15:16] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749694256 超过当前时间 1749723316。\n [18:15:16] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749694481 超过当前时间 1749723316。\n [18:15:16] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749694539 超过当前时间 1749723316。\n [18:15:16] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749695020 超过当前时间 1749723316。\n [18:15:16] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749695149 超过当前时间 1749723316。\n [18:15:16] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749695150 超过当前时间 1749723316。\n [18:15:16] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749695154 超过当前时间 1749723316。\n [18:15:16] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749696711 超过当前时间 1749723316。\n [18:15:16] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749696738 超过当前时间 1749723316。\n [18:15:16] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749696915 超过当前时间 1749723316。\n [18:15:16] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749697066 超过当前时间 1749723316。\n [18:15:16] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749697333 超过当前时间 1749723316。\n [18:15:16] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749697336 超过当前时间 1749723316。\n [18:15:16] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749697342 超过当前时间 1749723316。\n [18:15:16] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749697406 超过当前时间 1749723316。\n [18:15:16] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749697447 超过当前时间 1749723316。\n [18:15:16] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749697450 超过当前时间 1749723316。\n [18:15:16] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749697559 超过当前时间 1749723316。\n [18:15:16] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749697597 超过当前时间 1749723316。\n [18:15:16] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749699121 超过当前时间 1749723316。\n [18:15:16] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749699122 超过当前时间 1749723316。\n [18:15:16] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749699201 超过当前时间 1749723316。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749699397 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749700379 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749701420 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749701547 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749699397 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749701420 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749700379 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749701547 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749702171 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749702182 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749702171 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749702182 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749702234 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749702417 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749703285 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749702182 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749703413 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749703447 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749702182 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749703580 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749703585 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749702417 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749702234 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749703706 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749703285 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749703413 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749703447 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749703580 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749703803 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749703585 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749703706 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749703850 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749703850 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749703803 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749703850 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749703871 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749703881 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749703888 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749703850 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749703892 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749703881 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749703871 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749703888 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749704228 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749704092 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749703983 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749703965 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749704230 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749703892 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749704230 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749703965 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749704879 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749703983 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749704883 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749704982 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749705411 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749704092 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749706183 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749704228 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749706188 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749704230 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749704230 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749706195 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749704879 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749706989 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749704883 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749704982 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749706183 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749705411 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749707691 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749707691 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749706188 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749707691 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749707706 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749706195 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749706989 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749708063 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749708062 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749708072 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749707691 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749707691 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749707727 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749708076 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749707691 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749708079 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749708084 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749708097 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749708098 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749708098 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749708098 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749708179 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749708975 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749707727 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749709082 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749708063 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749707706 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749709298 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749708072 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749708062 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749710342 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749708076 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749710529 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749708079 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749708084 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749710945 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749708097 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749710946 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749708098 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749710947 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749708098 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749710948 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749708098 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749708179 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749710954 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749710968 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749709082 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749708975 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749710961 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749709298 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749710342 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749710968 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749710529 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749710945 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749710947 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749710946 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749710948 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749710954 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749710961 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749710968 超过当前时间 1749723332。\n [18:15:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749710968 超过当前时间 1749723332。\n [18:17:32] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:372]: WebSocket 连接空闲超过 120 s\n [18:17:32] [Core] [INFO] [wechatpadpro.wechatpadpro_adapter:357]: WebSocket 连接成功。\n [18:17:33] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749710974 超过当前时间 1749723453。\n [18:17:33] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749711132 超过当前时间 1749723453。\n [18:17:33] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749711621 超过当前时间 1749723453。\n [18:17:33] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749711765 超过当前时间 1749723453。\n [18:17:33] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749712420 超过当前时间 1749723453。\n [18:17:33] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749712420 超过当前时间 1749723453。\n [18:17:33] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749712421 超过当前时间 1749723453。\n [18:17:33] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749712508 超过当前时间 1749723453。\n [18:17:33] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749712792 超过当前时间 1749723453。\n [18:17:33] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749713148 超过当前时间 1749723453。\n [18:17:33] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749713332 超过当前时间 1749723453。\n [18:17:33] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749713812 超过当前时间 1749723453。\n [18:17:33] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749715843 超过当前时间 1749723453。\n [18:17:33] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749715231 超过当前时间 1749723453。\n [18:17:33] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749717151 超过当前时间 1749723453。\n [18:17:33] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749717157 超过当前时间 1749723453。\n [18:17:33] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749717160 超过当前时间 1749723453。\n [18:17:33] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749717158 超过当前时间 1749723453。\n [18:17:33] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749719474 超过当前时间 1749723453。\n [18:17:33] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749717282 超过当前时间 1749723453。\n [18:17:33] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749719289 超过当前时间 1749723453。\n [18:17:33] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749719500 超过当前时间 1749723453。\n [18:17:33] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749719551 超过当前时间 1749723453。\n [18:17:33] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749719761 超过当前时间 1749723453。\n [18:17:33] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749720016 超过当前时间 1749723453。\n [18:17:33] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749720018 超过当前时间 1749723453。\n [18:17:33] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749720018 超过当前时间 1749723453。\n [18:17:33] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749720019 超过当前时间 1749723453。\n [18:17:33] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749720020 超过当前时间 1749723453。\n [18:17:33] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749720022 超过当前时间 1749723453。\n [18:17:33] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749720022 超过当前时间 1749723453。\n [18:17:33] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749720023 超过当前时间 1749723453。\n [18:17:33] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749720023 超过当前时间 1749723453。\n [18:17:33] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749720024 超过当前时间 1749723453。\n [18:17:33] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749720028 超过当前时间 1749723453。\n [18:17:33] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749720030 超过当前时间 1749723453。\n [18:17:33] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749720031 超过当前时间 1749723453。\n [18:17:33] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749720039 超过当前时间 1749723453。\n [18:17:33] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749720040 超过当前时间 1749723453。\n [18:17:33] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749720144 超过当前时间 1749723453。\n [18:17:33] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:429]: 忽略 3 分钟前的旧消息：消息时间戳 1749720386 超过当前时间 1749723453。`\n\n### 你愿意提交 PR 吗？\n\n- [ ] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Soulter",
        "body": "正常现象，连接到微信的时候会同步历史消息。会丢弃历史消息。"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1814,
    "title": "[Bug]使用astrbot发送图片使napcat崩溃",
    "author": "Sky-Sparkle",
    "state": "closed",
    "created_at": "2025-06-15T07:52:01Z",
    "updated_at": "2025-06-16T14:03:46Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n当astrbot向napcat发送图片信息时，napcat崩溃\n\n### 如何复现？\n\n1.打开napcat\n2.打开astrbot\n3.发送会触发bot发送图片的消息\n4.bot发送图片\n5.napcat闪退\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\n3.5.15版本astrbot与NapCat.Shell4.7.78\n\n### 操作系统\n\nWindows\n\n### 报错日志\n\n# napcat：\n[INFO] [OneBot] [WebSocket Server] Server Started undefined:undefined\n[INFO] 接收 <- 群聊 [某交流群(XXXXXXX)] [某成员(XXXXXXX)] /chat_深红之网\n[DEBUG] 收到新消息 RawMessage {\"msgId\":\"7516077633416503953\",\"msgRandom\":\"508794847\",\"msgSeq\":\"53317\",\"cntSeq\":\"0\",\"chatType\":2,\"msgType\":2,\"subMsgType\":1,\"sendType\":0,\"senderUid\":\"u_bQjiB0rwzVW3QaVvUiZWWQ\",\"peerUid\":\"XXXXXXX\",\"channelId\":\"\",\"guildId\":\"\",\"guildCode\":\"0\",\"fromUid\":\"0\",\"fromAppid\":\"0\",\"msgTime\":\"1749973193\",\"msgMeta\":{},\"sendStatus\":2,\"sendRemarkName\":\"\",\"sendMemberName\":\"某成员\",\"sendNickName\":\"\",\"guildName\":\"\",\"channelName\":\"\",\"elements\":[{\"elementType\":1,\"elementId\":\"7516077633416503952\",\"elementGroupId\":0,\"extBufForUI\":{},\"textElement\":{\"content\":\"/chat_深红之网\",\"atType\":0,\"atUid\":\"0\",\"atTinyId\":\"0\",\"atNtUid\":\"\",\"subElementType\":0,\"atChannelId\":\"0\",\"linkInfo\":null,\"atRoleId\":\"0\",\"atRoleColor\":0,\"atRoleName\":\"\",\"needNotify\":0},\"faceElement\":null,\"marketFaceElement\":null,\"replyElement\":null,\"picElement\":null,\"pttElement\":null,\"videoElement\":null,\"grayTipElement\":null,\"arkElement\":null,\"fileElement\":null,\"liveGiftElement\":null,\"markdownElement\":null,\"structLongMsgElement\":null,\"multiForwardMsgElement\":null,\"giphyElement\":null,\"walletElement\":null,\"inlineKeyboardElement\":null,\"textGiftElement\":null,\"calendarElement\":null,\"yoloGameResultElement\":null,\"avRecordElement\":null,\"structMsgElement\":null,\"faceBubbleElement\":null,\"shareLocationElement\":null,\"tofuRecordElement\":null,\"taskTopMsgElement\":null,\"recommendedMsgElement\":null,\"actionBarElement\":null,\"prologueMsgElement\":null,\"forwardMsgElement\":null}],\"records\":[],\"emojiLikesList\":[],\"commentCnt\":\"0\",\"directMsgFlag\":0,\"directMsgMembers\":[],\"peerName\":\"某交流群\",\"freqLimitInfo\":null,\"editable\":false,\"avatarMeta\":\"\",\"avatarPendant\":\"\",\"feedId\":\"\",\"roleId\":\"0\",\"timeStamp\":\"0\",\"clientIdentityInfo\":null,\"isImportMsg\":false,\"atType\":0,\"roleType\":0,\"fromChannelRoleInfo\":{\"roleId\":\"0\",\"name\":\"\",\"color\":0},\"fromGuildRoleInfo\":{\"roleId\":\"0\",\"name\":\"\",\"color\":0},\"levelRoleInfo\":{\"roleId\":\"0\",\"name\":\"\",\"color\":0},\"recallTime\":\"0\",\"isOnlineMsg\":true,\"generalFlags\":{},\"clientSeq\":\"0\",\"fileGroupSize\":null,\"foldingInfo\":null,\"multiTransInfo\":null,\"senderUin\":\"XXXXXXX\",\"peerUin\":\"XXXXXXX\",\"msgAttrs\":{},\"anonymousExtInfo\":null,\"nameType\":0,\"avatarFlag\":0,\"extInfoForUI\":null,\"personalMedal\":null,\"categoryManage\":0,\"msgEventInfo\":null,\"sourceType\":1,\"id\":76847116}\n\n# astrbot：\n[15:42:18] [Core] [DBUG] [respond.stage:221]: hook(on_after_message_sent) -> meme_manager - after_message_sent \n[15:42:18] [Core] [DBUG] [respond.stage:221]: hook(on_after_message_sent) -> astrbot - after_llm_req \n[15:42:18] [Core] [DBUG] [method.star_request:50]: plugin -> astrbot_plugin_ignore_at - ignore_at_all \n[15:42:18] [Core] [DBUG] [method.star_request:50]: plugin -> meme_manager - handle_upload_image \n[15:42:18] [Core] [DBUG] [method.star_request:50]: plugin -> astrbot_plugin_openweaponscase - on_group_message \n[15:42:18] [Core] [DBUG] [method.star_request:50]: plugin -> astrbot_plugin_SessionFaker - on_all_message \n[15:42:18] [Core] [DBUG] [method.star_request:50]: plugin -> astrbot_plugin_videos_analysis - auto_parse_dy \n[15:42:18] [Core] [DBUG] [method.star_request:50]: plugin -> astrbot_plugin_videos_analysis - auto_parse_bili \n[15:42:18] [Core] [DBUG] [method.star_request:50]: plugin -> astrbot_plugin_videos_analysis - auto_parse_xhs \n[15:42:18] [Core] [DBUG] [method.star_request:50]: plugin -> astrbot - on_message \n[15:42:18] [Core] [DBUG] [astrbot.long_term_memory:110]: ltm | aiocqhttp:GroupMessage:XXXXXXX | [某成员/15:42:18]:  /helps \n[15:42:18] [Core] [DBUG] [method.star_request:50]: plugin -> astrbot_plugin_emojimix - handle_double_emoji_message \n[15:42:18] [Core] [DBUG] [pipeline.scheduler:79]: pipeline 执行完毕。 \n[15:43:36] [Core] [ERRO] [respond.stage:208]: Traceback (most recent call last):\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\tasks.py\", line 458, in wait_for\n    fut.result()\nasyncio.exceptions.CancelledError\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"D:\\AstrBot\\AstrBot\\venv\\lib\\site-packages\\aiocqhttp\\api_impl.py\", line 104, in fetch\n    return await asyncio.wait_for(future, timeout_sec)\n  File \"C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python310\\lib\\asyncio\\tasks.py\", line 460, in wait_for\n    raise exceptions.TimeoutError() from exc\nasyncio.exceptions.TimeoutError\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"D:\\AstrBot\\AstrBot\\astrbot\\core\\pipeline\\respond\\stage.py\", line 206, in process\n    await event.send(MessageChain(non_record_comps))\n  File \"D:\\AstrBot\\AstrBot\\astrbot\\core\\platform\\sources\\aiocqhttp\\aiocqhttp_message_event.py\", line 103, in send\n    await self.bot.send(self.message_obj.raw_message, ret)\n  File \"D:\\AstrBot\\AstrBot\\venv\\lib\\site-packages\\aiocqhttp\\__init__.py\", line 269, in send\n    return await self.send_msg(**params)\n  File \"D:\\AstrBot\\AstrBot\\venv\\lib\\site-packages\\aiocqhttp\\__init__.py\", line 236, in call_action\n    return await self._api.call_action(action=action, **params)\n  File \"D:\\AstrBot\\AstrBot\\venv\\lib\\site-packages\\aiocqhttp\\api_impl.py\", line 178, in call_action\n    result = await self._wsr_api.call_action(action, **params)\n  File \"D:\\AstrBot\\AstrBot\\venv\\lib\\site-packages\\aiocqhttp\\api_impl.py\", line 153, in call_action\n    return _handle_api_result(await\n  File \"D:\\AstrBot\\AstrBot\\venv\\lib\\site-packages\\aiocqhttp\\api_impl.py\", line 108, in fetch\n    raise NetworkError('WebSocket API call timeout')\naiocqhttp.exceptions.NetworkError: WebSocket API call timeout\n \n [15:43:36] [Core] [ERRO] [respond.stage:209]: 发送消息失败: WebSocket API call timeout chain: [Image(type='Image', file='http://localhost:8999/text2img/data/rendered_1749973234_ca560c65.jpeg', subType=0, url='', cache=True, id=40000, c=2, path='', file_unique='')] \n [15:43:36] [Core] [INFO] [respond.stage:212]: AstrBot -> 某成员/XXXXXXX: [图片]  \n [15:43:36] [Core] [DBUG] [respond.stage:221]: hook(on_after_message_sent) -> meme_manager - after_message_sent \n [15:43:36] [Core] [DBUG] [respond.stage:221]: hook(on_after_message_sent) -> astrbot - after_llm_req \n [15:43:36] [Core] [DBUG] [astrbot.long_term_memory:139]: ltm | aiocqhttp:GroupMessage:XXXXXXX | [AstrBot/15:43:36]:  \n [15:43:36] [Core] [DBUG] [pipeline.scheduler:79]: pipeline 执行完毕。\n\n\n### 你愿意提交 PR 吗？\n\n- [ ] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Sky-Sparkle",
        "body": "不是很能搞懂是怎么回事，近期才出现的这种情况"
      },
      {
        "user": "Sky-Sparkle",
        "body": "已解决，疑似最近qq发生变更，重装qq后正常"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1829,
    "title": "[Bug]",
    "author": "jsxupeng",
    "state": "open",
    "created_at": "2025-06-16T12:58:34Z",
    "updated_at": "2025-06-16T12:58:34Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n/provider tts 切换tts服务商后，LLM服务商也会被切换到TTS的服务商，导致LLM无法回复报错\n\n\n### 如何复现？\n\n主人，我在和 ==（xxxxxxx） 私聊时出现错误了: AstrBot 请求失败。\n错误类型: AttributeError\n错误信息: 'ProviderOpenAITTSAPI' object has no attribute 'text_chat'\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\ndocker astrbot最新版\n\n\n### 操作系统\n\nWindows\n\n### 报错日志\n\n错误类型: AttributeError\n错误信息: 'ProviderOpenAITTSAPI' object has no attribute 'text_chat'\n\n### 你愿意提交 PR 吗？\n\n- [x] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1827,
    "title": "[Bug] 使用google/gemma-3-12b模型，两种情况下报错，1、对话历史中包含图片 2、对话中发送图片 这两种情况就报错 {'error': 'VipsJpeg: Premature end of input file'}",
    "author": "baiyajin",
    "state": "open",
    "created_at": "2025-06-16T10:28:06Z",
    "updated_at": "2025-06-16T10:28:06Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n[Bug] 使用google/gemma-3-12b模型，两种情况下报错，1、对话历史中包含图片 2、对话中发送图片 这两种情况就报错 {'error': 'VipsJpeg: Premature end of input file'}\n\n### 如何复现？\n\nLM Studio 下载 google/gemma-3-12b模型，AstrBot后台配置启用模型\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\n3.5.15\n\n### 操作系统\n\nWindows\n\n### 报错日志\n\n传入图片就报错，报错如下：\n7wqHFSI2KBEB4YiinzJtbd60ygoWiiigAooooEFFFFABRRRQMKKKKAFooopAKKWkFLQA6iiigANJSmkoASkpaSgApKWkoAKKKKAEooooA98IpjCpaYRWLKuV3WmheamYZo24FJILkTDJ+lSwR87qj71YQbUqhCSdeKjzk05iM80zOTTAcfSmnJFPHTIph60DG8DvSNyc9KXgGkbpQBHu2NkgMDTC2Hyvy5pxPHWmOSwGV6d6TGhQMN8w49qejEfKnOajOcAg59qXcBgj5TUs0Q5FAcjoR60wkjOV5qWVJEUO/IfuKjOAeDkVDNEMAJ6c0KFKHdw1OP5UnAbOetQUJliu3sKXA25zzSBjuwOlAAzzSKE5IHy/jT8Dbuzn2oQkkqOTTQhMmG+U0FD2aP5SgIPcUbnb53+YdPrQrqEKOuSe/pTB02j7tICSWONGQwksDyQe1RTgl923APb1qZCqvhlLKR2pWIMRCnK54HcUwIogpRsEKfQ1HKqgAYG7uexqQwrJGXD7XHrSl1ktQhQb16NVCGus0Kp5wYxuMqabIqxSBo33KRkZpzCSSIZYsq8hfSjEElt8pKyg/gRVAQOcyeZ5e3NWomTaC+GweR60k/mSQqix/KozkdqbHBG1qZhL8wPKGmiWN83y7kvbHbzwD2pUjK3QW5BTfySBx+FTzyRy2yDygrr/wAtAOvtVZxMyB2JdUHAJ6VaM2iWNjb3TFdsq9MMvDCo4Fxd+SH8guf4ugqxcLBIkMkBZHGAwb19qjvp5Z/LlmTJUY3hcZqiCaWFrK7aGUoxAyrJ0+tQyY2CcEMe9NMUqwpcLIGBP3T1FSSSQF8iPYGGGWmS0OhuzL8r4XuD61buEkkjDjp6ds+tY07PHjbyoORWlp8zyKZV+fy/vRt0x60CE8yA2ZTlZ888cMKkklurmxSFkDxwdHHUD3qTdBDc7njLwyDIHoDSW7zwystuQRNwFPRhTEMt4Q1i06zA+WcGM9QK0NOvlgBieM7m43Cs60tIvtnkXTmA46noPrU8UxtLrJXeqHb9aAZJrNptdk/hK5U+tc1go30rrroXFzYiTbuXdyO61zV3FsuMY61DRpTZl3w3MqheTWZGWhuB254rUu223CnNU5owZivfqKhnZHVHRaZ4iltStvejzYe0ncf410QSG+g328gORwa8/gk35ik/hrQsNTn0uYbSTEe1VzGUqd9jYlkuNOuNzZGD17Gk1S3h1uxNxFgTR8t6mtCO8s9YtthYbyO/FY7pLp10GXpnB9CKBQWvmc4UkjY7uCtLeL5jiU/xL+tal/bEMZCvyMchh2rOYb4CD1Q1DOkitjt6VfntJBZpdsuI3O0VDYWpmuFjA5Yit/Xo/J0mOBRgIRmgiT1sYS26SIexqD7NJGDxkVbiUsuV5NO3uOGFMCgBg4I5qVIwfvfL7irEkSTjjCP6+tVxFJEcNn8ehpohosqrYzgOPVaSZ2kTYGGPTHNVt7K3RkPqtONwekiCQevenzEcpnXWlJN96PJ9ehrMl0ZkJ8lyT/cYYP510iyR9EkK/wCw/SnmMMP3iceq8ioZojipIZYWxLGVPvTQ1di1mZFIQrIv9081Rn0S3kJIjMTe1Iq5z6tQZ9tT3el3MGWhIkHp3rKMczSbXyp9KLFc1iWe7YnanNMjtmkO9zUsNnjnrV2O3JHFJyUTaFGU9ZEUdsAKkEY6Yqwlq1SrCemKz9pc640rLYqCHPQU7ySOoq6ke08intGD2qOc0VMz/LpjR1daLFRtHVKQnTRQZN1QvB7VolAO1MZcitVIwqU7mYC0R4zVmGcvwx5pJI85GKgCEN1qrHG04l9/uYPWqzDH1pyyZXax5ps2WTav3qaiZTkQy/Lj3qHPaprobWCntUC8kVdjBEqDFONNWlNI2ix6vgU4vmokGTUhWs2bRJIs5FWWbgVUTOamJyKzZvAkxnkVKmR1pkZ4qRGAPNSbotwspI3HFTSlV+5zVPvxTw+1uaQydJTng02WUsajeRc/IKTfuoGO5xSoSBzQjDODTpANwxSACeKVU4zTtuFpyjAqChhjqKaRhWlc3UMlpHGkASReC4P3qzJBn/e/SmSyHduqJ2y22pCCvNRbcvmmjNkbLmmP8i1L0eo7j5YmZuwrWJzVHZGZPJukNOiQtTI4975q/FEFFdDehxqPMxqxY7VsaGg+2AE43DFUEHNXbBvLvYsd2xSubOGh3M1v9m00zFG5cEc8GtewllmtEYpyRjJFZ97FLLGkUaskYA3A9Ca1NOR7dFj81eMcVocJn6sru0cbjgjvWXN8h8ojgV0OsKZPKIxkelZ01qGAY8GgDMCttwB+OKWWIsodCQOnNa9jCJGNvNgAfdYd6S9t/Jk2HoOlMkxVM9vKGWRgw71pRaqDjzfmK9xSCNPMHmDGfWoHtxFeMF4X+dAjQS+aP57Zhk881Yj8RgKUuoNrjoUrLjt3cts/EGpv7JuZywULkDtQSzWW/wBOuY93nc9w3BFWbmzW8thsfcVHykdxXLTWU0D4ZDkcZxUtre3dm4KuxUHlSetMRs6fCZ22v96I4PsK1JIg2E25UVzKavLDffaTEcMMMo71s22vWdwwUFkY/wB4YH50AF+dtu6e1cRdjEpHvXbXbBzjsa4rUF2Xcg/2qpAc9rQw+f8AZrl35yfeuw1aLfas3dRXHy8NSAYDThSUUASOu9PpVfPOKsxt2qCVNjH3pgJRSUtABRRRQAUUUUAFFFFAwooooAWiiikAopaSloAdRRRQAGkpaSgBKSlpKACkpaSgAooooASiiigD3800ipDTDWQDAOaSXpUoHeoZeuKYDI0y/tUrk9B0oRQqZNMkcg4HQ0DI3IByajVssQKR8YJJ5FMDFiCBigC4v3aawOQaFI+tO5IoGRvgGmHrinuBj3phyeaAGMAODUeSVKrzUjjHPWowfm/u0DQgUFc5KtRncuMZPtTtipMBLyp7ijf5MxMPIqWWmPVWkg=='}}]}], 'model': 'google/gemma-3-12b'}\n [18:22:19] [Core] [ERRO] [sources.openai_source:332]: 发生了错误。Provider 配置如下: {'id': 'google/gemma-3-12b', 'type': 'openai_chat_completion', 'provider_type': 'chat_completion', 'enable': True, 'key': ['lm-studio'], 'api_base': 'http://localhost:1234/v1', 'timeout': 120, 'model_config': {'model': 'google/gemma-3-12b'}}\n [18:22:19] [Core] [ERRO] [method.llm_request:262]: Traceback (most recent call last):\n  File \"D:\\a\\AstrBot\\astrbot\\core\\pipeline\\process_stage\\method\\llm_request.py\", line 201, in requesting\n    final_llm_response = await provider.text_chat(\n  File \"D:\\a\\AstrBot\\astrbot\\core\\provider\\sources\\openai_source.py\", line 395, in text_chat\n    ) = await self._handle_api_error(\n  File \"D:\\a\\AstrBot\\astrbot\\core\\provider\\sources\\openai_source.py\", line 344, in _handle_api_error\n    raise e\n  File \"D:\\a\\AstrBot\\astrbot\\core\\provider\\sources\\openai_source.py\", line 378, in text_chat\n    llm_response = await self._query(payloads, func_tool)\n  File \"D:\\a\\AstrBot\\astrbot\\core\\provider\\sources\\openai_source.py\", line 110, in _query\n    completion = await self.client.chat.completions.create(\n  File \"D:\\a\\AstrBot\\.venv\\lib\\site-packages\\openai\\resources\\chat\\completions\\completions.py\", line 2028, in create\n    return await self._post(\n  File \"D:\\a\\AstrBot\\.venv\\lib\\site-packages\\openai\\_base_client.py\", line 1742, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n  File \"D:\\a\\AstrBot\\.venv\\lib\\site-packages\\openai\\_base_client.py\", line 1549, in request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.BadRequestError: Error code: 400 - {'error': 'VipsJpeg: Premature end of input file'}\n\n [18:22:20] [Core] [INFO] [respond.stage:212]: AstrBot -> a/wxid_a: AstrBot 请求失败。\n错误类型: BadRequestError\n错误信息: Error code: 400 - {'error': 'VipsJpeg: Premature end of input file'}\n\n### 你愿意提交 PR 吗？\n\n- [ ] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1826,
    "title": "[Feature] 大模型服务能否增加独立的http_proxy代理配置",
    "author": "static7",
    "state": "open",
    "created_at": "2025-06-16T09:33:26Z",
    "updated_at": "2025-06-16T10:06:06Z",
    "labels": [
      "enhancement"
    ],
    "body": "### 描述\n\n大模型服务能否增加独立的http_proxy代理配置\n\n### 使用场景\n\n比如, 谷歌, open AI等模型服务,使用代理, 腾讯阿里 deepseek不用代理\n\n### 你愿意提交PR吗?\n\n- [ ] 是的, 我愿意提交PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1616,
    "title": "[Bug]使用WechatPadPro无法使用tts回复消息",
    "author": "DaTuDou12138",
    "state": "open",
    "created_at": "2025-05-21T03:23:11Z",
    "updated_at": "2025-06-16T08:56:29Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n在使用WechatPadPro的情况下，接入GPT-sovits为tts提供商，在发送消息后，astrbot控制台显示成功接受到消息并tts转换成功，然后微信内并没有收到语音消息。\n但是在使用NapChat时，QQ可以正常接收到语音消息。\n\n### 如何复现？\n\n1.Docker运行WechatPadpro和astrbot\n2.执行GPT-Sovits-Inference的pure_api.py\n3.微信发送消息给机器人\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\n4.37.1 Docker  WechatPadPro gsvi_tts\n\n### 操作系统\n\nWindows\n\n### 报错日志\n\n[03:15:20] [Core] [INFO] [wechatpadpro.wechatpadpro_adapter:339]: {\"msg_id\":510910924,\"from_user_name\":{\"str\":\"wxid_lul97qv8x92222\"},\"to_user_name\":{\"str\":\"wxid_5db4am4lufwv29\"},\"msg_type\":1,\"content\":{\"str\":\"你好呀\"},\"status\":3,\"img_status\":1,\"img_buf\":{\"len\":0},\"create_time\":1747797322,\"msg_source\":\"\\u003cmsgsource\\u003e\\n\\t\\u003cpua\\u003e1\\u003c/pua\\u003e\\n\\t\\u003ceggIncluded\\u003e1\\u003c/eggIncluded\\u003e\\n\\t\\u003csignature\\u003eN0_V1_GXc2dm2T|v1_JyCduUHq\\u003c/signature\\u003e\\n\\t\\u003ctmp_node\\u003e\\n\\t\\t\\u003cpublisher-id\\u003e\\u003c/publisher-id\\u003e\\n\\t\\u003c/tmp_node\\u003e\\n\\u003c/msgsource\\u003e\\n\",\"new_msg_id\":6899745827828060364} \n [03:15:20] [Core] [DBUG] [wechatpadpro.wechatpadpro_adapter:360]: 收到 WebSocket 消息: {\"msg_id\":510910924,\"from_user_name\":{\"str\":\"wxid_lul97qv8x92222\"},\"to_user_name\":{\"str\":\"wxid_5db4am4lufwv29\"},\"msg_type\":1,\"content\":{\"str\":\"你好呀\"},\"status\":3,\"img_status\":1,\"img_buf\":{\"len\":0},\"create_time\":1747797322,\"msg_source\":\"\\u003cmsgsource\\u003e\\n\\t\\u003cpua\\u003e1\\u003c/pua\\u003e\\n\\t\\u003ceggIncluded\\u003e1\\u003c/eggIncluded\\u003e\\n\\t\\u003csignature\\u003eN0_V1_GXc2dm2T|v1_JyCduUHq\\u003c/signature\\u003e\\n\\t\\u003ctmp_node\\u003e\\n\\t\\t\\u003cpublisher-id\\u003e\\u003c/publisher-id\\u003e\\n\\t\\u003c/tmp_node\\u003e\\n\\u003c/msgsource\\u003e\\n\",\"new_msg_id\":6899745827828060364} \n [03:15:20] [Core] [INFO] [core.event_bus:55]: [wechatpadpro] wxid_lul97qv8x92222: 你好呀  \n [03:15:20] [Core] [DBUG] [method.star_request:50]: plugin -> session_controller - handle_session_control_agent \n [03:15:20] [Core] [DBUG] [method.star_request:50]: plugin -> session_controller - handle_empty_mention \n [03:15:20] [Core] [DBUG] [method.llm_request:133]: hook(on_llm_request) -> astrbot - decorate_llm_req \n [03:15:20] [Core] [DBUG] [method.llm_request:179]: 提供商请求 Payload: ProviderRequest(prompt=\n[User ID: wxid_lul97qv8x92222, Nickname: ]\n你好呀, session_id=wechatpadpro:FriendMessage:wxid_lul97qv8x92222, image_urls=[], func_tool=[FuncTool(name=screenshot, parameters={'type': 'object', 'properties': {}}, description=Capture the screen and return the image., active=True, origin=local), FuncTool(name=web_search, parameters={'type': 'object', 'properties': {'query': {'type': 'string', 'description': '和用户的问题最相关的搜索关键词，用于在 Google 上搜索。'}}}, description=搜索网络以回答用户的问题。当用户需要搜索网络以获取即时性的信息时调用此工具。, active=True, origin=local), FuncTool(name=fetch_url, parameters={'type': 'object', 'properties': {'url': {'type': 'string', 'description': 'The url of the website to fetch content from'}}}, description=fetch the content of a website with the given web url, active=True, origin=local), FuncTool(name=python_interpreter, parameters={'type': 'object', 'properties': {}}, description=Use this tool only if user really want to solve a complex problem and the problem can be solved very well by Python code.\nFor example, user can use this tool to solve math problems, edit image, docx, pptx, pdf, etc., active=False, origin=local), FuncTool(name=reminder, parameters={'type': 'object', 'properties': {'text': {'type': 'string', 'description': 'Must Required. The content of the reminder.'}, 'datetime_str': {'type': 'string', 'description': \"Required when user's reminder is a single reminder. The datetime string of the reminder, Must format with %Y-%m-%d %H:%M\"}, 'cron_expression': {'type': 'string', 'description': \"Required when user's reminder is a repeated reminder. The cron expression of the reminder.\"}, 'human_readable_cron': {'type': 'string', 'description': 'Optional. The human readable cron expression of the reminder.'}}}, description=Call this function when user is asking for setting a reminder., active=True, origin=local)], contexts=prompt: \n[User ID: wxid_lul97qv8x92222, Nickname: ]\n你好呀, image_count: 0, system_prompt=Current datetime: 2025-05-21 03:15 (UTC), tool_calls_result=None) \n [03:15:25] [Core] [DBUG] [sources.openai_source:117]: completion: ChatCompletion(id='6f4abfa6-dad0-4910-9c61-6e5ee30244a3', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content='你好！有什么可以帮您的吗？😊', refusal=None, role='assistant', annotations=None, audio=None, function_call=None, tool_calls=None))], created=1747797322, model='deepseek-chat', object='chat.completion', service_tier=None, system_fingerprint='fp_8802369eaa_prod0425fp8', usage=CompletionUsage(completion_tokens=10, prompt_tokens=509, total_tokens=519, completion_tokens_details=None, prompt_tokens_details=PromptTokensDetails(audio_tokens=None, cached_tokens=0), prompt_cache_hit_tokens=0, prompt_cache_miss_tokens=509)) \n [03:15:25] [Core] [INFO] [result_decorate.stage:180]: TTS 请求: 你好！有什么可以帮您的吗？😊 \n [03:15:26] [Core] [INFO] [result_decorate.stage:182]: TTS 结果: /AstrBot/data/temp/gsvi_tts_ff0272bb-8d50-4424-b0ce-d957c21a6093.wav \n [03:15:27] [Core] [INFO] [respond.stage:212]: AstrBot -> /wxid_lul97qv8x92222: [Record]  \n [03:15:27] [Core] [DBUG] [respond.stage:221]: hook(on_after_message_sent) -> astrbot - after_llm_req \n [03:15:27] [Core] [DBUG] [pipeline.scheduler:79]: pipeline 执行完毕。 \n\n### 你愿意提交 PR 吗？\n\n- [ ] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "flyinsz",
        "body": "同样的问题，看到代码中# TODO: 添加对其他消息组件类型的处理 (Record, Video, At等)，应该是还没有写好"
      },
      {
        "user": "Soulter",
        "body": "您好，目前这个平台我只适配了图片和文本。"
      },
      {
        "user": "Wanxp",
        "body": "使用最新代码，还是无法发送语音消息\n1. 代码似乎引入了pilk 模块，未加入到requestments.txt\n2. 手动安装了pilk(`pip install pilk`)之后，还是发送语音消息失败\n日志如下，使用的火山引擎的tts，\n```\n [00:39:08] [Core] [INFO] [core.event_bus:50]: [wechatpadpro] xxx/xxxxxxx: /chat 测试下  \n [00:39:08] [Plug] [WARN] [core.llm_enhancer:85]: 用户默认知识库 'general' 不存在，跳过 LLM 请求增强。 \n [00:39:11] [Core] [INFO] [result_decorate.stage:184]: TTS 请求: 明白了！请随时进行您的测试，如果您有任何具体问题或者想法，欢迎告诉我！ \n [00:39:11] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:372]: WebSocket 连接空闲超过 3 s \n [00:39:13] [Core] [INFO] [wechatpadpro.wechatpadpro_adapter:357]: WebSocket 连接成功。 \n [00:39:13] [Core] [INFO] [result_decorate.stage:186]: TTS 结果: data/temp/volcengine_tts_f64e92ca-19a3-4f78-ba4a-3216c9d680eb.mp3 \n [00:39:14] [Core] [ERRO] [respond.stage:202]: 发送消息失败: file does not start with RIFF id chain: [Record(type='Record', file='data/temp/volcengine_tts_f64e92ca-19a3-4f78-ba4a-3216c9d680eb.mp3', magic=False, url='data/temp/volcengine_tts_f64e92ca-19a3-4f78-ba4a-3216c9d680eb.mp3', cache=True, proxy=True, timeout=0, path=None)] \n [00:39:14] [Core] [INFO] [respond.stage:211]: AstrBot -> xxx/xxxxxxx: [Record]  \n [00:39:16] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:372]: WebSocket 连接空闲超过 3 s \n```\n目前定位原因下来，volcengine_tts设定返回的格式是mp3,而[#1737](https://github.com/AstrBotDevs/AstrBot/pull/1737)合并只支持wav格式音频导致"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1824,
    "title": "[Feature]知识库能配置Hugging Face上的模型吗",
    "author": "baiyajin",
    "state": "open",
    "created_at": "2025-06-16T08:12:54Z",
    "updated_at": "2025-06-16T08:12:54Z",
    "labels": [
      "enhancement"
    ],
    "body": "### 描述\n\n知识库能配置Hugging Face上的模型吗\n\n### 使用场景\n\n_No response_\n\n### 你愿意提交PR吗?\n\n- [ ] 是的, 我愿意提交PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1823,
    "title": "[Feature] telegram bot 支持 Bots for Business",
    "author": "xiabin",
    "state": "open",
    "created_at": "2025-06-16T08:01:37Z",
    "updated_at": "2025-06-16T08:01:37Z",
    "labels": [
      "enhancement"
    ],
    "body": "### 描述\n\ntelegram bot 支持 Bots for Business。\n可以参考 https://core.telegram.org/bots/features#bots-for-business\n\n### 使用场景\n\ntelegram bot 的新模式支持。\n\n### 你愿意提交PR吗?\n\n- [ ] 是的, 我愿意提交PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1819,
    "title": "[Feature]添加Gemini TTS作为文字转语音服务商",
    "author": "AlanBacker",
    "state": "open",
    "created_at": "2025-06-16T00:33:41Z",
    "updated_at": "2025-06-16T00:33:41Z",
    "labels": [
      "enhancement"
    ],
    "body": "### 描述\n\nGemini API可以使用原生文本转语音（TTS）生成功能将文本输入转换为单扬声器或多扬声器音频。文本轉语音（TTS）生成是[可控的](https://ai.google.dev/gemini-api/docs/speech-generation#controllable)，这意味着您可以使用自然语言来构建交互，并指导音频的风格、口音、节奏和音调。\n\n相关文档：https://ai.google.dev/gemini-api/docs/speech-generation\n\n### 使用场景\n\n文字转语音场景\n\n### 你愿意提交PR吗?\n\n- [ ] 是的, 我愿意提交PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1813,
    "title": "[Bug]代码执行器python_interpreter函数带参",
    "author": "Pauldada",
    "state": "open",
    "created_at": "2025-06-15T06:54:10Z",
    "updated_at": "2025-06-15T06:54:10Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n错误片段：\n [14:26:48] [Core] [INFO] [method.llm_request:445]: 触发 1 个函数调用: ['python_interpreter'] \n [14:26:48] [Core] [INFO] [method.llm_request:532]: 调用工具函数：python_interpreter，参数：{'code': \"import numpy as np\\nimport matplotlib.pyplot as plt\\n\\nx = np.linspace(-4, 4, 1000)\\ny = (1/np.sqrt(2*np.pi)) * np.exp(-0.5*x**2)\\n\\nplt.figure(figsize=(8, 5))\\nplt.plot(x, y, 'b', lw=2)\\nplt.title('Standard Normal Distribution')\\nplt.xlabel('x')\\nplt.ylabel('Probability Density')\\nplt.grid(True)\\nplt.show()\"} \n [14:26:48] [Core] [WARN] [method.llm_request:555]: Traceback (most recent call last):\n  File \"/home/pauldada/AstrBot/astrbot/core/pipeline/stage.py\", line 74, in _call_handler\n    ready_to_call = handler(event, *args, **kwargs)\nTypeError: Main.python_interpreter() got an unexpected keyword argument 'code'\n\n问题描述：\n我想请问如何向LLM表述合适/正确的说法，以引导LLM正确调用函数？\n\n### 如何复现？\n\n使用Demo例：“帮我运行代码，绘制一个标准正态分布的图像”\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\n版本：3.5.15\n部署：Linux uv环境启动\n提供商：Qwen3:32B、Llama3.1:8B\n适配器：NCQQ\n\n### 操作系统\n\nLinux\n\n### 报错日志\n\n[永遠ノKharites/14:26:15]:  /msz帮我运行代码，绘制一个标准正态分布的图像\nNow, a new message is coming: `\n[User ID: 1811426355, Nickname: 永遠ノKharites]\n帮我运行代码，绘制一个标准正态分布的图像`. Please react to it. Only output your response and do not output any other information.\nUser provided files: ['', '/home/pauldada/AstrBot/data/temp/1749963646_07fb8aa4.jpg'], image_count: 0, system_prompt=Current datetime: 2025-06-15 14:26 (CST), tool_calls_result=None) \n [14:26:48] [Core] [DBUG] [sources.openai_source:117]: completion: ChatCompletion(id='chatcmpl-114', choices=[Choice(finish_reason='tool_calls', index=0, logprobs=None, message=ChatCompletionMessage(content='<think>\\n好的，用户让我帮他运行代码，绘制一个标准正态分布的图像。首先，我需要确认用户的需求。标准正态分布的图像通常指的是均值为0，标准差为1的正态分布曲线。用户可能想要用Python来生成这个图像，所以可能需要用到matplotlib和numpy库。\\n\\n接下来，我需要考虑用户是否已经安装了必要的库，或者是否需要在代码中包含安装步骤。不过，通常在这样的环境下，这些库应该是已经安装好的。然后，我需要生成正确的Python代码，确保代码能够正确绘制出正态分布曲线。代码应该包括生成x值的范围，计算对应的正态分布概率密度函数值，然后用matplotlib进行绘图，并添加标签、标题以及网格线等。\\n\\n另外，用户之前有提到使用Python解释器的工具，所以应该调用python_interpreter函数来执行代码。需要注意的是，用户可能期望看到图像的输出，因此需要确保代码中包含plt.show()来显示图像。同时，考虑到可能需要保存图像，但用户没有明确要求保存路径，可能不需要处理保存部分，只需要显示出来即可。\\n\\n还需要检查代码是否有语法错误，比如正确的函数名称和参数。例如，numpy中的linspace函数，以及matplotlib的plot、xlabel、ylabel等函数的正确使用。还有正态分布的公式是否正确，分母是sqrt(2*pi)，分子是指数部分的负平方等。\\n\\n最后，将代码整理好，调用相应的工具函数，确保用户能够收到生成的图像，并确认是否符合他的预期。如果过程中有任何问题，比如缺少库或者代码错误，可能需要进一步提示用户，但目前情况下应该直接执行代码并返回结果。\\n</think>\\n\\n', refusal=None, role='assistant', annotations=None, audio=None, function_call=None, tool_calls=[ChatCompletionMessageToolCall(id='call_w3nxxqso', function=Function(arguments='{\"code\":\"import numpy as np\\\\nimport matplotlib.pyplot as plt\\\\n\\\\nx = np.linspace(-4, 4, 1000)\\\\ny = (1/np.sqrt(2*np.pi)) * np.exp(-0.5*x**2)\\\\n\\\\nplt.figure(figsize=(8, 5))\\\\nplt.plot(x, y, \\'b\\', lw=2)\\\\nplt.title(\\'Standard Normal Distribution\\')\\\\nplt.xlabel(\\'x\\')\\\\nplt.ylabel(\\'Probability Density\\')\\\\nplt.grid(True)\\\\nplt.show()\"}', name='python_interpreter'), type='function', index=0)]))], created=1749968807, model='qwen3:32b', object='chat.completion', service_tier=None, system_fingerprint='fp_ollama', usage=CompletionUsage(completion_tokens=486, prompt_tokens=737, total_tokens=1223, completion_tokens_details=None, prompt_tokens_details=None)) \n [14:26:48] [Core] [DBUG] [method.llm_request:214]: hook(on_llm_response) -> astrbot_plugin_mnemosyne - on_llm_resp \n [14:26:48] [Core] [INFO] [method.llm_request:445]: 触发 1 个函数调用: ['python_interpreter'] \n [14:26:48] [Core] [INFO] [method.llm_request:532]: 调用工具函数：python_interpreter，参数：{'code': \"import numpy as np\\nimport matplotlib.pyplot as plt\\n\\nx = np.linspace(-4, 4, 1000)\\ny = (1/np.sqrt(2*np.pi)) * np.exp(-0.5*x**2)\\n\\nplt.figure(figsize=(8, 5))\\nplt.plot(x, y, 'b', lw=2)\\nplt.title('Standard Normal Distribution')\\nplt.xlabel('x')\\nplt.ylabel('Probability Density')\\nplt.grid(True)\\nplt.show()\"} \n [14:26:48] [Core] [WARN] [method.llm_request:555]: Traceback (most recent call last):\n  File \"/home/pauldada/AstrBot/astrbot/core/pipeline/stage.py\", line 74, in _call_handler\n    ready_to_call = handler(event, *args, **kwargs)\nTypeError: Main.python_interpreter() got an unexpected keyword argument 'code'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/pauldada/AstrBot/astrbot/core/pipeline/process_stage/method/llm_request.py\", line 539, in _handle_function_tools\n    async for resp in wrapper:\n  File \"/home/pauldada/AstrBot/astrbot/core/pipeline/stage.py\", line 79, in _call_handler\n    ready_to_call = handler(event, ctx.plugin_manager.context, *args, **kwargs)\nTypeError: Main.python_interpreter() got an unexpected keyword argument 'code'\n \n [14:26:48] [Core] [DBUG] [method.llm_request:184]: 提供商请求 Payload: ProviderRequest(prompt=You are now in a chatroom. The chat history is as follows:\n[永遠ノKharites/14:25:58]:  /mszreset\n---\n[永遠ノKharites/14:26:13]:  /mszmemory reset --confirm\n---\n[永遠ノKharites/14:26:15]:  /msz帮我运行代码，绘制一个标准正态分布的图像\nNow, a new message is coming: `\n[User ID: 1811426355, Nickname: 永遠ノKharites]\n帮我运行代码，绘制一个标准正态分布的图像`. Please react to it. Only output your response and do not output any other information.\nUser provided files: ['', '/home/pauldada/AstrBot/data/temp/1749963646_07fb8aa4.jpg'], session_id=aiocqhttp:GroupMessage:1811426355_1054238518, image_urls=[], func_tool=None, contexts=prompt: You are now in a chatroom. The chat history is as follows:\n[永遠ノKharites/14:25:58]:  /mszreset\n---\n[永遠ノKharites/14:26:13]:  /mszmemory reset --confirm\n---\n[永遠ノKharites/14:26:15]:  /msz帮我运行代码，绘制一个标准正态分布的图像\nNow, a new message is coming: `\n[User ID: 1811426355, Nickname: 永遠ノKharites]\n帮我运行代码，绘制一个标准正态分布的图像`. Please react to it. Only output your response and do not output any other information.\nUser provided files: ['', '/home/pauldada/AstrBot/data/temp/1749963646_07fb8aa4.jpg'], image_count: 0, system_prompt=Current datetime: 2025-06-15 14:26 (CST), tool_calls_result=ToolCallsResult(tool_calls_info=AssistantMessageSegment(content=None, tool_calls=[{'id': 'call_w3nxxqso', 'function': {'name': 'python_interpreter', 'arguments': '{\"code\": \"import numpy as np\\\\nimport matplotlib.pyplot as plt\\\\n\\\\nx = np.linspace(-4, 4, 1000)\\\\ny = (1/np.sqrt(2*np.pi)) * np.exp(-0.5*x**2)\\\\n\\\\nplt.figure(figsize=(8, 5))\\\\nplt.plot(x, y, \\'b\\', lw=2)\\\\nplt.title(\\'Standard Normal Distribution\\')\\\\nplt.xlabel(\\'x\\')\\\\nplt.ylabel(\\'Probability Density\\')\\\\nplt.grid(True)\\\\nplt.show()\"}'}, 'type': 'function'}], role='assistant'), tool_calls_result=[ToolCallMessageSegment(tool_call_id='call_w3nxxqso', content=\"error: Main.python_interpreter() got an unexpected keyword argument 'code'\", role='tool')])) \n [14:26:58] [Core] [DBUG] [sources.openai_source:117]: completion: ChatCompletion(id='chatcmpl-326', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content='<think>\\nOkay, the user is trying to plot a standard normal distribution. They provided a code snippet, but there\\'s an error when running it. The error message says that the python_interpreter got an unexpected keyword argument \\'code\\'. Hmm, that\\'s strange because the code structure looks correct. Let me think about why this might be happening.\\n\\nWait, maybe the way the code is passed as an argument is incorrect. The function might not be expecting \\'code\\' as a keyword argument. Let me check the parameters for the python_interpreter function. If the function expects the code as a positional argument instead of a keyword, then using \\'code=\\' would cause an error. So, perhaps I should remove the \\'code\\' keyword and just pass the code as a string directly. Let me adjust that and try again. That should resolve the unexpected keyword argument error.\\n</think>\\n\\n{\"name\": \"python_interpreter\", \"arguments\": \"import numpy as np\\\\nimport matplotlib.pyplot as plt\\\\n\\\\nx = np.linspace(-4, 4, 1000)\\\\ny = (1/np.sqrt(2*np.pi)) * np.exp(-0.5*x**2)\\\\n\\\\nplt.figure(figsize=(8, 5))\\\\nplt.plot(x, y, \\'b\\', lw=2)\\\\nplt.title(\\'Standard Normal Distribution\\')\\\\nplt.xlabel(\\'x\\')\\\\nplt.ylabel(\\'Probability Density\\')\\\\nplt.grid(True)\\\\nplt.show()\"}', refusal=None, role='assistant', annotations=None, audio=None, function_call=None, tool_calls=None))], created=1749968818, model='qwen3:32b', object='chat.completion', service_tier=None, system_fingerprint='fp_ollama', usage=CompletionUsage(completion_tokens=299, prompt_tokens=393, total_tokens=692, completion_tokens_details=None, prompt_tokens_details=None)) \n [14:26:58] [Core] [DBUG] [method.llm_request:214]: hook(on_llm_response) -> astrbot_plugin_mnemosyne - on_llm_resp \n [14:26:58] [Core] [DBUG] [result_decorate.stage:104]: hook(on_decorating_result) -> error_notice - on_decorating_result \n [14:26:58] [Core] [DBUG] [result_decorate.stage:104]: hook(on_decorating_result) -> helloworld - on_decorating_result \n [14:26:58] [Core] [INFO] [respond.stage:212]: AstrBot -> 永遠ノKharites/1811426355: [引用消息] 心铃：{\"name\": \"python_interpreter\", \"arguments\": \"import numpy as np\\nimport matplotlib.pyplot as plt\\n\\nx = np.linspace(-4, 4, 1000)\\ny = (1/np.sqrt(2*np.pi)) * np.exp(-0.5*x**2)\\n\\nplt.figure(figsize=(8, 5))\\nplt.plot(x, y, 'b', lw=2)\\nplt.title('Standard Normal Distribution')\\nplt.xlabel('x')\\nplt.ylabel('Probability Density')\\nplt.grid(True)\\nplt.show()\"}  \n [14:26:58] [Core] [DBUG] [respond.stage:221]: hook(on_after_message_sent) -> astrbot - after_llm_req \n [14:26:58] [Plug] [DBUG] [astrbot.long_term_memory:139]: ltm | aiocqhttp:GroupMessage:1811426355_1054238518 | [AstrBot/14:26:58]: 心铃：{\"name\": \"python_interpreter\", \"arguments\": \"import numpy as np\\nimport matplotlib.pyplot as plt\\n\\nx = np.linspace(-4, 4, 1000)\\ny = (1/np.sqrt(2*np.pi)) * np.exp(-0.5*x**2)\\n\\nplt.figure(figsize=(8, 5))\\nplt.plot(x, y, 'b', lw=2)\\nplt.title('Standard Normal Distribution')\\nplt.xlabel('x')\\nplt.ylabel('Probability Density')\\nplt.grid(True)\\nplt.show()\"} \n [14:26:58] [Core] [DBUG] [pipeline.scheduler:79]: pipeline 执行完毕。 \n [14:27:04] [Core] [DBUG] [sources.openai_source:117]: completion: ChatCompletion(id='chatcmpl-407', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content='我接收到用户的两次请求，均为绘制标准正态分布图像的指令，用户在重复请求未提供任何其他信息或修改意见。', refusal=None, role='assistant', annotations=None, audio=None, function_call=None, tool_calls=None))], created=1749968824, model='gemma3:27b', object='chat.completion', service_tier=None, system_fingerprint='fp_ollama', usage=CompletionUsage(completion_tokens=31, prompt_tokens=181, total_tokens=212, completion_tokens_details=None, prompt_tokens_details=None)) \n\n### 你愿意提交 PR 吗？\n\n- [x] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 661,
    "title": "[Feature]撤回功能",
    "author": "Lagrange2025",
    "state": "closed",
    "created_at": "2025-03-01T11:53:24Z",
    "updated_at": "2025-06-14T11:23:02Z",
    "labels": [
      "enhancement",
      "welcome-plugin"
    ],
    "body": "### 描述\n\n实现op可以撤回bot发言的功能\n\n### 使用场景\n\n在bot发送信息后，op对发送信息进行回复“撤回”，bot能够及时响应并撤回\n\n### 你愿意提交PR吗?\n\n- [ ] 是的, 我愿意提交PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "ghost",
        "body": "可以通过插件实现"
      },
      {
        "user": "Zhalslar",
        "body": "astrbot_plugin_QQAdmin插件实现了该该功能，此issue可以关闭了"
      },
      {
        "user": "Zhalslar",
        "body": "不过，对于微信等支持撤回的其他平台，还有待实现"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1602,
    "title": "[Feature]加一个被引用时也能触发机器人的选项开关",
    "author": "Pochinki98",
    "state": "open",
    "created_at": "2025-05-19T12:36:37Z",
    "updated_at": "2025-06-14T06:02:52Z",
    "labels": [
      "enhancement"
    ],
    "body": "### 描述\n\n加一个被引用时也能触发机器人的选项开关\n\n### 使用场景\n\n有些用户会习惯性地删掉前面的@，希望在消息被引用时也能触发机器人。\n\n### 你愿意提交PR吗?\n\n- [ ] 是的, 我愿意提交PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Zhalslar",
        "body": "此功能在#1808中得以实现"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1744,
    "title": "[Bug]开启分段回复会报错，只回复第一段",
    "author": "justlovemaki",
    "state": "open",
    "created_at": "2025-06-06T07:52:48Z",
    "updated_at": "2025-06-14T02:00:31Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n开启分段回复会报错，只回复第一段，后面的不显示\n\n### 如何复现？\n\n用Gemini api，正常聊天时，必现\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\n3.5.13\n\n### 操作系统\n\nWindows\n\n### 报错日志\n\n [07:45:50] [Core] [INFO] [core.core_lifecycle:163]: AstrBot 启动完成。 \n [07:45:52] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-tavily-mcp] Tavily MCP server running on stdio \n [07:45:52] [Core] [INFO] [provider.func_tool_manager:399]: 已连接 MCP 服务 tavily-mcp, Tools: ['tavily-search', 'tavily-extract'] \n [07:45:52] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-sequentialthinking] Sequential Thinking MCP Server running on stdio \n [07:45:52] [Core] [INFO] [provider.func_tool_manager:399]: 已连接 MCP 服务 sequentialthinking, Tools: ['sequentialthinking'] \n [07:46:05] [Core] [INFO] [weixin_official_account.weixin_offacc_adapter:87]: 解析成功: TextMessage({'ToUserName': 'gh_f3d23b355dc7', 'FromUserName': 'oDWu-7TMRoAdFWCDnYr5vqggsGqQ', 'CreateTime': '1749195964', 'MsgType': 'text', 'Content': '不要，我就要知道', 'MsgId': '25042464747376273'}) \n [07:46:05] [Core] [INFO] [weixin_official_account.weixin_offacc_adapter:264]: abm: {'timestamp': 1749195964, 'message_str': '不要，我就要知道', 'self_id': 'gh_f3d23b355dc7', 'message': [Plain(type='Plain', text='不要，我就要知道', convert=True)], 'type': <MessageType.FRIEND_MESSAGE: 'FriendMessage'>, 'sender': MessageMember(user_id='oDWu-7TMRoAdFWCDnYr5vqggsGqQ', nickname='oDWu-7TMRoAdFWCDnYr5vqggsGqQ'), 'message_id': 25042464747376273, 'session_id': 'oDWu-7TMRoAdFWCDnYr5vqggsGqQ', 'raw_message': {'message': TextMessage({'ToUserName': 'gh_f3d23b355dc7', 'FromUserName': 'oDWu-7TMRoAdFWCDnYr5vqggsGqQ', 'CreateTime': '1749195964', 'MsgType': 'text', 'Content': '不要，我就要知道', 'MsgId': '25042464747376273'}), 'future': <Future pending>, 'active_send_mode': False}} \n [07:46:05] [Core] [INFO] [core.event_bus:50]: [weixin_official_account] oDWu-7TMRoAdFWCDnYr5vqggsGqQ/oDWu-7TMRoAdFWCDnYr5vqggsGqQ: 不要，我就要知道  \n [07:46:10] [Core] [INFO] [weixin_official_account.weixin_offacc_adapter:87]: 解析成功: TextMessage({'ToUserName': 'gh_f3d23b355dc7', 'FromUserName': 'oDWu-7TMRoAdFWCDnYr5vqggsGqQ', 'CreateTime': '1749195964', 'MsgType': 'text', 'Content': '不要，我就要知道', 'MsgId': '25042464747376273'}) \n [07:46:13] [Core] [ERRO] [respond.stage:194]: 发送消息失败: invalid state chain: [Plain(type='Plain', text='啧，你这脑回路多少沾点儿堵塞？', convert=True), Plain(type='Plain', text=' 我是AI，懂不懂？', convert=True), Plain(type='Plain', text=' 没啥好知道的，赶紧说正事儿！', convert=True)] \n [07:46:13] [Core] [INFO] [respond.stage:210]: AstrBot -> oDWu-7TMRoAdFWCDnYr5vqggsGqQ/oDWu-7TMRoAdFWCDnYr5vqggsGqQ: 啧，你这脑回路多少沾点儿堵塞？  我是AI，懂不懂？  没啥好知道的，赶紧说正事儿！  \n\n### 你愿意提交 PR 吗？\n\n- [ ] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Soulter",
        "body": "请问是什么消息平台？"
      },
      {
        "user": "justlovemaki",
        "body": "gemini"
      },
      {
        "user": "justlovemaki",
        "body": "微信公众号"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1806,
    "title": "[Bug]平台命令配置重启后失效",
    "author": "xu-wish",
    "state": "open",
    "created_at": "2025-06-14T01:02:44Z",
    "updated_at": "2025-06-14T01:02:44Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n有些插件在tg中使用会报错，我在插件管理 - 平台命令配置中，取消勾选tg平台的某个插件后保存，在重启astrbot后就复原成全部插件都启用，没办法保存。\n\n### 如何复现？\n\n设置后保存，重启Astrbot即可复现。\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\nAstrbot版本3.5.15\n部署方式uv\n\n### 操作系统\n\nLinux\n\n### 报错日志\n\n没有bug日志\n\n### 你愿意提交 PR 吗？\n\n- [ ] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1756,
    "title": "[Bug] dify服务提供商认证问题",
    "author": "cruldra",
    "state": "open",
    "created_at": "2025-06-06T18:45:34Z",
    "updated_at": "2025-06-13T04:04:02Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n![Image](https://github.com/user-attachments/assets/18bd7967-ce2f-4ad3-bcde-c693dc4fffac)上面这个配置会导致\n\n![Image](https://github.com/user-attachments/assets/6930fed9-ceaa-406d-bdf3-cb2a3ca7ed43)\n\n### 如何复现？\n\n直接使用我的配置\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\n![Image](https://github.com/user-attachments/assets/7f1362b5-3e63-4229-9f78-92bfce07f934)\n\nubuntu24.04\n\n自托管Dify\n\n### 操作系统\n\nWindows\n\n### 报错日志\n\n![Image](https://github.com/user-attachments/assets/0859e286-0353-4f45-b9d0-be253d52b41b)\n\n### 你愿意提交 PR 吗？\n\n- [x] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Shijiai",
        "body": "Same issue from my side."
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1794,
    "title": "[Feature]微信客服如何可以支持语音输入及输出",
    "author": "leonbadboy",
    "state": "closed",
    "created_at": "2025-06-12T03:50:34Z",
    "updated_at": "2025-06-12T15:02:51Z",
    "labels": [
      "enhancement"
    ],
    "body": "### 描述\n\n微信客服如何可以支持语音输入及输出，企业微信应用目前是已经支持的，微信客服何时也能满足？\n\n### 使用场景\n\n_No response_\n\n### 你愿意提交PR吗?\n\n- [x] 是的, 我愿意提交PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Soulter",
        "body": "您好，这个目前的版本还不支持微信客服收发语音，我会尽快支持一下"
      },
      {
        "user": "Soulter",
        "body": "已经支持。请等待 v3.5.16 或者升级到最新的 commit。"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1797,
    "title": "add AI/ML API as provider",
    "author": "OctavianTheI",
    "state": "open",
    "created_at": "2025-06-12T09:31:42Z",
    "updated_at": "2025-06-12T11:10:38Z",
    "labels": [],
    "body": "Hi!\n\nI'm Sergey from the Integrations team over at [AI/ML API](https://aimlapi.com/), a startup with 150K+ users, providing over 300 AI models in one place\n\nYour project looks dope, so we'd like a native integration. We already got integrations with Langflow, AutoGPT, and LiteLLM - so our integrations team is pretty seasoned :)\n\nSay you're interested, and we'll test the compatibility, update the code/docs to include us, create a PR and add a tutorial on using AstrBot with AI/ML API to our docs\n\nIf you guys give us a green light, we could get on it 👷",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1796,
    "title": "[Feature]希望在webui可以直接给某个对话设置模型和人格",
    "author": "faeky",
    "state": "open",
    "created_at": "2025-06-12T09:06:27Z",
    "updated_at": "2025-06-12T09:06:27Z",
    "labels": [
      "enhancement"
    ],
    "body": "### 描述\n\n在日常使用中，发现私聊的人格和模型不太好控制。\n希望能在webui里对话管理可以直接切换该对话的模型与人格。\n或者在后台给私聊的用户id绑定人格与模型。\n\n### 使用场景\n\n目前我的使用场景是\n默认人格：是通过MCP插件来控制Moviepilot来管理媒体库。\n聊天人格：正常聊天。\n因为加好友朋友当中有的是用来控制Moviepilot订阅电视剧。有的朋友是用来纯聊天。给开op自己权限切换也不合适。\n\n### 你愿意提交PR吗?\n\n- [x] 是的, 我愿意提交PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1795,
    "title": "[Bug]获取当前会话所有记忆时报错",
    "author": "NiceAir",
    "state": "open",
    "created_at": "2025-06-12T08:45:39Z",
    "updated_at": "2025-06-12T08:47:58Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n使用控制台中MCP提示的命令获取记忆时，输入**get_memories**命令报错: 无法解析\n\n\n### 如何复现？\n\n打开与机器人的对话框，输入 get_memories 或 /get_memories命令\n\n![Image](https://github.com/user-attachments/assets/817e48f9-d432-4f00-a3ea-492da3b2560f)\n\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\nV3.5.14   docker,  siliconflow, wegechatpadpro\n\n### 操作系统\n\nubuntu22.04\n\n### 报错日志\n\n![Image](https://github.com/user-attachments/assets/9d2c137a-8692-45c5-ab17-e071e0e9b5f4)\n\n### 你愿意提交 PR 吗？\n\n- [x] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1760,
    "title": "[Bug]qwen3无法调用,流失调用问题?",
    "author": "StevenNotch",
    "state": "closed",
    "created_at": "2025-06-07T05:29:49Z",
    "updated_at": "2025-06-12T06:11:44Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n![Image](https://github.com/user-attachments/assets/761cafe7-7f4c-49b4-88db-4ab6c889d037)\n\n![Image](https://github.com/user-attachments/assets/b6c730fa-a01e-4b78-a61c-ded518d19d5f)\n\n![Image](https://github.com/user-attachments/assets/3787a806-7fce-406f-9fd0-4375a925f0b5)\n\n### 如何复现？\n\n按图中调用QWEN3\n\n![Image](https://github.com/user-attachments/assets/b63b1c56-7ea6-43eb-8845-72ff4f500f32)\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\ndocker \n\n![Image](https://github.com/user-attachments/assets/81ab56f3-6353-40c8-b660-bce32a544a8e)\n\n### 操作系统\n\nWindows\n\n### 报错日志\n\n [13:26:56] [Core] [ERRO] [sources.openai_source:330]: 发生了错误。Provider 配置如下: {'id': 'qwen3', 'type': 'openai_chat_completion', 'enable': True, 'key': ['xxxxx'], 'api_base': 'https://dashscope.aliyuncs.com/compatible-mode/v1', 'timeout': 120, 'model_config': {'model': 'qwen3-235b-a22b'}, 'extra_body': {'enable_thinking': False}} \n\n [13:26:56] [Core] [WARN] [routes.config:217]: Provider qwen3 (ID: qwen3) is unavailable. Error: Error code: 400 - {'error': {'code': 'invalid_parameter_error', 'param': None, 'message': 'parameter.enable_thinking must be set to false for non-streaming calls', 'type': 'invalid_request_error'}, 'id': 'chatcmpl-f13dcee4-4243-9484-be2b-82544349e99c', 'request_id': 'f13dcee4-4243-9484-be2b-82544349e99c'} \n\n [13:26:56] [Core] [INFO] [routes.config:238]: Provider status check completed. Results: [{'id': 'qwen3', 'model': 'qwen3-235b-a22b', 'type': 'openai_chat_completion', 'name': 'qwen3', 'status': 'unavailable', 'error': \"Error code: 400 - {'error': {'code': 'invalid_parameter_error', 'param': None, 'message': 'parameter.enable_thinking must be set to false for non-streaming calls', 'type': 'invalid_request_error'}, 'id': 'chatcmpl-f13dcee4-4243-9484-be2b-82544349e99c', 'request_id': 'f13dcee4-4243-9484-be2b-82544349e99c'}\"}] \n\n### 你愿意提交 PR 吗？\n\n- [x] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "StevenNotch",
        "body": "![Image](https://github.com/user-attachments/assets/5bc24c59-9a5b-4174-b57a-d76dade92f92)"
      },
      {
        "user": "StevenNotch",
        "body": "如何开启流失输入\n"
      },
      {
        "user": "StevenNotch",
        "body": "测试有bug,实际能运行\n"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1793,
    "title": "[Bug]提供商会话隔离功能未成功实现",
    "author": "xxuanzQAQ",
    "state": "closed",
    "created_at": "2025-06-11T16:50:29Z",
    "updated_at": "2025-06-12T06:07:38Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n在已确认启用了提供商会话隔离功能后在切换了provider后的/model显示的模型列表依然是原provider的\n\n### 如何复现？\n\n1.启用网页控制台中的服务商会话隔离功能\n2.在群聊中使用/provider X切换服务商\n3.在上述群聊中使用/provider显示已切换，且其他群/provider依然是默认服务商（到目前为止正常）\n4.在上述群聊中使用/model试图查看切换后的服务商模型列表，但发现依然显然的是切换之前的服务商的模型列表\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\nAstrBot版本：3.5.15\n部署方式：Ubuntu手动部署\n平台适配器：QQ野机，NapCat\n\n### 操作系统\n\nLinux\n\n### 报错日志\n\n无报错\n\n### 你愿意提交 PR 吗？\n\n- [ ] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Soulter",
        "body": "已经修复"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1749,
    "title": "[Bug] 向 Faiss 集合 '知识库' 添加文档时发生异常: 向量维度不匹配, 期望: None, 实际: 768",
    "author": "Dragon617",
    "state": "open",
    "created_at": "2025-06-06T13:37:39Z",
    "updated_at": "2025-06-11T15:06:18Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n前期添加文档时正常，后面重启Astrbot后 再尝试添加文档 就出现 向 Faiss 集合 '知识库' 添加文档时发生异常: 向量维度不匹配, 期望: None, 实际: 768\n\n### 如何复现？\n\n前期添加文档时正常，后面重启Astrbot后 再尝试添加文档 就出现 向 Faiss 集合 '知识库' 添加文档时发生异常: 向量维度不匹配, 期望: None, 实际: 768\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\nv3.5.13 Windows启动器\n\n### 操作系统\n\nWindows\n\n### 报错日志\n\n前期添加文档时正常，后面重启Astrbot后 再尝试添加文档 就出现 向 Faiss 集合 '知识库' 添加文档时发生异常: 向量维度不匹配, 期望: None, 实际: 768 \n\n[21:24:45] [Core] [INFO] [vector_store.astrbot_faiss_store:206]: 向 Faiss 集合 '知识库' 添加 51 个文档，共分为 6 个批次进行处理。\nTraceback (most recent call last):\n  File \"E:\\AstrBotLauncher\\AstrBot\\data\\plugins\\astrbot_plugin_knowledge_base\\vector_store\\astrbot_faiss_store.py\", line 165, in _batch_process_task\n    id = await self.vecdbs[collection_name].insert(\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\AstrBotLauncher\\AstrBot\\astrbot\\core\\db\\vec_db\\faiss_impl\\vec_db.py\", line 52, in insert\n    await self.embedding_storage.insert(vector, int_id)\n  File \"E:\\AstrBotLauncher\\AstrBot\\astrbot\\core\\db\\vec_db\\faiss_impl\\embedding_storage.py\", line 33, in insert\n    raise ValueError(\nValueError: 向量维度不匹配, 期望: None, 实际: 768\n [21:24:45] [Core] [ERRO] [vector_store.astrbot_faiss_store:175]: 向 Faiss 集合 '知识库' 添加文档时发生异常: 向量维度不匹配, 期望: None, 实际: 768\nStack (most recent call last):\n  File \"E:\\AstrBotLauncher\\AstrBot\\main.py\", line 83, in <module>\n    asyncio.run(core_lifecycle.start())\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\runners.py\", line 190, in run\n    return runner.run(main)\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\runners.py\", line 118, in run\n    return self._loop.run_until_complete(task)\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\base_events.py\", line 641, in run_until_complete\n    self.run_forever()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\windows_events.py\", line 321, in run_forever\n    super().run_forever()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\base_events.py\", line 608, in run_forever\n    self._run_once()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\base_events.py\", line 1936, in _run_once\n    handle._run()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\events.py\", line 84, in _run\n    self._context.run(self._callback, *self._args)\n  File \"E:\\AstrBotLauncher\\AstrBot\\data\\plugins\\astrbot_plugin_knowledge_base\\vector_store\\astrbot_faiss_store.py\", line 175, in _batch_process_task\n    logger.error(\nTraceback (most recent call last):\n  File \"E:\\AstrBotLauncher\\AstrBot\\data\\plugins\\astrbot_plugin_knowledge_base\\vector_store\\astrbot_faiss_store.py\", line 165, in _batch_process_task\n    id = await self.vecdbs[collection_name].insert(\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\AstrBotLauncher\\AstrBot\\astrbot\\core\\db\\vec_db\\faiss_impl\\vec_db.py\", line 52, in insert\n    await self.embedding_storage.insert(vector, int_id)\n  File \"E:\\AstrBotLauncher\\AstrBot\\astrbot\\core\\db\\vec_db\\faiss_impl\\embedding_storage.py\", line 33, in insert\n    raise ValueError(\nValueError: 向量维度不匹配, 期望: None, 实际: 768\n [21:24:45] [Core] [ERRO] [vector_store.astrbot_faiss_store:175]: 向 Faiss 集合 '知识库' 添加文档时发生异常: 向量维度不匹配, 期望: None, 实际: 768\nStack (most recent call last):\n  File \"E:\\AstrBotLauncher\\AstrBot\\main.py\", line 83, in <module>\n    asyncio.run(core_lifecycle.start())\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\runners.py\", line 190, in run\n    return runner.run(main)\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\runners.py\", line 118, in run\n    return self._loop.run_until_complete(task)\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\base_events.py\", line 641, in run_until_complete\n    self.run_forever()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\windows_events.py\", line 321, in run_forever\n    super().run_forever()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\base_events.py\", line 608, in run_forever\n    self._run_once()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\base_events.py\", line 1936, in _run_once\n    handle._run()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\events.py\", line 84, in _run\n    self._context.run(self._callback, *self._args)\n  File \"E:\\AstrBotLauncher\\AstrBot\\data\\plugins\\astrbot_plugin_knowledge_base\\vector_store\\astrbot_faiss_store.py\", line 175, in _batch_process_task\n    logger.error(\nTraceback (most recent call last):\n  File \"E:\\AstrBotLauncher\\AstrBot\\data\\plugins\\astrbot_plugin_knowledge_base\\vector_store\\astrbot_faiss_store.py\", line 165, in _batch_process_task\n    id = await self.vecdbs[collection_name].insert(\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\AstrBotLauncher\\AstrBot\\astrbot\\core\\db\\vec_db\\faiss_impl\\vec_db.py\", line 52, in insert\n    await self.embedding_storage.insert(vector, int_id)\n  File \"E:\\AstrBotLauncher\\AstrBot\\astrbot\\core\\db\\vec_db\\faiss_impl\\embedding_storage.py\", line 33, in insert\n    raise ValueError(\nValueError: 向量维度不匹配, 期望: None, 实际: 768\n [21:24:45] [Core] [ERRO] [vector_store.astrbot_faiss_store:175]: 向 Faiss 集合 '知识库' 添加文档时发生异常: 向量维度不匹配, 期望: None, 实际: 768\nStack (most recent call last):\n  File \"E:\\AstrBotLauncher\\AstrBot\\main.py\", line 83, in <module>\n    asyncio.run(core_lifecycle.start())\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\runners.py\", line 190, in run\n    return runner.run(main)\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\runners.py\", line 118, in run\n    return self._loop.run_until_complete(task)\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\base_events.py\", line 641, in run_until_complete\n    self.run_forever()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\windows_events.py\", line 321, in run_forever\n    super().run_forever()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\base_events.py\", line 608, in run_forever\n    self._run_once()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\base_events.py\", line 1936, in _run_once\n    handle._run()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\events.py\", line 84, in _run\n    self._context.run(self._callback, *self._args)\n  File \"E:\\AstrBotLauncher\\AstrBot\\data\\plugins\\astrbot_plugin_knowledge_base\\vector_store\\astrbot_faiss_store.py\", line 175, in _batch_process_task\n    logger.error(\nTraceback (most recent call last):\n  File \"E:\\AstrBotLauncher\\AstrBot\\data\\plugins\\astrbot_plugin_knowledge_base\\vector_store\\astrbot_faiss_store.py\", line 165, in _batch_process_task\n    id = await self.vecdbs[collection_name].insert(\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\AstrBotLauncher\\AstrBot\\astrbot\\core\\db\\vec_db\\faiss_impl\\vec_db.py\", line 52, in insert\n    await self.embedding_storage.insert(vector, int_id)\n  File \"E:\\AstrBotLauncher\\AstrBot\\astrbot\\core\\db\\vec_db\\faiss_impl\\embedding_storage.py\", line 33, in insert\n    raise ValueError(\nValueError: 向量维度不匹配, 期望: None, 实际: 768\n [21:24:45] [Core] [ERRO] [vector_store.astrbot_faiss_store:175]: 向 Faiss 集合 '知识库' 添加文档时发生异常: 向量维度不匹配, 期望: None, 实际: 768\nStack (most recent call last):\n  File \"E:\\AstrBotLauncher\\AstrBot\\main.py\", line 83, in <module>\n    asyncio.run(core_lifecycle.start())\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\runners.py\", line 190, in run\n    return runner.run(main)\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\runners.py\", line 118, in run\n    return self._loop.run_until_complete(task)\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\base_events.py\", line 641, in run_until_complete\n    self.run_forever()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\windows_events.py\", line 321, in run_forever\n    super().run_forever()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\base_events.py\", line 608, in run_forever\n    self._run_once()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\base_events.py\", line 1936, in _run_once\n    handle._run()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\events.py\", line 84, in _run\n    self._context.run(self._callback, *self._args)\n  File \"E:\\AstrBotLauncher\\AstrBot\\data\\plugins\\astrbot_plugin_knowledge_base\\vector_store\\astrbot_faiss_store.py\", line 175, in _batch_process_task\n    logger.error(\nTraceback (most recent call last):\n  File \"E:\\AstrBotLauncher\\AstrBot\\data\\plugins\\astrbot_plugin_knowledge_base\\vector_store\\astrbot_faiss_store.py\", line 165, in _batch_process_task\n    id = await self.vecdbs[collection_name].insert(\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\AstrBotLauncher\\AstrBot\\astrbot\\core\\db\\vec_db\\faiss_impl\\vec_db.py\", line 52, in insert\n    await self.embedding_storage.insert(vector, int_id)\n  File \"E:\\AstrBotLauncher\\AstrBot\\astrbot\\core\\db\\vec_db\\faiss_impl\\embedding_storage.py\", line 33, in insert\n    raise ValueError(\nValueError: 向量维度不匹配, 期望: None, 实际: 768\n [21:24:45] [Core] [ERRO] [vector_store.astrbot_faiss_store:175]: 向 Faiss 集合 '知识库' 添加文档时发生异常: 向量维度不匹配, 期望: None, 实际: 768\nStack (most recent call last):\n  File \"E:\\AstrBotLauncher\\AstrBot\\main.py\", line 83, in <module>\n    asyncio.run(core_lifecycle.start())\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\runners.py\", line 190, in run\n    return runner.run(main)\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\runners.py\", line 118, in run\n    return self._loop.run_until_complete(task)\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\base_events.py\", line 641, in run_until_complete\n    self.run_forever()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\windows_events.py\", line 321, in run_forever\n    super().run_forever()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\base_events.py\", line 608, in run_forever\n    self._run_once()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\base_events.py\", line 1936, in _run_once\n    handle._run()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\events.py\", line 84, in _run\n    self._context.run(self._callback, *self._args)\n  File \"E:\\AstrBotLauncher\\AstrBot\\data\\plugins\\astrbot_plugin_knowledge_base\\vector_store\\astrbot_faiss_store.py\", line 175, in _batch_process_task\n    logger.error(\nTraceback (most recent call last):\n  File \"E:\\AstrBotLauncher\\AstrBot\\data\\plugins\\astrbot_plugin_knowledge_base\\vector_store\\astrbot_faiss_store.py\", line 165, in _batch_process_task\n    id = await self.vecdbs[collection_name].insert(\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\AstrBotLauncher\\AstrBot\\astrbot\\core\\db\\vec_db\\faiss_impl\\vec_db.py\", line 52, in insert\n    await self.embedding_storage.insert(vector, int_id)\n  File \"E:\\AstrBotLauncher\\AstrBot\\astrbot\\core\\db\\vec_db\\faiss_impl\\embedding_storage.py\", line 33, in insert\n    raise ValueError(\nValueError: 向量维度不匹配, 期望: None, 实际: 768\n [21:24:45] [Core] [ERRO] [vector_store.astrbot_faiss_store:175]: 向 Faiss 集合 '知识库' 添加文档时发生异常: 向量维度不匹配, 期望: None, 实际: 768\nStack (most recent call last):\n  File \"E:\\AstrBotLauncher\\AstrBot\\main.py\", line 83, in <module>\n    asyncio.run(core_lifecycle.start())\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\runners.py\", line 190, in run\n    return runner.run(main)\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\runners.py\", line 118, in run\n    return self._loop.run_until_complete(task)\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\base_events.py\", line 641, in run_until_complete\n    self.run_forever()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\windows_events.py\", line 321, in run_forever\n    super().run_forever()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\base_events.py\", line 608, in run_forever\n    self._run_once()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\base_events.py\", line 1936, in _run_once\n    handle._run()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\events.py\", line 84, in _run\n    self._context.run(self._callback, *self._args)\n  File \"E:\\AstrBotLauncher\\AstrBot\\data\\plugins\\astrbot_plugin_knowledge_base\\vector_store\\astrbot_faiss_store.py\", line 175, in _batch_process_task\n    logger.error(\nTraceback (most recent call last):\n  File \"E:\\AstrBotLauncher\\AstrBot\\data\\plugins\\astrbot_plugin_knowledge_base\\vector_store\\astrbot_faiss_store.py\", line 165, in _batch_process_task\n    id = await self.vecdbs[collection_name].insert(\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\AstrBotLauncher\\AstrBot\\astrbot\\core\\db\\vec_db\\faiss_impl\\vec_db.py\", line 52, in insert\n    await self.embedding_storage.insert(vector, int_id)\n  File \"E:\\AstrBotLauncher\\AstrBot\\astrbot\\core\\db\\vec_db\\faiss_impl\\embedding_storage.py\", line 33, in insert\n    raise ValueError(\nValueError: 向量维度不匹配, 期望: None, 实际: 768\n [21:24:46] [Core] [ERRO] [vector_store.astrbot_faiss_store:175]: 向 Faiss 集合 '知识库' 添加文档时发生异常: 向量维度不匹配, 期望: None, 实际: 768\nStack (most recent call last):\n  File \"E:\\AstrBotLauncher\\AstrBot\\main.py\", line 83, in <module>\n    asyncio.run(core_lifecycle.start())\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\runners.py\", line 190, in run\n    return runner.run(main)\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\runners.py\", line 118, in run\n    return self._loop.run_until_complete(task)\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\base_events.py\", line 641, in run_until_complete\n    self.run_forever()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\windows_events.py\", line 321, in run_forever\n    super().run_forever()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\base_events.py\", line 608, in run_forever\n    self._run_once()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\base_events.py\", line 1936, in _run_once\n    handle._run()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\events.py\", line 84, in _run\n    self._context.run(self._callback, *self._args)\n  File \"E:\\AstrBotLauncher\\AstrBot\\data\\plugins\\astrbot_plugin_knowledge_base\\vector_store\\astrbot_faiss_store.py\", line 175, in _batch_process_task\n    logger.error(\nTraceback (most recent call last):\n  File \"E:\\AstrBotLauncher\\AstrBot\\data\\plugins\\astrbot_plugin_knowledge_base\\vector_store\\astrbot_faiss_store.py\", line 165, in _batch_process_task\n    id = await self.vecdbs[collection_name].insert(\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\AstrBotLauncher\\AstrBot\\astrbot\\core\\db\\vec_db\\faiss_impl\\vec_db.py\", line 52, in insert\n    await self.embedding_storage.insert(vector, int_id)\n  File \"E:\\AstrBotLauncher\\AstrBot\\astrbot\\core\\db\\vec_db\\faiss_impl\\embedding_storage.py\", line 33, in insert\n    raise ValueError(\nValueError: 向量维度不匹配, 期望: None, 实际: 768\n [21:24:46] [Core] [ERRO] [vector_store.astrbot_faiss_store:175]: 向 Faiss 集合 '知识库' 添加文档时发生异常: 向量维度不匹配, 期望: None, 实际: 768\nStack (most recent call last):\n  File \"E:\\AstrBotLauncher\\AstrBot\\main.py\", line 83, in <module>\n    asyncio.run(core_lifecycle.start())\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\runners.py\", line 190, in run\n    return runner.run(main)\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\runners.py\", line 118, in run\n    return self._loop.run_until_complete(task)\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\base_events.py\", line 641, in run_until_complete\n    self.run_forever()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\windows_events.py\", line 321, in run_forever\n    super().run_forever()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\base_events.py\", line 608, in run_forever\n    self._run_once()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\base_events.py\", line 1936, in _run_once\n    handle._run()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\events.py\", line 84, in _run\n    self._context.run(self._callback, *self._args)\n  File \"E:\\AstrBotLauncher\\AstrBot\\data\\plugins\\astrbot_plugin_knowledge_base\\vector_store\\astrbot_faiss_store.py\", line 175, in _batch_process_task\n    logger.error(\nTraceback (most recent call last):\n  File \"E:\\AstrBotLauncher\\AstrBot\\data\\plugins\\astrbot_plugin_knowledge_base\\vector_store\\astrbot_faiss_store.py\", line 165, in _batch_process_task\n    id = await self.vecdbs[collection_name].insert(\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\AstrBotLauncher\\AstrBot\\astrbot\\core\\db\\vec_db\\faiss_impl\\vec_db.py\", line 52, in insert\n    await self.embedding_storage.insert(vector, int_id)\n  File \"E:\\AstrBotLauncher\\AstrBot\\astrbot\\core\\db\\vec_db\\faiss_impl\\embedding_storage.py\", line 33, in insert\n    raise ValueError(\nValueError: 向量维度不匹配, 期望: None, 实际: 768\n [21:24:46] [Core] [ERRO] [vector_store.astrbot_faiss_store:175]: 向 Faiss 集合 '知识库' 添加文档时发生异常: 向量维度不匹配, 期望: None, 实际: 768\nStack (most recent call last):\n  File \"E:\\AstrBotLauncher\\AstrBot\\main.py\", line 83, in <module>\n    asyncio.run(core_lifecycle.start())\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\runners.py\", line 190, in run\n    return runner.run(main)\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\runners.py\", line 118, in run\n    return self._loop.run_until_complete(task)\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\base_events.py\", line 641, in run_until_complete\n    self.run_forever()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\windows_events.py\", line 321, in run_forever\n    super().run_forever()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\base_events.py\", line 608, in run_forever\n    self._run_once()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\base_events.py\", line 1936, in _run_once\n    handle._run()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\events.py\", line 84, in _run\n    self._context.run(self._callback, *self._args)\n  File \"E:\\AstrBotLauncher\\AstrBot\\data\\plugins\\astrbot_plugin_knowledge_base\\vector_store\\astrbot_faiss_store.py\", line 175, in _batch_process_task\n    logger.error(\nTraceback (most recent call last):\n  File \"E:\\AstrBotLauncher\\AstrBot\\data\\plugins\\astrbot_plugin_knowledge_base\\vector_store\\astrbot_faiss_store.py\", line 165, in _batch_process_task\n    id = await self.vecdbs[collection_name].insert(\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\AstrBotLauncher\\AstrBot\\astrbot\\core\\db\\vec_db\\faiss_impl\\vec_db.py\", line 52, in insert\n    await self.embedding_storage.insert(vector, int_id)\n  File \"E:\\AstrBotLauncher\\AstrBot\\astrbot\\core\\db\\vec_db\\faiss_impl\\embedding_storage.py\", line 33, in insert\n    raise ValueError(\nValueError: 向量维度不匹配, 期望: None, 实际: 768\n [21:24:46] [Core] [ERRO] [vector_store.astrbot_faiss_store:175]: 向 Faiss 集合 '知识库' 添加文档时发生异常: 向量维度不匹配, 期望: None, 实际: 768\nStack (most recent call last):\n  File \"E:\\AstrBotLauncher\\AstrBot\\main.py\", line 83, in <module>\n    asyncio.run(core_lifecycle.start())\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\runners.py\", line 190, in run\n    return runner.run(main)\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\runners.py\", line 118, in run\n    return self._loop.run_until_complete(task)\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\base_events.py\", line 641, in run_until_complete\n    self.run_forever()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\windows_events.py\", line 321, in run_forever\n    super().run_forever()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\base_events.py\", line 608, in run_forever\n    self._run_once()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\base_events.py\", line 1936, in _run_once\n    handle._run()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\events.py\", line 84, in _run\n    self._context.run(self._callback, *self._args)\n  File \"E:\\AstrBotLauncher\\AstrBot\\data\\plugins\\astrbot_plugin_knowledge_base\\vector_store\\astrbot_faiss_store.py\", line 175, in _batch_process_task\n    logger.error(\nTraceback (most recent call last):\n  File \"E:\\AstrBotLauncher\\AstrBot\\data\\plugins\\astrbot_plugin_knowledge_base\\vector_store\\astrbot_faiss_store.py\", line 165, in _batch_process_task\n    id = await self.vecdbs[collection_name].insert(\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\AstrBotLauncher\\AstrBot\\astrbot\\core\\db\\vec_db\\faiss_impl\\vec_db.py\", line 52, in insert\n    await self.embedding_storage.insert(vector, int_id)\n  File \"E:\\AstrBotLauncher\\AstrBot\\astrbot\\core\\db\\vec_db\\faiss_impl\\embedding_storage.py\", line 33, in insert\n    raise ValueError(\nValueError: 向量维度不匹配, 期望: None, 实际: 768\n [21:24:47] [Core] [ERRO] [vector_store.astrbot_faiss_store:175]: 向 Faiss 集合 '知识库' 添加文档时发生异常: 向量维度不匹配, 期望: None, 实际: 768\nStack (most recent call last):\n  File \"E:\\AstrBotLauncher\\AstrBot\\main.py\", line 83, in <module>\n    asyncio.run(core_lifecycle.start())\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\runners.py\", line 190, in run\n    return runner.run(main)\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\runners.py\", line 118, in run\n    return self._loop.run_until_complete(task)\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\base_events.py\", line 641, in run_until_complete\n    self.run_forever()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\windows_events.py\", line 321, in run_forever\n    super().run_forever()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\base_events.py\", line 608, in run_forever\n    self._run_once()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\base_events.py\", line 1936, in _run_once\n    handle._run()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\events.py\", line 84, in _run\n    self._context.run(self._callback, *self._args)\n  File \"E:\\AstrBotLauncher\\AstrBot\\data\\plugins\\astrbot_plugin_knowledge_base\\vector_store\\astrbot_faiss_store.py\", line 175, in _batch_process_task\n    logger.error(\nTraceback (most recent call last):\n  File \"E:\\AstrBotLauncher\\AstrBot\\data\\plugins\\astrbot_plugin_knowledge_base\\vector_store\\astrbot_faiss_store.py\", line 165, in _batch_process_task\n    id = await self.vecdbs[collection_name].insert(\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\AstrBotLauncher\\AstrBot\\astrbot\\core\\db\\vec_db\\faiss_impl\\vec_db.py\", line 52, in insert\n    await self.embedding_storage.insert(vector, int_id)\n  File \"E:\\AstrBotLauncher\\AstrBot\\astrbot\\core\\db\\vec_db\\faiss_impl\\embedding_storage.py\", line 33, in insert\n    raise ValueError(\nValueError: 向量维度不匹配, 期望: None, 实际: 768\n [21:24:47] [Core] [ERRO] [vector_store.astrbot_faiss_store:175]: 向 Faiss 集合 '知识库' 添加文档时发生异常: 向量维度不匹配, 期望: None, 实际: 768\nStack (most recent call last):\n  File \"E:\\AstrBotLauncher\\AstrBot\\main.py\", line 83, in <module>\n    asyncio.run(core_lifecycle.start())\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\runners.py\", line 190, in run\n    return runner.run(main)\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\runners.py\", line 118, in run\n    return self._loop.run_until_complete(task)\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\base_events.py\", line 641, in run_until_complete\n    self.run_forever()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\windows_events.py\", line 321, in run_forever\n    super().run_forever()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\base_events.py\", line 608, in run_forever\n    self._run_once()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\base_events.py\", line 1936, in _run_once\n    handle._run()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\events.py\", line 84, in _run\n    self._context.run(self._callback, *self._args)\n  File \"E:\\AstrBotLauncher\\AstrBot\\data\\plugins\\astrbot_plugin_knowledge_base\\vector_store\\astrbot_faiss_store.py\", line 175, in _batch_process_task\n    logger.error(\nTraceback (most recent call last):\n  File \"E:\\AstrBotLauncher\\AstrBot\\data\\plugins\\astrbot_plugin_knowledge_base\\vector_store\\astrbot_faiss_store.py\", line 165, in _batch_process_task\n    id = await self.vecdbs[collection_name].insert(\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\AstrBotLauncher\\AstrBot\\astrbot\\core\\db\\vec_db\\faiss_impl\\vec_db.py\", line 52, in insert\n    await self.embedding_storage.insert(vector, int_id)\n  File \"E:\\AstrBotLauncher\\AstrBot\\astrbot\\core\\db\\vec_db\\faiss_impl\\embedding_storage.py\", line 33, in insert\n    raise ValueError(\nValueError: 向量维度不匹配, 期望: None, 实际: 768\n [21:24:47] [Core] [ERRO] [vector_store.astrbot_faiss_store:175]: 向 Faiss 集合 '知识库' 添加文档时发生异常: 向量维度不匹配, 期望: None, 实际: 768\nStack (most recent call last):\n  File \"E:\\AstrBotLauncher\\AstrBot\\main.py\", line 83, in <module>\n    asyncio.run(core_lifecycle.start())\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\runners.py\", line 190, in run\n    return runner.run(main)\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\runners.py\", line 118, in run\n    return self._loop.run_until_complete(task)\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\base_events.py\", line 641, in run_until_complete\n    self.run_forever()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\windows_events.py\", line 321, in run_forever\n    super().run_forever()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\base_events.py\", line 608, in run_forever\n    self._run_once()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\base_events.py\", line 1936, in _run_once\n    handle._run()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\events.py\", line 84, in _run\n    self._context.run(self._callback, *self._args)\n  File \"E:\\AstrBotLauncher\\AstrBot\\data\\plugins\\astrbot_plugin_knowledge_base\\vector_store\\astrbot_faiss_store.py\", line 175, in _batch_process_task\n    logger.error(\n [21:24:47] [Core] [ERRO] [vector_store.astrbot_faiss_store:182]: 批次添加失败，文档 微单镜头入门 ·索尼E卡口篇 \\_ 2024版 .... 将被丢弃。\nTraceback (most recent call last):\n  File \"E:\\AstrBotLauncher\\AstrBot\\data\\plugins\\astrbot_plugin_knowledge_base\\vector_store\\astrbot_faiss_store.py\", line 165, in _batch_process_task\n    id = await self.vecdbs[collection_name].insert(\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\AstrBotLauncher\\AstrBot\\astrbot\\core\\db\\vec_db\\faiss_impl\\vec_db.py\", line 52, in insert\n    await self.embedding_storage.insert(vector, int_id)\n  File \"E:\\AstrBotLauncher\\AstrBot\\astrbot\\core\\db\\vec_db\\faiss_impl\\embedding_storage.py\", line 33, in insert\n    raise ValueError(\nValueError: 向量维度不匹配, 期望: None, 实际: 768\n [21:24:47] [Core] [ERRO] [vector_store.astrbot_faiss_store:175]: 向 Faiss 集合 '知识库' 添加文档时发生异常: 向量维度不匹配, 期望: None, 实际: 768\nStack (most recent call last):\n  File \"E:\\AstrBotLauncher\\AstrBot\\main.py\", line 83, in <module>\n    asyncio.run(core_lifecycle.start())\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\runners.py\", line 190, in run\n    return runner.run(main)\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\runners.py\", line 118, in run\n    return self._loop.run_until_complete(task)\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\base_events.py\", line 641, in run_until_complete\n    self.run_forever()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\windows_events.py\", line 321, in run_forever\n    super().run_forever()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\base_events.py\", line 608, in run_forever\n    self._run_once()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\base_events.py\", line 1936, in _run_once\n    handle._run()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\events.py\", line 84, in _run\n    self._context.run(self._callback, *self._args)\n  File \"E:\\AstrBotLauncher\\AstrBot\\data\\plugins\\astrbot_plugin_knowledge_base\\vector_store\\astrbot_faiss_store.py\", line 175, in _batch_process_task\n    logger.error(\n [21:24:47] [Core] [ERRO] [vector_store.astrbot_faiss_store:182]: 批次添加失败，文档 结束！... 将被丢弃。\nTraceback (most recent call last):\n  File \"E:\\AstrBotLauncher\\AstrBot\\data\\plugins\\astrbot_plugin_knowledge_base\\vector_store\\astrbot_faiss_store.py\", line 165, in _batch_process_task\n    id = await self.vecdbs[collection_name].insert(\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\AstrBotLauncher\\AstrBot\\astrbot\\core\\db\\vec_db\\faiss_impl\\vec_db.py\", line 52, in insert\n    await self.embedding_storage.insert(vector, int_id)\n  File \"E:\\AstrBotLauncher\\AstrBot\\astrbot\\core\\db\\vec_db\\faiss_impl\\embedding_storage.py\", line 33, in insert\n    raise ValueError(\nValueError: 向量维度不匹配, 期望: None, 实际: 768\n [21:24:47] [Core] [ERRO] [vector_store.astrbot_faiss_store:175]: 向 Faiss 集合 '知识库' 添加文档时发生异常: 向量维度不匹配, 期望: None, 实际: 768\nStack (most recent call last):\n  File \"E:\\AstrBotLauncher\\AstrBot\\main.py\", line 83, in <module>\n    asyncio.run(core_lifecycle.start())\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\runners.py\", line 190, in run\n    return runner.run(main)\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\runners.py\", line 118, in run\n    return self._loop.run_until_complete(task)\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\base_events.py\", line 641, in run_until_complete\n    self.run_forever()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\windows_events.py\", line 321, in run_forever\n    super().run_forever()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\base_events.py\", line 608, in run_forever\n    self._run_once()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\base_events.py\", line 1936, in _run_once\n    handle._run()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\events.py\", line 84, in _run\n    self._context.run(self._callback, *self._args)\n  File \"E:\\AstrBotLauncher\\AstrBot\\data\\plugins\\astrbot_plugin_knowledge_base\\vector_store\\astrbot_faiss_store.py\", line 175, in _batch_process_task\n    logger.error(\n [21:24:47] [Core] [ERRO] [vector_store.astrbot_faiss_store:182]: 批次添加失败，文档 头还具有F1.4的大光圈、小巧的体积、合理的价格、不错的光学素质，是E卡口标准定焦中的热门产品。* 如遇缺货，也可以考虑索尼 E 35mm 1.8（想要原厂）或唯卓仕AF 33mm F1.4 E（... 将被丢弃。\nTraceback (most recent call last):\n  File \"E:\\AstrBotLauncher\\AstrBot\\data\\plugins\\astrbot_plugin_knowledge_base\\vector_store\\astrbot_faiss_store.py\", line 165, in _batch_process_task\n    id = await self.vecdbs[collection_name].insert(\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\AstrBotLauncher\\AstrBot\\astrbot\\core\\db\\vec_db\\faiss_impl\\vec_db.py\", line 52, in insert\n    await self.embedding_storage.insert(vector, int_id)\n  File \"E:\\AstrBotLauncher\\AstrBot\\astrbot\\core\\db\\vec_db\\faiss_impl\\embedding_storage.py\", line 33, in insert\n    raise ValueError(\nValueError: 向量维度不匹配, 期望: None, 实际: 768\n [21:24:47] [Core] [ERRO] [vector_store.astrbot_faiss_store:175]: 向 Faiss 集合 '知识库' 添加文档时发生异常: 向量维度不匹配, 期望: None, 实际: 768\nStack (most recent call last):\n  File \"E:\\AstrBotLauncher\\AstrBot\\main.py\", line 83, in <module>\n    asyncio.run(core_lifecycle.start())\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\runners.py\", line 190, in run\n    return runner.run(main)\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\runners.py\", line 118, in run\n    return self._loop.run_until_complete(task)\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\base_events.py\", line 641, in run_until_complete\n    self.run_forever()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\windows_events.py\", line 321, in run_forever\n    super().run_forever()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\base_events.py\", line 608, in run_forever\n    self._run_once()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\base_events.py\", line 1936, in _run_once\n    handle._run()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\events.py\", line 84, in _run\n    self._context.run(self._callback, *self._args)\n  File \"E:\\AstrBotLauncher\\AstrBot\\data\\plugins\\astrbot_plugin_knowledge_base\\vector_store\\astrbot_faiss_store.py\", line 175, in _batch_process_task\n    logger.error(\n [21:24:47] [Core] [ERRO] [vector_store.astrbot_faiss_store:182]: 批次添加失败，文档 市面上最便宜的E卡口超广变焦。从它F2.8的大光圈和较为优秀的画质表现来看，可以说是物有所值的。**超值之选：适马 Art 14-24mm F2.8 DG DN。**这款镜头是“物廉价美”的极致体... 将被丢弃。\nTraceback (most recent call last):\n  File \"E:\\AstrBotLauncher\\AstrBot\\data\\plugins\\astrbot_plugin_knowledge_base\\vector_store\\astrbot_faiss_store.py\", line 165, in _batch_process_task\n    id = await self.vecdbs[collection_name].insert(\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\AstrBotLauncher\\AstrBot\\astrbot\\core\\db\\vec_db\\faiss_impl\\vec_db.py\", line 52, in insert\n    await self.embedding_storage.insert(vector, int_id)\n  File \"E:\\AstrBotLauncher\\AstrBot\\astrbot\\core\\db\\vec_db\\faiss_impl\\embedding_storage.py\", line 33, in insert\n    raise ValueError(\nValueError: 向量维度不匹配, 期望: None, 实际: 768\n [21:24:48] [Core] [ERRO] [vector_store.astrbot_faiss_store:175]: 向 Faiss 集合 '知识库' 添加文档时发生异常: 向量维度不匹配, 期望: None, 实际: 768\nStack (most recent call last):\n  File \"E:\\AstrBotLauncher\\AstrBot\\main.py\", line 83, in <module>\n    asyncio.run(core_lifecycle.start())\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\runners.py\", line 190, in run\n    return runner.run(main)\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\runners.py\", line 118, in run\n    return self._loop.run_until_complete(task)\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\base_events.py\", line 641, in run_until_complete\n    self.run_forever()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\windows_events.py\", line 321, in run_forever\n    super().run_forever()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\base_events.py\", line 608, in run_forever\n    self._run_once()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\base_events.py\", line 1936, in _run_once\n    handle._run()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\events.py\", line 84, in _run\n    self._context.run(self._callback, *self._args)\n  File \"E:\\AstrBotLauncher\\AstrBot\\data\\plugins\\astrbot_plugin_knowledge_base\\vector_store\\astrbot_faiss_store.py\", line 175, in _batch_process_task\n    logger.error(\n [21:24:48] [Core] [ERRO] [vector_store.astrbot_faiss_store:182]: 批次添加失败，文档 头不仅减小了体积重量，也提升了光学素质和对焦能力，升级明显，适合高像素机身用户和高预算用户考虑。#### 2. 外出旅行的大变焦镜头大变焦镜头具有宽泛的焦距范围，能够适应多样的场景变化，适用面... 将被丢弃。\nTraceback (most recent call last):\n  File \"E:\\AstrBotLauncher\\AstrBot\\data\\plugins\\astrbot_plugin_knowledge_base\\vector_store\\astrbot_faiss_store.py\", line 165, in _batch_process_task\n    id = await self.vecdbs[collection_name].insert(\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"E:\\AstrBotLauncher\\AstrBot\\astrbot\\core\\db\\vec_db\\faiss_impl\\vec_db.py\", line 52, in insert\n    await self.embedding_storage.insert(vector, int_id)\n  File \"E:\\AstrBotLauncher\\AstrBot\\astrbot\\core\\db\\vec_db\\faiss_impl\\embedding_storage.py\", line 33, in insert\n    raise ValueError(\nValueError: 向量维度不匹配, 期望: None, 实际: 768\n [21:24:48] [Core] [ERRO] [vector_store.astrbot_faiss_store:175]: 向 Faiss 集合 '知识库' 添加文档时发生异常: 向量维度不匹配, 期望: None, 实际: 768\nStack (most recent call last):\n  File \"E:\\AstrBotLauncher\\AstrBot\\main.py\", line 83, in <module>\n    asyncio.run(core_lifecycle.start())\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\runners.py\", line 190, in run\n    return runner.run(main)\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\runners.py\", line 118, in run\n    return self._loop.run_until_complete(task)\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\base_events.py\", line 641, in run_until_complete\n    self.run_forever()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\windows_events.py\", line 321, in run_forever\n    super().run_forever()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\base_events.py\", line 608, in run_forever\n    self._run_once()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\base_events.py\", line 1936, in _run_once\n    handle._run()\n  File \"C:\\Users\\LRL\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\events.py\", line 84, in _run\n    self._context.run(self._callback, *self._args)\n  File \"E:\\AstrBotLauncher\\AstrBot\\data\\plugins\\astrbot_plugin_knowledge_base\\vector_store\\astrbot_faiss_store.py\", line 175, in _batch_process_task\n    logger.error(\n [21:24:48] [Core] [ERRO] [vector_store.astrbot_faiss_store:182]: 批次添加失败，文档 ![860962fdd1a305036d1c86fb9420bdc7141c2243](data:image/webp;base64...)截图自索尼官网... 将被丢弃。\n [21:24:49] [Core] [INFO] [vector_store.astrbot_faiss_store:221]: 向 Faiss 集合 '知识库' 完成添加操作。总共处理了 51 个原始文档，成功添加 0 个文档。\n [21:24:49] [Core] [INFO] [vector_store.astrbot_faiss_store:224]: 其中 6 个批次因重试失败被丢弃。\n [21:24:49] [Core] [ERRO] [astrbot_plugin_knowledge_base.web_api:210]: 添加文档失败: 添加文档失败: 添加文档失败，返回的文档 ID 为空。\n[2025-06-06 21:24:49 +0800] [12856] [INFO] 127.0.0.1:63069 POST /api/plug/alkaid/kb/collection/add_file 1.1 200 214 4034012\n[2025-06-06 21:24:56 +0800] [12856] [INFO] 127.0.0.1:64414 GET /assets/AboutPage-760b6010.js 1.1 200 4510 5702\n[2025-06-06 21:24:56 +0800] [12856] [INFO] 127.0.0.1:64415 GET /assets/AboutPage-0e283887.css 1.1 200 2116 3633\n[2025-06-06 21:24:56 +0800] [12856] [INFO] 127.0.0.1:64415 GET /assets/logo-waifu-ff5ae5c4.png 1.1 200 55188 7068\n [21:25:24] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:370]: WebSocket 连接空闲超过 60 s\n [21:25:24] [Core] [INFO] [wechatpadpro.wechatpadpro_adapter:355]: WebSocket 连接成功。\n\n### 你愿意提交 PR 吗？\n\n- [ ] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Soulter",
        "body": "可以重建知识库试试"
      },
      {
        "user": "Magstic",
        "body": "我透过配置『服务提供商』-『向量模型』的『嵌入维度』一值解决了这个问题。\n\n这是报错讯息：\n```\n [22:35:00] [Plug] [ERRO] [vector_store.astrbot_faiss_store:392]: 向 Faiss 集合 'time' 添加文档时发生异常: 向量维度不匹配, 期望: 1536, 实际: 1024 \n```\n我检查了自己的嵌入维度，发现是值为 `1536`，修改为 `1024` 後，问题解决。\n\n希望这能有所帮助。"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1139,
    "title": "[Feature] 建议识别分段消息，一起回复",
    "author": "hbxggz",
    "state": "closed",
    "created_at": "2025-04-04T07:23:07Z",
    "updated_at": "2025-06-11T15:02:17Z",
    "labels": [
      "enhancement"
    ],
    "body": "### 描述\n\n希望识别用户分段发出的消息，凑成一句问ai，而不是说一条回一条\n\n### 使用场景\n\n有些人发消息喜欢不写逗号，一条消息拆成好几条发。这个时候ai会分条一个个回复，非常不聪明。\n推荐从时间上检测，如果用户连续发消息，那就存起来，等用户停下一定时间后再凑一句问ai\n\n### 你愿意提交PR吗?\n\n- [ ] 是的, 我愿意提交PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Soulter",
        "body": "可以通过 [wake_enhance](https://github.com/Soulter/astrbot_plugin_wake_enhance) 这个插件实现"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1252,
    "title": "[Bug] 最新提交中路径映射功能仍然未解决",
    "author": "Ljinzhou",
    "state": "closed",
    "created_at": "2025-04-12T14:33:16Z",
    "updated_at": "2025-06-11T14:55:48Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n**首先感谢作者在Q群的回复！**\n\n在最新的提交(1bf5a216786467cf2b1fcf8d94fac34ae9cb2fa1)中，路径映射仍然为解决。\n\"path_util.py\"中“logger.info(f\"路径映射: {url} -> {srcPath}\")”并未输出任何内容\n\n![Image](https://github.com/user-attachments/assets/d68e2d9f-cca7-4701-86ab-cc5e76955e79)\n\n![Image](https://github.com/user-attachments/assets/e12a7596-ccf7-4f3f-8cbe-e9bef7178a7a)\n\n![Image](https://github.com/user-attachments/assets/29979f60-558b-436c-b3fe-6596b1ee4857)\n\n![Image](https://github.com/user-attachments/assets/3075cd88-09c0-468c-a08d-4febf25a1fdd)\n\n我并未通过管理面板直接更新（因为无效），而是从github重新下载重新安装后运行，部署在docker容器中\n\n我确定我的服务器中存在“/root/.config/QQ/NapCat/temp”路径和\"/AstrBot/data/plugins/astrbot_plugin_jm_search/data/books/....pdf'\"文件\n确定astrbot版本为最新提交的版本。望早日修复\n\n### 如何复现？\n\nif os.path.exists(pdf_path):\n                        chain = [\n                            Comp.At(qq=event.get_sender_id()),\n                            Comp.File(\n                                file=pdf_file_path,\n                                name=pdf_filename,\n                            ),\n                        ]\n                        yield event.chain_result(chain)\n\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\n1bf5a216786467cf2b1fcf8d94fac34ae9cb2fa1\n\n### 操作系统\n\nLinux\n\n### 报错日志\n\n![Image](https://github.com/user-attachments/assets/ae38d17e-0528-4672-afd7-04586c77b4d2)\n\n### 你愿意提交 PR 吗？\n\n- [ ] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Soulter",
        "body": "您好，目前推荐通过文件服务器的方式来传递文件、语音、视频等信息。请设置下面的配置项：\n\n![Image](https://github.com/user-attachments/assets/4dfc6a6e-ef4c-4742-a7fb-bf2ab4466ef7)\n\n地址是 NapCat/Lagrange 能够访问到 AstrBot 6185 端口的地址。"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1300,
    "title": "[Feature]添加对重试系统",
    "author": "AlanBacker",
    "state": "closed",
    "created_at": "2025-04-17T08:42:33Z",
    "updated_at": "2025-06-11T14:50:57Z",
    "labels": [
      "enhancement"
    ],
    "body": "### 描述\n\n因为有些模型不稳定导致的一些报错，强烈建议上一个重试系统\n\n### 使用场景\n\n当检测到错误时，进行重试\n\n### 你愿意提交PR吗?\n\n- [ ] 是的, 我愿意提交PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Soulter",
        "body": "AstrBot 是有重试机制的。\n\nhttps://vscode.dev/github/Soulter/AstrBot/blob/feat-dify-user-param/astrbot/core/provider/sources/openai_source.py#L367"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1598,
    "title": "TTS增加翻译功能",
    "author": "AWalker987",
    "state": "closed",
    "created_at": "2025-05-19T08:28:05Z",
    "updated_at": "2025-06-11T14:49:14Z",
    "labels": [
      "enhancement"
    ],
    "body": "### 描述\n\ntts配置中新增一个翻译API供用户填写，在发送tts请求前先将llm输出的文本通过API转化为其他语言再发送tts请求。\n\n### 使用场景\n\n一些角色的训练语聊只有日语/英语/...等，对中文的tts处理效果不好。\n\n### 你愿意提交PR吗?\n\n- [ ] 是的, 我愿意提交PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Soulter",
        "body": "暂时不会适配这个功能，可以通过插件实现。"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1624,
    "title": "[Bug] 错误：Connection timeout to host",
    "author": "acanyo",
    "state": "closed",
    "created_at": "2025-05-22T08:32:01Z",
    "updated_at": "2025-06-11T14:48:03Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n加载不出来插件列表、更新检查不到，自己下载插件也无法成功 ，也在设置里设置了github\n\n### 如何复现？\n\n加载不出来插件列表、更新检查不到，自己下载插件也无法成功 ，也在设置里设置了github\n服务器买的 文档推荐的 雨云江苏宿迁服务器\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\n雨云一键部署\n\n### 操作系统\n\nLinux\n\n### 报错日志\n\n [16:27:26] [Core] [ERRO] [core.zip_updator:77]: 解析版本信息时发生异常: Connection timeout to host https://api.soulter.top/releases \n [16:27:26] [Core] [WARN] [routes.update:55]: 检查更新失败: 解析版本信息失败 (不影响除项目更新外的正常使用) \n [16:27:26] [Core] [ERRO] [routes.plugin:99]: 请求 https://api.soulter.top/astrbot/plugins 失败，错误：Connection timeout to host https://api.soulter.top/astrbot/plugins \n [16:27:57] [Core] [ERRO] [routes.plugin:99]: 请求 https://api.soulter.top/astrbot/plugins 失败，错误：Connection timeout to host https://api.soulter.top/astrbot/plugins \n [16:28:13] [Core] [INFO] [utils.pip_installer:31]: Pip 包管理器: pip install urllib3 --trusted-host mirrors.aliyun.com -i https://mirrors.aliyun.com/pypi/simple/ \n [16:28:50] [Core] [ERRO] [routes.plugin:99]: 请求 https://api.soulter.top/astrbot/plugins 失败，错误：Connection timeout to host https://api.soulter.top/astrbot/plugins \n [16:29:11] [Core] [ERRO] [routes.plugin:99]: 请求 https://api.soulter.top/astrbot/plugins 失败，错误：Connection timeout to host https://api.soulter.top/astrbot/plugins \n [16:29:17] [Core] [ERRO] [routes.plugin:99]: 请求 https://api.soulter.top/astrbot/plugins 失败，错误：Connection timeout to host https://api.soulter.top/astrbot/plugins \n [16:29:40] [Core] [INFO] [routes.plugin:219]: 正在安装插件 https://api.soulter.top/astrbot-announcement-plugin-market \n [16:29:40] [Core] [INFO] [core.zip_updator:126]: 正在下载更新 astrbot-announcement-plugin-market ... \n [16:30:10] [Core] [ERRO] [core.zip_updator:77]: 解析版本信息时发生异常: Connection timeout to host https://api.github.com/repos/api.soulter.top/astrbot-announcement-plugin-market/releases \n [16:30:10] [Core] [ERRO] [routes.plugin:225]: Traceback (most recent call last):\n  File \"/opt/AstrBot/venv/lib/python3.11/site-packages/aiohttp/connector.py\", line 1122, in _wrap_create_connection\n    return await self._loop.create_connection(*args, **kwargs, sock=sock)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.11/asyncio/base_events.py\", line 1112, in create_connection\n    transport, protocol = await self._create_connection_transport(\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.11/asyncio/base_events.py\", line 1145, in _create_connection_transport\n    await waiter\nasyncio.exceptions.CancelledError\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/opt/AstrBot/venv/lib/python3.11/site-packages/aiohttp/client.py\", line 703, in _request\n    conn = await self._connector.connect(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/AstrBot/venv/lib/python3.11/site-packages/aiohttp/connector.py\", line 548, in connect\n    proto = await self._create_connection(req, traces, timeout)\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/AstrBot/venv/lib/python3.11/site-packages/aiohttp/connector.py\", line 1056, in _create_connection\n    _, proto = await self._create_direct_connection(req, traces, timeout)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/AstrBot/venv/lib/python3.11/site-packages/aiohttp/connector.py\", line 1406, in _create_direct_connection\n    raise last_exc\n  File \"/opt/AstrBot/venv/lib/python3.11/site-packages/aiohttp/connector.py\", line 1375, in _create_direct_connection\n    transp, proto = await self._wrap_create_connection(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/AstrBot/venv/lib/python3.11/site-packages/aiohttp/connector.py\", line 1112, in _wrap_create_connection\n    async with ceil_timeout(\n  File \"/usr/lib/python3.11/asyncio/timeouts.py\", line 98, in __aexit__\n    raise TimeoutError\nTimeoutError\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/opt/AstrBot/astrbot/core/zip_updator.py\", line 50, in fetch_release_info\n    async with session.get(url) as response:\n  File \"/opt/AstrBot/venv/lib/python3.11/site-packages/aiohttp/client.py\", line 1425, in __aenter__\n    self._resp: _RetType = await self._coro\n                           ^^^^^^^^^^^^^^^^\n  File \"/opt/AstrBot/venv/lib/python3.11/site-packages/aiohttp/client.py\", line 707, in _request\n    raise ConnectionTimeoutError(\naiohttp.client_exceptions.ConnectionTimeoutError: Connection timeout to host https://api.github.com/repos/api.soulter.top/astrbot-announcement-plugin-market/releases\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/opt/AstrBot/astrbot/dashboard/routes/plugin.py\", line 220, in install_plugin\n    plugin_info = await self.plugin_manager.install_plugin(repo_url, proxy)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/AstrBot/astrbot/core/star/star_manager.py\", line 617, in install_plugin\n    plugin_path = await self.updator.install(repo_url, proxy)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/AstrBot/astrbot/core/star/updator.py\", line 23, in install\n    await self.download_from_repo_url(plugin_path, repo_url, proxy)\n  File \"/opt/AstrBot/astrbot/core/zip_updator.py\", line 128, in download_from_repo_url\n    releases = await self.fetch_release_info(url=release_url)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/AstrBot/astrbot/core/zip_updator.py\", line 78, in fetch_release_info\n    raise Exception(\"解析版本信息失败\")\nException: 解析版本信息失败\n\n### 你愿意提交 PR 吗？\n\n- [x] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Soulter",
        "body": "您好，您的 GitHub 加速地址填错了，请删除加速地址。此外，雨云宿迁目前无法访问境外的地址，而 AstrBot 服务架设在香港。我们之后会将服务迁到国内。"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1651,
    "title": "[Feature]模型代理与插件代理分离",
    "author": "zhoufan47",
    "state": "closed",
    "created_at": "2025-05-26T09:25:25Z",
    "updated_at": "2025-06-11T14:47:55Z",
    "labels": [
      "enhancement"
    ],
    "body": "### 描述\n\n目前Astrbot设置代理后，似乎全局都会通过代理访问外部资源，期待分离各个部分的代理，以便不同的功能可使用不同的代理进行外部访问。\n\n### 使用场景\n\n_No response_\n\n### 你愿意提交PR吗?\n\n- [ ] 是的, 我愿意提交PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Soulter",
        "body": "你好！如果你在开发插件，可以尝试设置 httpx 或者 aiohttp 请求参数中的 trust_env 为 False，这样请求就不会走 AstrBot 设置的代理"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1770,
    "title": "[Bug] 提醒功能无法发送消息到企微",
    "author": "beat4ocean",
    "state": "closed",
    "created_at": "2025-06-09T08:31:44Z",
    "updated_at": "2025-06-11T14:46:46Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n包括astrbot自带的[astrbot-reminder](packages/reminder)和独立的[ai_reminder](https://github.com/kjqwer/astrbot_plugin_sy)均无法将设置好的任何消息提醒内容发送到企微，但是wechatpadpro可以\n\n### 如何复现？\n\n正常安装astrbot-reminder(内置）或使用 ai_reminder 并通过wecom企微消息平台设置定时提醒任务\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\n v3.5.13 linux\n\n### 操作系统\n\nLinux\n\n### 记录日志（注：后台没有任何报错）\n\n[13:13:03] [Core] [INFO] [core.event_bus:50]: [wecom] 1633995666811580418/1633995666811580418: 给我定一个一分钟后的吃饭提醒  \n [13:13:10] [Core] [INFO] [method.llm_request:385]: 触发 1 个函数调用: ['set_reminder'] \n [13:13:10] [Core] [INFO] [method.llm_request:472]: 调用工具函数：set_reminder，参数：{'datetime_str': '2025-06-09 13:14', 'text': '记得按时吃饭，补充能量！', 'user_name': '用户'} \n [13:13:19] [Core] [INFO] [respond.stage:211]: AstrBot -> 1633995666811580418/1633995666811580418: 好的，已经为你成功设置了一分钟后的吃饭提醒！以下是详细信息：\n\n**已设置的提醒：**  \n- **内容**: 记得按时吃饭，补充能量！  \n- **时间**: 2025-06-09 13:14  \n\n---\n\n### **当前所有提醒列表**  \n使用 `/rmd ls` 查看后，以下是现有的提醒内容：\n\n1. **时间**: 2025-06-09 13:14  \n   **内容**: 记得按时吃饭，补充能量！\n\n---\n\n如果需要添加更多提醒或查看其他功能，请随时告诉我！ 😊\n\n你可以随时通过以下方式管理提醒：\n- 在手机、电脑日历中手动添加。\n- 或者继续让我帮你记录和整理提醒清单！  \n [13:14:00] [Plug] [INFO] [astrbot_plugin_sy.scheduler:326]: 开始执行提醒: 记得按时吃饭，补充能量！ 在 wecom:FriendMessage:1633995666811580418 \n [13:14:00] [Plug] [INFO] [astrbot_plugin_sy.scheduler:375]: 已应用MessageSesion安全解析补丁 \n [13:14:00] [Plug] [INFO] [astrbot_plugin_sy.scheduler:383]: 使用提供商: openai_chat_completion \n [13:14:00] [Plug] [INFO] [astrbot_plugin_sy.scheduler:773]: 提醒模式：找到用户对话，对话ID: ee55c72b-3290-4654-a27c-5f48c2f2a9db, 上下文长度: 134 \n [13:14:01] [Plug] [INFO] [astrbot_plugin_sy.scheduler:815]: Reminder Activated: 记得按时吃饭，补充能量！, created by wecom:FriendMessage:1633995666811580418 \n [13:14:01] [Plug] [INFO] [astrbot_plugin_sy.scheduler:840]: 尝试发送提醒消息到: wecom:FriendMessage:1633995666811580418 (原始ID: wecom:FriendMessage:1633995666811580418) \n [13:14:02] [Plug] [INFO] [astrbot_plugin_sy.scheduler:843]: 消息发送结果: True \n [13:14:02] [Plug] [INFO] [astrbot_plugin_sy.scheduler:863]: 提醒已添加到对话历史，对话ID: ee55c72b-3290-4654-a27c-5f48c2f2a9db \n [13:14:02] [Plug] [INFO] [astrbot_plugin_sy.scheduler:903]: One-time reminder removed: 记得按时吃饭，补充能量！ \n\n### 你愿意提交 PR 吗？\n\n- [ ] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Soulter",
        "body": "企业微信目前不支持主动回复。\n\n目前支持主动回复的平台：QQ（aiocqhttp）、WeChatPadPro、飞书、Telegram"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1680,
    "title": "[Feature]修改账号时布局不合理",
    "author": "Unknownuserxxb",
    "state": "closed",
    "created_at": "2025-05-30T01:48:44Z",
    "updated_at": "2025-06-11T14:45:21Z",
    "labels": [
      "enhancement"
    ],
    "body": "### 描述\n\n![Image](https://github.com/user-attachments/assets/8b7d6fa2-b48a-48ee-b711-db57d87b9f1f)一般来说原密码和修改后的密码应当放在一起，而不是中间呗用户名隔开，导致把用户名当密码输入了\n\n### 使用场景\n\n_No response_\n\n### 你愿意提交PR吗?\n\n- [ ] 是的, 我愿意提交PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Soulter",
        "body": "已经由 @Kwicxy  修复。"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1745,
    "title": "[Bug]提示 setuptools 为 65.5.1，但实际是 80.9",
    "author": "xiaobai9978",
    "state": "closed",
    "created_at": "2025-06-06T08:43:55Z",
    "updated_at": "2025-06-11T14:44:05Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n![Image](https://github.com/user-attachments/assets/8d543726-0a45-456c-b54b-9c6b5ac1ac93)\n\n![Image](https://github.com/user-attachments/assets/fd5fe9ed-4b5d-4cf3-8864-3e1e2356c8e5)\n\n![Image](https://github.com/user-attachments/assets/9ece58e0-7234-41b4-b733-85e46de6f28a)\n\n### 如何复现？\n\n装 [astrbot_plugin_knowledge_base](https://github.com/lxfight/astrbot_plugin_knowledge_base)  这个插件发现的\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\nDocker v3.5.13\n\n### 操作系统\n\nLinux\n\n### 报错日志\n\n [16:32:29] [Core] [INFO] [star.star_manager:403]: 正在载入插件 astrbot_plugin_knowledge_base ... \n [16:32:29] [Core] [ERRO] [star.star_manager:413]: Traceback (most recent call last):\n  File \"/AstrBot/astrbot/core/star/star_manager.py\", line 407, in load\n    module = __import__(path, fromlist=[module_str])\n  File \"/AstrBot/data/plugins/astrbot_plugin_knowledge_base/main.py\", line 29, in <module>\n    from .vector_store.astrbot_faiss_store import FaissStore\n  File \"/AstrBot/data/plugins/astrbot_plugin_knowledge_base/vector_store/__init__.py\", line 3, in <module>\n    from .milvus_lite_store import MilvusLiteStore\n  File \"/AstrBot/data/plugins/astrbot_plugin_knowledge_base/vector_store/milvus_lite_store.py\", line 12, in <module>\n    from pymilvus import MilvusClient, FieldSchema, DataType, CollectionSchema\n  File \"/usr/local/lib/python3.10/site-packages/pymilvus/__init__.py\", line 13, in <module>\n    from .client import __version__\n  File \"/usr/local/lib/python3.10/site-packages/pymilvus/client/__init__.py\", line 15, in <module>\n    __version__ = get_distribution(\"pymilvus\").version\n  File \"/usr/local/lib/python3.10/site-packages/pkg_resources/__init__.py\", line 478, in get_distribution\n  File \"/usr/local/lib/python3.10/site-packages/pkg_resources/__init__.py\", line 354, in get_provider\n  File \"/usr/local/lib/python3.10/site-packages/pkg_resources/__init__.py\", line 909, in require\n  File \"/usr/local/lib/python3.10/site-packages/pkg_resources/__init__.py\", line 800, in resolve\n    normalized_name = packaging.utils.canonicalize_name(dist.key)\npkg_resources.ContextualVersionConflict: (setuptools 65.5.1 (/usr/local/lib/python3.10/site-packages), Requirement.parse('setuptools>69'), {'pymilvus'})\n \n [16:32:29] [Core] [ERRO] [star.star_manager:414]: 插件 astrbot_plugin_knowledge_base 导入失败。原因：(setuptools 65.5.1 (/usr/local/lib/python3.10/site-packages), Requirement.parse('setuptools>69'), {'pymilvus'}) \n\n### 你愿意提交 PR 吗？\n\n- [ ] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Soulter",
        "body": "尝试通过 控制台->安装pip库 安装 `setuptools~=80.9`"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1742,
    "title": "[Bug] 知识库不支持LM STUDIO Openai-compatible接口的服务供应商",
    "author": "zzz6839",
    "state": "closed",
    "created_at": "2025-06-06T07:16:03Z",
    "updated_at": "2025-06-11T14:43:50Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n使用LM STUIDO部署本地EMBEDDING模型QWEN-3-4B-EMBEDDING，遇到api-key error,但本地并未设置api-key,尝试使用随机标准格式的SK api_key失败, LM STUDIO日志没有握手信息。\n\n\n### 如何复现？\n\n知识库上传PDF文件稳定复现\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\nlatest docker\n\n### 操作系统\n\nLinux\n\n### 报错日志\n\n```\n[15:06:22] [Core] [INFO] [provider.manager:140]: 载入 openai_embedding(QWEN3_4B_F16_LM_STUDIO) 服务提供商 ... \n [15:06:28] [Plug] [INFO] [vector_store.astrbot_faiss_store:206]: 向 Faiss 集合 'general' 添加 15 个文档，共分为 2 个批次进行处理。 \n [15:06:28] [Plug] [ERRO] [utils.embedding:53]: 获取 Embedding API 请求失败 (OpenAI Status Error)，状态码: 401, 类型: invalid_request_error, 参数: None, 消息: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-your-key. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}响应详情: {\n    \"error\": {\n        \"message\": \"Incorrect API key provided: sk-your-key. You can find your API key at https://platform.openai.com/account/api-keys.\",\n        \"type\": \"invalid_request_error\",\n        \"param\": null,\n        \"code\": \"invalid_api_key\"\n    }\n}\n \n [15:06:28] [Plug] [ERRO] [vector_store.astrbot_faiss_store:175]: 向 Faiss 集合 'general' 添加文档时发生异常: 获取向量失败，返回的向量为空或无效。请检查输入文本和配置。 \nStack (most recent call last):\n  File \"/AstrBot/main.py\", line 83, in <module>\n    asyncio.run(core_lifecycle.start())\n  File \"/usr/local/lib/python3.10/asyncio/runners.py\", line 44, in run\n    return loop.run_until_complete(main)\n  File \"/usr/local/lib/python3.10/asyncio/base_events.py\", line 636, in run_until_complete\n    self.run_forever()\n  File \"/usr/local/lib/python3.10/asyncio/base_events.py\", line 603, in run_forever\n    self._run_once()\n  File \"/usr/local/lib/python3.10/asyncio/base_events.py\", line 1909, in _run_once\n    handle._run()\n  File \"/usr/local/lib/python3.10/asyncio/events.py\", line 80, in _run\n    self._context.run(self._callback, *self._args)\n  File \"/AstrBot/data/plugins/astrbot_plugin_knowledge_base/vector_store/astrbot_faiss_store.py\", line 175, in _batch_process_task\n    logger.error(\n [15:06:29] [Plug] [ERRO] [utils.embedding:53]: 获取 Embedding API 请求失败 (OpenAI Status Error)，状态码: 401, 类型: invalid_request_error, 参数: None, 消息: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-your-key. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}响应详情: {\n    \"error\": {\n        \"message\": \"Incorrect API key provided: sk-your-key. You can find your API key at https://platform.openai.com/account/api-keys.\",\n        \"type\": \"invalid_request_error\",\n        \"param\": null,\n        \"code\": \"invalid_api_key\"\n    }\n}\n \n [15:06:29] [Plug] [ERRO] [vector_store.astrbot_faiss_store:175]: 向 Faiss 集合 'general' 添加文档时发生异常: 获取向量失败，返回的向量为空或无效。请检查输入文本和配置。 \nStack (most recent call last):\n  File \"/AstrBot/main.py\", line 83, in <module>\n    asyncio.run(core_lifecycle.start())\n  File \"/usr/local/lib/python3.10/asyncio/runners.py\", line 44, in run\n    return loop.run_until_complete(main)\n  File \"/usr/local/lib/python3.10/asyncio/base_events.py\", line 636, in run_until_complete\n    self.run_forever()\n  File \"/usr/local/lib/python3.10/asyncio/base_events.py\", line 603, in run_forever\n    self._run_once()\n  File \"/usr/local/lib/python3.10/asyncio/base_events.py\", line 1909, in _run_once\n    handle._run()\n  File \"/usr/local/lib/python3.10/asyncio/events.py\", line 80, in _run\n    self._context.run(self._callback, *self._args)\n  File \"/AstrBot/data/plugins/astrbot_plugin_knowledge_base/vector_store/astrbot_faiss_store.py\", line 175, in _batch_process_task\n    logger.error(\n [15:06:29] [Plug] [ERRO] [utils.embedding:53]: 获取 Embedding API 请求失败 (OpenAI Status Error)，状态码: 401, 类型: invalid_request_error, 参数: None, 消息: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-your-key. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}响应详情: {\n    \"error\": {\n        \"message\": \"Incorrect API key provided: sk-your-key. You can find your API key at https://platform.openai.com/account/api-keys.\",\n        \"type\": \"invalid_request_error\",\n        \"param\": null,\n        \"code\": \"invalid_api_key\"\n    }\n}\n \n [15:06:29] [Plug] [ERRO] [vector_store.astrbot_faiss_store:175]: 向 Faiss 集合 'general' 添加文档时发生异常: 获取向量失败，返回的向量为空或无效。请检查输入文本和配置。 \nStack (most recent call last):\n  File \"/AstrBot/main.py\", line 83, in <module>\n    asyncio.run(core_lifecycle.start())\n  File \"/usr/local/lib/python3.10/asyncio/runners.py\", line 44, in run\n    return loop.run_until_complete(main)\n  File \"/usr/local/lib/python3.10/asyncio/base_events.py\", line 636, in run_until_complete\n    self.run_forever()\n  File \"/usr/local/lib/python3.10/asyncio/base_events.py\", line 603, in run_forever\n    self._run_once()\n  File \"/usr/local/lib/python3.10/asyncio/base_events.py\", line 1909, in _run_once\n    handle._run()\n  File \"/usr/local/lib/python3.10/asyncio/events.py\", line 80, in _run\n    self._context.run(self._callback, *self._args)\n  File \"/AstrBot/data/plugins/astrbot_plugin_knowledge_base/vector_store/astrbot_faiss_store.py\", line 175, in _batch_process_task\n    logger.error(\n [15:06:30] [Plug] [ERRO] [utils.embedding:53]: 获取 Embedding API 请求失败 (OpenAI Status Error)，状态码: 401, 类型: invalid_request_error, 参数: None, 消息: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-your-key. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}响应详情: {\n    \"error\": {\n        \"message\": \"Incorrect API key provided: sk-your-key. You can find your API key at https://platform.openai.com/account/api-keys.\",\n        \"type\": \"invalid_request_error\",\n        \"param\": null,\n        \"code\": \"invalid_api_key\"\n    }\n}\n \n [15:06:30] [Plug] [ERRO] [vector_store.astrbot_faiss_store:175]: 向 Faiss 集合 'general' 添加文档时发生异常: 获取向量失败，返回的向量为空或无效。请检查输入文本和配置。 \nStack (most recent call last):\n  File \"/AstrBot/main.py\", line 83, in <module>\n    asyncio.run(core_lifecycle.start())\n  File \"/usr/local/lib/python3.10/asyncio/runners.py\", line 44, in run\n    return loop.run_until_complete(main)\n  File \"/usr/local/lib/python3.10/asyncio/base_events.py\", line 636, in run_until_complete\n    self.run_forever()\n  File \"/usr/local/lib/python3.10/asyncio/base_events.py\", line 603, in run_forever\n    self._run_once()\n  File \"/usr/local/lib/python3.10/asyncio/base_events.py\", line 1909, in _run_once\n    handle._run()\n  File \"/usr/local/lib/python3.10/asyncio/events.py\", line 80, in _run\n    self._context.run(self._callback, *self._args)\n  File \"/AstrBot/data/plugins/astrbot_plugin_knowledge_base/vector_store/astrbot_faiss_store.py\", line 175, in _batch_process_task\n    logger.error(\n [15:06:31] [Plug] [ERRO] [utils.embedding:53]: 获取 Embedding API 请求失败 (OpenAI Status Error)，状态码: 401, 类型: invalid_request_error, 参数: None, 消息: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-your-key. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}响应详情: {\n    \"error\": {\n        \"message\": \"Incorrect API key provided: sk-your-key. You can find your API key at https://platform.openai.com/account/api-keys.\",\n        \"type\": \"invalid_request_error\",\n        \"param\": null,\n        \"code\": \"invalid_api_key\"\n    }\n}\n \n [15:06:31] [Plug] [ERRO] [vector_store.astrbot_faiss_store:175]: 向 Faiss 集合 'general' 添加文档时发生异常: 获取向量失败，返回的向量为空或无效。请检查输入文本和配置。 \nStack (most recent call last):\n  File \"/AstrBot/main.py\", line 83, in <module>\n    asyncio.run(core_lifecycle.start())\n  File \"/usr/local/lib/python3.10/asyncio/runners.py\", line 44, in run\n    return loop.run_until_complete(main)\n  File \"/usr/local/lib/python3.10/asyncio/base_events.py\", line 636, in run_until_complete\n    self.run_forever()\n  File \"/usr/local/lib/python3.10/asyncio/base_events.py\", line 603, in run_forever\n    self._run_once()\n  File \"/usr/local/lib/python3.10/asyncio/base_events.py\", line 1909, in _run_once\n    handle._run()\n  File \"/usr/local/lib/python3.10/asyncio/events.py\", line 80, in _run\n    self._context.run(self._callback, *self._args)\n  File \"/AstrBot/data/plugins/astrbot_plugin_knowledge_base/vector_store/astrbot_faiss_store.py\", line 175, in _batch_process_task\n    logger.error(\n [15:06:31] [Plug] [ERRO] [vector_store.astrbot_faiss_store:182]: 批次添加失败，文档 成人高尿酸血症与痛风食养指南（2024年版）问答一、《成人高尿酸血症与痛风食养指南（2024年版）》制定的目的和意义是什么？《成人高尿酸血症与痛风食养指南（2024 年版）》（以下简... 将被丢弃。 \n [15:06:31] [Plug] [ERRO] [utils.embedding:53]: 获取 Embedding API 请求失败 (OpenAI Status Error)，状态码: 401, 类型: invalid_request_error, 参数: None, 消息: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-your-key. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}响应详情: {\n    \"error\": {\n        \"message\": \"Incorrect API key provided: sk-your-key. You can find your API key at https://platform.openai.com/account/api-keys.\",\n        \"type\": \"invalid_request_error\",\n        \"param\": null,\n        \"code\": \"invalid_api_key\"\n    }\n}\n \n [15:06:31] [Plug] [ERRO] [vector_store.astrbot_faiss_store:175]: 向 Faiss 集合 'general' 添加文档时发生异常: 获取向量失败，返回的向量为空或无效。请检查输入文本和配置。 \nStack (most recent call last):\n  File \"/AstrBot/main.py\", line 83, in <module>\n    asyncio.run(core_lifecycle.start())\n  File \"/usr/local/lib/python3.10/asyncio/runners.py\", line 44, in run\n    return loop.run_until_complete(main)\n  File \"/usr/local/lib/python3.10/asyncio/base_events.py\", line 636, in run_until_complete\n    self.run_forever()\n  File \"/usr/local/lib/python3.10/asyncio/base_events.py\", line 603, in run_forever\n    self._run_once()\n  File \"/usr/local/lib/python3.10/asyncio/base_events.py\", line 1909, in _run_once\n    handle._run()\n  File \"/usr/local/lib/python3.10/asyncio/events.py\", line 80, in _run\n    self._context.run(self._callback, *self._args)\n  File \"/AstrBot/data/plugins/astrbot_plugin_knowledge_base/vector_store/astrbot_faiss_store.py\", line 175, in _batch_process_task\n    logger.error(\n [15:06:31] [Plug] [ERRO] [vector_store.astrbot_faiss_store:182]: 批次添加失败，文档 多样、均衡营养的膳食理念。每天保证谷薯类、蔬菜和水果、畜禽鱼蛋奶、大豆和坚果摄入，食物品种每天应不少于12种，每周不少于25种。每天多食新鲜蔬菜，推荐每天摄入至少500g，深色蔬菜应当... 将被丢弃。 \n [15:06:32] [Plug] [INFO] [vector_store.astrbot_faiss_store:221]: 向 Faiss 集合 'general' 完成添加操作。总共处理了 15 个原始文档，成功添加 0 个文档。 \n [15:06:32] [Plug] [INFO] [vector_store.astrbot_faiss_store:224]: 其中 2 个批次因重试失败被丢弃。 \n [15:06:32] [Plug] [ERRO] [astrbot_plugin_knowledge_base.web_api:210]: 添加文档失败: 添加文档失败: 添加文档失败，返回的文档 ID 为空。 \n [15:07:49] [Core] [DBUG] [routes.chat:221]: 用户 admin 断开聊天长连接。 \n```\n\n### 你愿意提交 PR 吗？\n\n- [ ] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "zzz6839",
        "body": "LM STUDIO能调用，模型loaded然后失败，使用/v1 也不是 /v1/embeddings的接口，/v1/embeddings会出现error导致失败。\n```\n [14:16:59] [Plug] [INFO] [vector_store.astrbot_faiss_store:149]: Faiss 集合 '1' 创建成功。 \n [14:17:04] [Plug] [INFO] [vector_store.astrbot_faiss_store:206]: 向 Faiss 集合 '1' 添加 15 个文档，共分为 2 个批次进行处理。 \n [14:17:07] [Plug] [ERRO] [vector_store.astrbot_faiss_store:175]: 向 Faiss 集合 '1' 添加文档时发生异常: Error code: 404 - {'error': {'message': 'Failed to load model \"qwen3-embedding-4b\". Error: Model is not embedding.', 'type': 'invalid_request_error', 'param': 'model', 'code': 'model_not_found'}} \nStack (most recent call last):\n  File \"/AstrBot/main.py\", line 83, in <module>\n    asyncio.run(core_lifecycle.start())\n  File \"/usr/local/lib/python3.10/asyncio/runners.py\", line 44, in run\n    return loop.run_until_complete(main)\n  File \"/usr/local/lib/python3.10/asyncio/base_events.py\", line 636, in run_until_complete\n    self.run_forever()\n  File \"/usr/local/lib/python3.10/asyncio/base_events.py\", line 603, in run_forever\n    self._run_once()\n  File \"/usr/local/lib/python3.10/asyncio/base_events.py\", line 1909, in _run_once\n    handle._run()\n  File \"/usr/local/lib/python3.10/asyncio/events.py\", line 80, in _run\n    self._context.run(self._callback, *self._args)\n  File \"/AstrBot/data/plugins/astrbot_plugin_knowledge_base/vector_store/astrbot_faiss_store.py\", line 175, in _batch_process_task\n    logger.error(\n [14:17:07] [Plug] [ERRO] [vector_store.astrbot_faiss_store:175]: 向 Faiss 集合 '1' 添加文档时发生异常: Error code: 404 - {'error': {'message': 'Failed to load model \"qwen3-embedding-4b\". Error: Model is not embedding.', 'type': 'invalid_request_error', 'param': 'model', 'code': 'model_not_found'}} \nStack (most recent call last):\n  File \"/AstrBot/main.py\", line 83, in <module>\n    asyncio.run(core_lifecycle.start())\n  File \"/usr/local/lib/python3.10/asyncio/runners.py\", line 44, in run\n    return loop.run_until_complete(main)\n  File \"/usr/local/lib/python3.10/asyncio/base_events.py\", line 636, in run_until_complete\n    self.run_forever()\n  File \"/usr/local/lib/python3.10/asyncio/base_events.py\", line 603, in run_forever\n    self._run_once()\n  File \"/usr/local/lib/python3.10/asyncio/base_events.py\", line 1909, in _run_once\n    handle._run()\n  File \"/usr/local/lib/python3.10/asyncio/events.py\", line 80, in _run\n    self._context.run(self._callback, *self._args)\n  File \"/AstrBot/data/plugins/astrbot_plugin_knowledge_base/vector_store/astrbot_faiss_store.py\", line 175, in _batch_process_task\n    logger.error(\n [14:17:12] [Plug] [ERRO] [vector_store.astrbot_faiss_store:175]: 向 Faiss 集合 '1' 添加文档时发生异常: Error code: 404 - {'error': {'message': 'Failed to load model \"qwen3-embedding-4b\". Error: Model is not embedding.', 'type': 'invalid_request_error', 'param': 'model', 'code': 'model_not_found'}} \nStack (most recent call last):\n  File \"/AstrBot/main.py\", line 83, in <module>\n    asyncio.run(core_lifecycle.start())\n  File \"/usr/local/lib/python3.10/asyncio/runners.py\", line 44, in run\n    return loop.run_until_complete(main)\n  File \"/usr/local/lib/python3.10/asyncio/base_events.py\", line 636, in run_until_complete\n    self.run_forever()\n  File \"/usr/local/lib/python3.10/asyncio/base_events.py\", line 603, in run_forever\n    self._run_once()\n  File \"/usr/local/lib/python3.10/asyncio/base_events.py\", line 1909, in _run_once\n    handle._run()\n  File \"/usr/local/lib/python3.10/asyncio/events.py\", line 80, in _run\n    self._context.run(self._callback, *self._args)\n  File \"/AstrBot/data/plugins/astrbot_plugin_knowledge_base/vector_store/astrbot_faiss_store.py\", line 175, in _batch_process_task\n    logger.error(\n [14:17:12] [Plug] [ERRO] [vector_store.astrbot_faiss_store:175]: 向 Faiss 集合 '1' 添加文档时发生异常: Error code: 404 - {'error': {'message': 'Failed to load model \"qwen3-embedding-4b\". Error: Model is not embedding.', 'type': 'invalid_request_error', 'param': 'model', 'code': 'model_not_found'}} \nStack (most recent call last):\n  File \"/AstrBot/main.py\", line 83, in <module>\n    asyncio.run(core_lifecycle.start())\n  File \"/usr/local/lib/python3.10/asyncio/runners.py\", line 44, in run\n    return loop.run_until_complete(main)\n  File \"/usr/local/lib/python3.10/asyncio/base_events.py\", line 636, in run_until_complete\n    self.run_forever()\n  File \"/usr/local/lib/python3.10/asyncio/base_events.py\", line 603, in run_forever\n    self._run_once()\n  File \"/usr/local/lib/python3.10/asyncio/base_events.py\", line 1909, in _run_once\n    handle._run()\n  File \"/usr/local/lib/python3.10/asyncio/events.py\", line 80, in _run\n    self._context.run(self._callback, *self._args)\n  File \"/AstrBot/data/plugins/astrbot_plugin_knowledge_base/vector_store/astrbot_faiss_store.py\", line 175, in _batch_process_task\n    logger.error(\n [14:17:16] [Plug] [ERRO] [vector_store.astrbot_faiss_store:175]: 向 Faiss 集合 '1' 添加文档时发生异常: Error code: 404 - {'error': {'message': 'Failed to load model \"qwen3-embedding-4b\". Error: Model is not embedding.', 'type': 'invalid_request_error', 'param': 'model', 'code': 'model_not_found'}} \nStack (most recent call last):\n  File \"/AstrBot/main.py\", line 83, in <module>\n    asyncio.run(core_lifecycle.start())\n  File \"/usr/local/lib/python3.10/asyncio/runners.py\", line 44, in run\n    return loop.run_until_complete(main)\n  File \"/usr/local/lib/python3.10/asyncio/base_events.py\", line 636, in run_until_complete\n    self.run_forever()\n  File \"/usr/local/lib/python3.10/asyncio/base_events.py\", line 603, in run_forever\n    self._run_once()\n  File \"/usr/local/lib/python3.10/asyncio/base_events.py\", line 1909, in _run_once\n    handle._run()\n  File \"/usr/local/lib/python3.10/asyncio/events.py\", line 80, in _run\n    self._context.run(self._callback, *self._args)\n  File \"/AstrBot/data/plugins/astrbot_plugin_knowledge_base/vector_store/astrbot_faiss_store.py\", line 175, in _batch_process_task\n    logger.error(\n [14:17:16] [Plug] [ERRO] [vector_store.astrbot_faiss_store:182]: 批次添加失败，文档 多样、均衡营养的膳食理念。每天保证谷薯类、蔬菜和水果、畜禽鱼蛋奶、大豆和坚果摄入，食物品种每天应不少于12种，每周不少于25种。每天多食新鲜蔬菜，推荐每天摄入至少500g，深色蔬菜应当... 将被丢弃。 \n [14:17:16] [Plug] [ERRO] [vector_store.astrbot_faiss_store:175]: 向 Faiss 集合 '1' 添加文档时发生异常: Error code: 404 - {'error': {'message': 'Failed to load model \"qwen3-embedding-4b\". Error: Model is not embedding.', 'type': 'invalid_request_error', 'param': 'model', 'code': 'model_not_found'}} \nStack (most recent call last):\n  File \"/AstrBot/main.py\", line 83, in <module>\n    asyncio.run(core_lifecycle.start())\n  File \"/usr/local/lib/python3.10/asyncio/runners.py\", line 44, in run\n    return loop.run_until_complete(main)\n  File \"/usr/local/lib/python3.10/asyncio/base_events.py\", line 636, in run_until_complete\n    self.run_forever()\n  File \"/usr/local/lib/python3.10/asyncio/base_events.py\", line 603, in run_forever\n    self._run_once()\n  File \"/usr/local/lib/python3.10/asyncio/base_events.py\", line 1909, in _run_once\n    handle._run()\n  File \"/usr/local/lib/python3.10/asyncio/events.py\", line 80, in _run\n    self._context.run(self._callback, *self._args)\n  File \"/AstrBot/data/plugins/astrbot_plugin_knowledge_base/vector_store/astrbot_faiss_store.py\", line 175, in _batch_process_task\n    logger.error(\n [14:17:16] [Plug] [ERRO] [vector_store.astrbot_faiss_store:182]: 批次添加失败，文档 成人高尿酸血症与痛风食养指南（2024年版）问答一、《成人高尿酸血症与痛风食养指南（2024年版）》制定的目的和意义是什么？《成人高尿酸血症与痛风食养指南（2024 年版）》（以下简... 将被丢弃。 \n [14:17:17] [Plug] [INFO] [vector_store.astrbot_faiss_store:221]: 向 Faiss 集合 '1' 完成添加操作。总共处理了 15 个原始文档，成功添加 0 个文档。 \n [14:17:17] [Plug] [INFO] [vector_store.astrbot_faiss_store:224]: 其中 2 个批次因重试失败被丢弃。 \n [14:17:17] [Plug] [ERRO] [astrbot_plugin_knowledge_base.web_api:210]: 添加文档失败: 添加文档失败: 添加文档失败，返回的文档 ID 为空。 \n```"
      },
      {
        "user": "Soulter",
        "body": "你好，报错内容显示 qwen3-embedding-4b 不是一个 embedding模型，我排查了一下，应该是 LMStudio 那边的问题。\n\n参考链接：\n1. https://github.com/lmstudio-ai/lmstudio-bug-tracker/issues/696\n2. https://github.com/lmstudio-ai/lms/issues/205\n\n可以暂时换个模型，比如 nomic 的"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1009,
    "title": "[Feature]建议在服务提供商选项中加入开启stream的选项",
    "author": "yixuexiaoao",
    "state": "closed",
    "created_at": "2025-03-27T00:57:33Z",
    "updated_at": "2025-06-11T14:28:47Z",
    "labels": [
      "enhancement"
    ],
    "body": "### 描述\n\n有些模型必须要开启stream才能正常使用，比如qwen-omni和qwq-32b，不开启就会报错\n\n![Image](https://github.com/user-attachments/assets/4b8a6baf-d782-434a-991b-37b698d40933)\n\n### 使用场景\n\n增加stream选项\n\n### 你愿意提交PR吗?\n\n- [ ] 是的, 我愿意提交PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Soulter",
        "body": "目前已经支持流式传输，可以在配置文件中打开流式传输。"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1734,
    "title": "[Bug] self.context.get_using_provider().text_chat() 不支持加入user参数，因而导致Dify报错",
    "author": "Abyss-Seeker",
    "state": "closed",
    "created_at": "2025-06-05T15:16:24Z",
    "updated_at": "2025-06-11T14:26:59Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n![Image](https://github.com/user-attachments/assets/9eab9e29-2d67-4d5b-947d-3c2d58bdba95)\n\n![Image](https://github.com/user-attachments/assets/202a99bc-b908-44ee-8094-8dc1768be823)\n\n如图所示，Dify API接口需要usr参数，而似乎plugin中调用的这个方式并未支持该参数，因而导致报错\n\n### 如何复现？\n\n使用任意一个使用大模型的插件即可复现\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\nLinux Docker，最新版本\n\n### 操作系统\n\nLinux\n\n### 报错日志\n\n[22:58:52] [Core] [INFO] [utils.dify_api_client:30]: chat_messages payload: {'inputs': {}, 'query': '请结合之前的对话内容，分析用户给出的查询，提取出搜索关键词。请确保输出人名或作品名，避免输入句子或复杂描述。\\n例子1：\\nuser：丰川祥子与三角初华是什么关系？\\nassistant：丰川祥子 三角初华\\n例子2：\\nuser：《直到某魔女死去》的是讲什么的？\\nassistant：直到某魔女死去\\n问题：\\n曼波是谁\\n        ', 'user': None, 'response_mode': 'streaming', 'conversation_id': '', 'files': [], 'url': 'https://api.dify.ai/v1/chat-messages'} \n [22:58:53] [Core] [ERRO] [sources.dify_source:183]: Dify 请求失败：chat_messages 请求失败：400. {\"code\": \"invalid_param\", \"message\": \"Arg user must be provided.\", \"status\": 400}\n \n [22:58:53] [Plug] [INFO] [astrbot_plugin_anime_gacha.main:361]: 搜索关键词：Dify 请求失败：chat_messages 请求失败：400. {\"code\": \"invalid_param\", \"message\": \"Arg user must be provided.\", \"status\": 400}\n \n [22:59:04] [Core] [ERRO] [pipeline.stage:101]: Previous Error: None \n{\"type\": \"log\", \"level\": \"ERROR\", \"time\": \"22:59:04\", \"data\": \"\\u001b[31m [22:59:04] [Core] [ERRO] [method.star_request:58]: Traceback (most recent call last):\\n  File \\\"/usr/local/lib/python3.10/site-packages/requests/models.py\\\", line 974, in json\\n    return complexjson.loads(self.text, **kwargs)\\n  File \\\"/usr/local/lib/python3.10/json/__init__.py\\\", line 346, in loads\\n    return _default_decoder.decode(s)\\n  File \\\"/usr/local/lib/python3.10/json/decoder.py\\\", line 337, in decode\\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\\n  File \\\"/usr/local/lib/python3.10/json/decoder.py\\\", line 355, in raw_decode\\n    raise JSONDecodeError(\\\"Expecting value\\\", s, err.value) from None\\njson.decoder.JSONDecodeError: Expecting value: line 1 column 9 (char 8)\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\\"/AstrBot/astrbot/core/pipeline/process_stage/method/star_request.py\\\", line 54, in process\\n    async for ret in wrapper:\\n  File \\\"/AstrBot/astrbot/core/pipeline/stage.py\\\", line 102, in _call_handler\\n    raise e\\n  File \\\"/AstrBot/astrbot/core/pipeline/stage.py\\\", line 85, in _call_handler\\n    async for ret in ready_to_call:\\n  File \\\"/AstrBot/data/plugins/astrbot_plugin_anime_gacha/main.py\\\", line 362, in search_moegirl_by_command\\n    async for res in self.search_moegirl_by_key_word(event, key_word):\\n  File \\\"/AstrBot/data/plugins/astrbot_plugin_an\n [22:59:04] [Core] [ERRO] [method.star_request:59]: Star data.plugins.astrbot_plugin_anime_gacha.main_search_moegirl_by_command handle error: Expecting value: line 1 column 9 (char 8) \n\n### 你愿意提交 PR 吗？\n\n- [x] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Soulter",
        "body": "您好，可以暂时在 session_id 参数中传入 user 参数。"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1786,
    "title": "[Plugin] astrbot_plugin_lyricnext",
    "author": "EEEpai",
    "state": "closed",
    "created_at": "2025-06-11T04:01:22Z",
    "updated_at": "2025-06-11T14:14:28Z",
    "labels": [
      "plugin-publish"
    ],
    "body": "### 插件仓库\n\nhttps://github.com/EEEpai/astrbot_plugin_lyricnext\n\n### 描述\n\n插件名: astrbot_plugin_lyricnext\n插件作者: PikoPai\n插件简介: 歌词接龙插件，当你发送一句歌词，机器人会回复下一句。\n支持的消息平台:(必填，如 QQ、微信、飞书) 仅测试aiocqhttp\n标签:(可选) 接歌词\n社交链接:(可选, 将会在插件市场作者名称上作为可点击的链接)\n\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Soulter",
        "body": "已经上架！"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1775,
    "title": "[Plugin] astrbot_plugin_redstone",
    "author": "oyxning",
    "state": "closed",
    "created_at": "2025-06-10T01:39:38Z",
    "updated_at": "2025-06-11T14:11:39Z",
    "labels": [
      "plugin-publish"
    ],
    "body": "### 插件仓库\n\nhttps://github.com/oyxning/astrbot_plugin_redstone\n\n### 描述\n\n插件名: astrbot_plugin_redstone\n插件作者: LumineStory\n插件简介: 通过调用硅基流动API生成地狱笑话\n支持的消息平台:QQ\n标签:地狱笑话吧打过来了\n社交链接:https://github.com/oyxning\n\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1774,
    "title": "[Plugin] 转人工插件",
    "author": "Zhalslar",
    "state": "closed",
    "created_at": "2025-06-09T18:25:50Z",
    "updated_at": "2025-06-11T14:09:38Z",
    "labels": [
      "plugin-publish"
    ],
    "body": "### 插件仓库\n\nhttps://github.com/Zhalslar/astrbot_plugin_human_service\n\n### 描述\n\n插件名: astrbot_plugin_human_service\n插件作者: Zhalslar\n插件简介: [仅aiocqhttp]让bot 转人工 \\ 转人机，真人客服 接入对话 \\ 结束对话\n支持的消息平台: QQ\n标签:人工、客服\n社交链接:https://github.com/Zhalslar\n\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1747,
    "title": "[Plugin] 插件名 astrbot_plugin_64gua，astrbot_plugin_zhanxing和astrbot_plugin_zhuge",
    "author": "yuweitk",
    "state": "closed",
    "created_at": "2025-06-06T09:06:14Z",
    "updated_at": "2025-06-11T14:07:09Z",
    "labels": [
      "plugin-publish"
    ],
    "body": "### 插件仓库\n\n一，https://github.com/yuweitk/astrbot_plugin_64gua\n\n二，https://github.com/yuweitk/astrbot_plugin_zhuge\n\n三，https://github.com/yuweitk/astrbot_plugin_zhanxing\n\n\n### 描述\n\n一，\n插件名: astrbot_plugin_64gua\n插件作者: 雨爲/yuweitk\n插件简介: 周易六十四卦随机生成器\n支持的消息平台:QQ_official\n标签：占卜\n\n二，\n插件名: astrbot_plugin_zhuge\n插件作者: 雨爲/yuweitk\n插件简介: 诸葛神算\n支持的消息平台:QQ_official\n标签：占卜\n\n三，\n插件名: astrbot_plugin_zhanxing\n插件作者: 雨爲/yuweitk\n插件简介: 基于llm的占星骰子插件\n支持的消息平台:QQ_official\n标签：占卜\n\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1740,
    "title": "[Plugin] astrbot_plugin_YumeCard",
    "author": "FengYing1314",
    "state": "closed",
    "created_at": "2025-06-06T05:46:13Z",
    "updated_at": "2025-06-11T14:06:40Z",
    "labels": [
      "plugin-publish"
    ],
    "body": "### 插件仓库\n\nhttps://github.com/FengYing1314/astrbot_plugin_YumeCard\n\n### 描述\n\n插件名: astrbot_plugin_YumeCard\n插件作者: FengYing\n插件简介: 为了使项目YumeCard支持astrbot，同时也进行自动部署和管理配置项（主项目YumeCard系统要求为Linux or win平台 需要成功运行一遍 ）\n支持的消息平台:理论全平台（测试QQ）\n标签:功能 卡片 消息 \n社交链接:https://github.com/FengYing1314\n\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1787,
    "title": "[Feature]如何关闭推理思考过程",
    "author": "baiyajin",
    "state": "closed",
    "created_at": "2025-06-11T06:00:40Z",
    "updated_at": "2025-06-11T11:27:32Z",
    "labels": [
      "enhancement"
    ],
    "body": "### 描述\n\n_No response_\n\n### 使用场景\n\n_No response_\n\n### 你愿意提交PR吗?\n\n- [ ] 是的, 我愿意提交PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "RC-CHN",
        "body": "需要模型支持，部分openai模型允许设置reasoning_effort参数，对于claude/gemini也可主动关闭思考模式"
      },
      {
        "user": "baiyajin",
        "body": "谢谢，我试试\r\n\r\n\r\n\r\n\r\n1254085110\r\n***@***.***"
      },
      {
        "user": "IGCrystal",
        "body": "可以使用插件，你可以自行在插件市场搜索一下"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1788,
    "title": "[Feature] deepseek-r1:14b回复很慢，要怎么处理",
    "author": "baiyajin",
    "state": "closed",
    "created_at": "2025-06-11T07:08:11Z",
    "updated_at": "2025-06-11T11:27:25Z",
    "labels": [
      "enhancement"
    ],
    "body": "### 描述\n\ndeepseek-r1:14b回复很慢，要怎么处理\n\n### 使用场景\n\n_No response_\n\n### 你愿意提交PR吗?\n\n- [ ] 是的, 我愿意提交PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "RC-CHN",
        "body": "一般来说不是astrbot的问题，请向你的上游服务商咨询，如本地部署请检查硬件配置是否符合要求。"
      },
      {
        "user": "IGCrystal",
        "body": "模型的问题，与框架无关"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1790,
    "title": "[Bug]无法发送文件",
    "author": "Ljinzhou",
    "state": "closed",
    "created_at": "2025-06-11T10:54:09Z",
    "updated_at": "2025-06-11T11:27:18Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n我在使用插件[astrbot_plugin_jm_cosmos](https://github.com/GEMILUXVII/astrbot_plugin_jm_cosmos)时，设置了路径映射(值为:/app/.config/QQ:/root/.config/QQ)，然后使用命令/jm 11451后获取漫画。\n\n下载后在发送阶段出现了问题，astrbot控制台显示：\n [18:39:53] [Plug] [INFO] [astrbot_plugin_jm_cosmos.main:883]: 非aiocqhttp平台或私聊，使用标准 File 组件发送方式 \n\n执行的代码为：\nfrom astrbot.api.message_components import File\nyield event.chain_result([File(name=file_name, file=file_path)])\n\n随后出现了报错：\nTask exception was never retrieved\nfuture: <Task finished name='Task-141' coro=<PipelineScheduler.execute() done, defined at /AstrBot/astrbot/core/pipeline/scheduler.py:67> exception=ValueError('\"File\" object has no field \"file\"')>\nTraceback (most recent call last):\n  File \"/AstrBot/astrbot/core/pipeline/scheduler.py\", line 73, in execute\n    await self._process_stages(event)\n  File \"/AstrBot/astrbot/core/pipeline/scheduler.py\", line 50, in _process_stages\n    await self._process_stages(event, i + 1)\n  File \"/AstrBot/astrbot/core/pipeline/scheduler.py\", line 61, in _process_stages\n    await coroutine\n  File \"/AstrBot/astrbot/core/pipeline/respond/stage.py\", line 141, in process\n    component.file = path_Mapping(mappings, component.file)\n    ^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.11/site-packages/pydantic/v1/main.py\", line 357, in __setattr__\n    raise ValueError(f'\"{self.__class__.__name__}\" object has no field \"{name}\"')\nValueError: \"File\" object has no field \"file\"\n\n\n\n### 如何复现？\n\n1. 安装插件[astrbot_plugin_jm_cosmos](https://github.com/GEMILUXVII/astrbot_plugin_jm_cosmos)\n2. 设置路径映射：/app/.config/QQ:/root/.config/QQ\n3. 发送命令：/jm 11451\n4. 出现报错\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\nv3.5.15\n\n### 操作系统\n\nLinux\n\n### 报错日志\n\nTask exception was never retrieved\nfuture: <Task finished name='Task-141' coro=<PipelineScheduler.execute() done, defined at /AstrBot/astrbot/core/pipeline/scheduler.py:67> exception=ValueError('\"File\" object has no field \"file\"')>\nTraceback (most recent call last):\n  File \"/AstrBot/astrbot/core/pipeline/scheduler.py\", line 73, in execute\n    await self._process_stages(event)\n  File \"/AstrBot/astrbot/core/pipeline/scheduler.py\", line 50, in _process_stages\n    await self._process_stages(event, i + 1)\n  File \"/AstrBot/astrbot/core/pipeline/scheduler.py\", line 61, in _process_stages\n    await coroutine\n  File \"/AstrBot/astrbot/core/pipeline/respond/stage.py\", line 141, in process\n    component.file = path_Mapping(mappings, component.file)\n    ^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.11/site-packages/pydantic/v1/main.py\", line 357, in __setattr__\n    raise ValueError(f'\"{self.__class__.__name__}\" object has no field \"{name}\"')\nValueError: \"File\" object has no field \"file\"\n\n### 你愿意提交 PR 吗？\n\n- [ ] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "IGCrystal",
        "body": "插件问题请报告给插件仓库，由插件作者处理"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1789,
    "title": "[Bug]人格情景设置后聊天中生效，不想用了，删除后，还在有人格情景。",
    "author": "baiyajin",
    "state": "closed",
    "created_at": "2025-06-11T10:00:38Z",
    "updated_at": "2025-06-11T11:17:54Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n人格情景设置后聊天中生效，不想用了，删除后，还在有人格情景。\n\n### 如何复现？\n\n打开 http://127.0.0.1:6185/config 管理页面，配置文件，人格情景设置 (persona)，点击加号，增加一个人格情景，聊天一会，再删除掉，保存重启，人格情景还存在。\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\nv3.5.15\n\n### 操作系统\n\nWindows\n\n### 报错日志\n\n无\n\n### 你愿意提交 PR 吗？\n\n- [ ] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "IGCrystal",
        "body": "请问reset相应会话了吗"
      },
      {
        "user": "baiyajin",
        "body": "有会话的\r\n\r\n\r\n\r\n发自我的iPhone\r\n\r\n\r\n------------------ 原始邮件 ------------------\r\n发件人: IGCrystal ***@***.***&gt;\r\n发送时间: 2025年6月11日 19:07\r\n收件人: AstrBotDevs/AstrBot ***@***.***&gt;\r\n抄送: baiyajin ***@***.***&gt;, Author ***@***.***&gt;\r\n主题: Re: [AstrBotDevs/AstrBot] [Bug]人格情景设置后聊天中生效，不想用了，删除后，还在有人格情景。 (Issue #1789)"
      },
      {
        "user": "IGCrystal",
        "body": "就是重置相应会话的上下文了吗"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1782,
    "title": "[Bug]wechatpadpro  无法转发收到的图片、视频等媒体信息",
    "author": "NiceAir",
    "state": "closed",
    "created_at": "2025-06-10T11:13:49Z",
    "updated_at": "2025-06-11T08:09:26Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n源代码wechatpadpro部分中发送图片、视频的方式继承了gewe的，但是解析图片视频的方式并不完善，导致按照解析图片的方式去转发收到的图片时，无法发送。\n\nastrbot的wechatpadpro_adapter.py 714行文件保存的图片信息为图片的image_bs64_data信息，在做转发时唯一能拿到的图片信息也只能是image_bs64_data。但是拿到image_bs64_data之后进行发送时，报错\n`向 wechatpadpro:FriendMessage:wxid_qmy0i8rjurtx22 发送消息失败：image file is truncated `\n\n使用image_bs64_data进行发送图片的代码如下：\n`\n        match message_type:\n            case \"image\":\n                from astrbot.core.platform.sources.wechatpadpro.wechatpadpro_message_event import WeChatPadProMessageEvent\n                assert isinstance(event, WeChatPadProMessageEvent)\n                image_bs64_data = event.adapter.cached_images.get(str(new_msg_id), \"\")\n                message_segments.append(Image.fromBase64(image_bs64_data))\n\n     message_chain = MessageChain(message_segments)\n     await self.context.send_message(session, message_chain) \n`\n\n由于没有解析视频信息，同样也无法做到转发视频\n\n### 如何复现？\n\n拿到图片的new_msg_id后，用该new_msg_id发送图片\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\nv3.5.14 本地，wechatpadpro\n\n### 操作系统\n\nmacOS\n\n### 报错日志\n\n![Image](https://github.com/user-attachments/assets/7a8d15db-41e5-4458-923a-6ddbfe42b5b3)\n\n### 你愿意提交 PR 吗？\n\n- [x] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1682,
    "title": "[Feature]添加唤醒词触发自动回复",
    "author": "misaka15273",
    "state": "open",
    "created_at": "2025-05-30T03:36:26Z",
    "updated_at": "2025-06-11T06:11:04Z",
    "labels": [
      "enhancement"
    ],
    "body": "### 描述\n\n可以在服务提供商->主动回复中添加一个或多个唤醒词，平台消息下发时检测到唤醒词就主动回复\n也许会看起来更像真人..？\n可以和概率回复同时使用，如果检测到有唤醒词就不执行概率回复的逻辑防止重复回复\n也许把主动回复的选项移到人格设置里会更好（\n\n### 使用场景\n\n_No response_\n\n### 你愿意提交PR吗?\n\n- [ ] 是的, 我愿意提交PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "a546109781",
        "body": "附议。\n顺便设置负面词，触发后必定不回复，有时候插件命令也会调LLM回复很搞啊\n添加关键词过滤可以屏蔽，但是会连插件一起屏蔽掉\nSpectreCore (影芯) 这个插件实现了这些功能，但是用这个插件会导致设置的人格变的很奇怪，人格设置的负面提示词不会遵守，比如让他回复简洁它还在长篇大论，我还是觉得自带的主动回复比较好用"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1785,
    "title": "文件解析",
    "author": "hua-460",
    "state": "open",
    "created_at": "2025-06-11T03:59:52Z",
    "updated_at": "2025-06-11T03:59:52Z",
    "labels": [
      "enhancement"
    ],
    "body": "### 描述\n\n什么时候能开发一个qq机器人解析文件的功能呀，用过一个插件，但是触发不了\n\n### 使用场景\n\n给机器人发送文件，文件转到模型解析\n\n### 你愿意提交PR吗?\n\n- [ ] 是的, 我愿意提交PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1769,
    "title": "[Bug]wechatpadpro引用图片不回复",
    "author": "yixuexiaoao",
    "state": "closed",
    "created_at": "2025-06-09T07:54:51Z",
    "updated_at": "2025-06-11T01:28:34Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n更新到3.5.14，看日志可以引用消息，控制台可以看到引用的消息，但是用唤醒词引用不会回复\n\n\n\n### 如何复现？\n\n私聊和群聊引用消息\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\n3.5.14\n\n\n### 操作系统\n\nWindows\n\n### 报错日志\n\n` [15:50:23] [Core] [INFO] [core.event_bus:55]: [wechatpadpro] xxxxx: [图片]  \n [15:50:23] [Core] [DBUG] [method.star_request:50]: plugin -> session_controller - handle_session_control_agent \n [15:50:23] [Core] [DBUG] [method.star_request:50]: plugin -> session_controller - handle_empty_mention \n [15:50:23] [Core] [DBUG] [method.star_request:50]: plugin -> gewe_chatsummary - on_all_message \n [15:50:23] [Core] [DBUG] [method.star_request:50]: plugin -> astrbot_plugin_wake_enhance - on_message \n [15:50:23] [Core] [DBUG] [pipeline.scheduler:79]: pipeline 执行完毕。 \n [15:50:34] [Core] [DBUG] [wechatpadpro.wechatpadpro_adapter:390]: 收到 WebSocket 消息: {\"msg_id\":1584222310,\"from_user_name\":{\"str\":\"xxxxx\"},\"to_user_name\":{\"str\":\"wxid_gx89tjefoygz52\"},\"msg_type\":49,\"content\":{\"str\":\"\\u003c?xml version=\\\"1.0\\\"?\\u003e\\n\\u003cmsg\\u003e\\n\\t\\u003cappmsg appid=\\\"\\\" sdkver=\\\"0\\\"\\u003e\\n\\t\\t\\u003ctitle\\u003e//这是什么意思\\u003c/title\\u003e\\n\\t\\t\\u003cdes /\\u003e\\n\\t\\t\\u003caction /\\u003e\\n\\t\\t\\u003ctype\\u003e57\\u003c/type\\u003e\\n\\t\\t\\u003cshowtype\\u003e0\\u003c/showtype\\u003e\\n\\t\\t\\u003csoundtype\\u003e0\\u003c/soundtype\\u003e\\n\\t\\t\\u003cmediatagname /\\u003e\\n\\t\\t\\u003cmessageext /\\u003e\\n\\t\\t\\u003cmessageaction /\\u003e\\n\\t\\t\\u003ccontent /\\u003e\\n\\t\\t\\u003ccontentattr\\u003e0\\u003c/contentattr\\u003e\\n\\t\\t\\u003curl /\\u003e\\n\\t\\t\\u003clowurl /\\u003e\\n\\t\\t\\u003cdataurl /\\u003e\\n\\t\\t\\u003clowdataurl /\\u003e\\n\\t\\t\\u003csongalbumurl /\\u003e\\n\\t\\t\\u003csonglyric /\\u003e\\n\\t\\t\\u003ctemplate_id /\\u003e\\n\\t\\t\\u003cappattach\\u003e\\n\\t\\t\\t\\u003ctotallen\\u003e0\\u003c/totallen\\u003e\\n\\t\\t\\t\\u003cattachid /\\u003e\\n\\t\\t\\t\\u003cemoticonmd5\\u003e\\u003c/emoticonmd5\\u003e\\n\\t\\t\\t\\u003cfileext /\\u003e\\n\\t\\t\\t\\u003caeskey\\u003e\\u003c/aeskey\\u003e\\n\\t\\t\\u003c/appattach\\u003e\\n\\t\\t\\u003cextinfo /\\u003e\\n\\t\\t\\u003csourceusername /\\u003e\\n\\t\\t\\u003csourcedisplayname /\\u003e\\n\\t\\t\\u003cthumburl /\\u003e\\n\\t\\t\\u003cmd5 /\\u003e\\n\\t\\t\\u003cstatextstr /\\u003e\\n\\t\\t\\u003crefermsg\\u003e\\n\\t\\t\\t\\u003ctype\\u003e3\\u003c/type\\u003e\\n\\t\\t\\t\\u003csvrid\\u003e1382526463240174183\\u003c/svrid\\u003e\\n\\t\\t\\t\\u003cfromusr\\u003exxxxx\\u003c/fromusr\\u003e\\n\\t\\t\\t\\u003cchatusr\\u003exxxxx\\u003c/chatusr\\u003e\\n\\t\\t\\t\\u003cdisplayname\\u003e小白xxxxx\\u003c/displayname\\u003e\\n\\t\\t\\t\\u003cmsgsource\\u003e\\u0026lt;msgsource\\u0026gt;\\n\\t\\u0026lt;img_file_name\\u0026gt;630da0bc-b52f-4566-9cc2-052fa8e08876.png\\u0026lt;/img_file_name\\u0026gt;\\n\\t\\u0026lt;alnode\\u0026gt;\\n\\t\\t\\u0026lt;fr\\u0026gt;1\\u0026lt;/fr\\u0026gt;\\n\\t\\t\\u0026lt;cf\\u0026gt;3\\u0026lt;/cf\\u0026gt;\\n\\t\\u0026lt;/alnode\\u0026gt;\\n\\t\\u0026lt;sec_msg_node\\u0026gt;\\n\\t\\t\\u0026lt;uuid\\u0026gt;6c33d66c1b53bfcc9540924ca062dbd6_\\u0026lt;/uuid\\u0026gt;\\n\\t\\t\\u0026lt;risk-file-flag\\u0026gt;\\u0026lt;/risk-file-flag\\u0026gt;\\n\\t\\t\\u0026lt;risk-file-md5-list\\u0026gt;\\u0026lt;/risk-file-md5-list\\u0026gt;\\n\\t\\u0026lt;/sec_msg_node\\u0026gt;\\n\\u0026lt;/msgsource\\u0026gt;\\n\\u003c/msgsource\\u003e\\n\\t\\t\\t\\u003ccreatetime\\u003e1749455422\\u003c/createtime\\u003e\\n\\t\\t\\t\\u003ccontent\\u003e\\u0026lt;?xml version=\\\"1.0\\\"?\\u0026gt;\\u0026lt;msg\\u0026gt;\\u0026lt;img hdlength=\\\"0\\\" length=\\\"4827\\\" hevc_mid_size=\\\"0\\\" cdnbigimgurl=\\\"\\\" cdnmidimgurl=\\\"3057020100044b30490201000204cddcade002032f8411020425ba587d02046846923f042462376561663633332d376636612d346439372d383331392d3233363264346436666264340204051418020201000405004c4d9900\\\" aeskey=\\\"9555e4ecab1799aae7bdc07efbc51c80\\\" cdnthumburl=\\\"3057020100044b30490201000204cddcade002032f8411020425ba587d02046846923f042462376561663633332d376636612d346439372d383331392d3233363264346436666264340204051418020201000405004c4d9900\\\" cdnthumblength=\\\"1907\\\" cdnthumbwidth=\\\"66\\\" cdnthumbheight=\\\"37\\\" cdnthumbaeskey=\\\"9555e4ecab1799aae7bdc07efbc51c80\\\" encryver=\\\"1\\\" md5=\\\"4500ced34cfab952bcb176f43d15d5af\\\"/\\u0026gt;\\u0026lt;commenturl/\\u0026gt;\\u0026lt;/msg\\u0026gt;\\u003c/content\\u003e\\n\\t\\t\\u003c/refermsg\\u003e\\n\\t\\u003c/appmsg\\u003e\\n\\t\\u003cfromusername\\u003exxxxx\\u003c/fromusername\\u003e\\n\\t\\u003cscene\\u003e0\\u003c/scene\\u003e\\n\\t\\u003cappinfo\\u003e\\n\\t\\t\\u003cversion\\u003e1\\u003c/version\\u003e\\n\\t\\t\\u003cappname /\\u003e\\n\\t\\u003c/appinfo\\u003e\\n\\t\\u003ccommenturl /\\u003e\\n\\u003c/msg\\u003e\\n\"},\"status\":3,\"img_status\":1,\"img_buf\":{\"len\":0},\"create_time\":1749455433,\"msg_source\":\"\\u003cmsgsource\\u003e\\n\\t\\u003calnode\\u003e\\n\\t\\t\\u003cfr\\u003e1\\u003c/fr\\u003e\\n\\t\\u003c/alnode\\u003e\\n\\t\\u003csec_msg_node\\u003e\\n\\t\\t\\u003cuuid\\u003ef883d24590e02162ff79fde5c4bf9fb5_\\u003c/uuid\\u003e\\n\\t\\t\\u003crisk-file-flag /\\u003e\\n\\t\\t\\u003crisk-file-md5-list /\\u003e\\n\\t\\u003c/sec_msg_node\\u003e\\n\\t\\u003csignature\\u003eN0_V1_sl+Kzm/7|v1_w4/sVekx\\u003c/signature\\u003e\\n\\t\\u003ctmp_node\\u003e\\n\\t\\t\\u003cpublisher-id\\u003e\\u003c/publisher-id\\u003e\\n\\t\\u003c/tmp_node\\u003e\\n\\u003c/msgsource\\u003e\\n\",\"new_msg_id\":4415644759504380376} \n [15:50:34] [Core] [INFO] [core.event_bus:55]: [wechatpadpro] xxxxx: [图片] [引用] 小白xxxxx: [引用的图片] //这是什么意思  \n [15:50:34] [Core] [DBUG] [method.star_request:50]: plugin -> session_controller - handle_session_control_agent \n [15:50:34] [Core] [DBUG] [method.star_request:50]: plugin -> session_controller - handle_empty_mention \n [15:50:34] [Core] [DBUG] [method.star_request:50]: plugin -> gewe_chatsummary - on_all_message \n [15:50:34] [Core] [DBUG] [method.star_request:50]: plugin -> astrbot_plugin_wake_enhance - on_message \n [15:50:34] [Core] [DBUG] [pipeline.scheduler:79]: pipeline 执行完毕。 `\n\n### 你愿意提交 PR 吗？\n\n- [ ] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "zhx8702",
        "body": "看起来没有@。引用目前没有触发唤醒的逻辑 需要@触发"
      },
      {
        "user": "yixuexiaoao",
        "body": "试了@可以唤醒回复了，能否使用改成唤醒词呢？"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 590,
    "title": "[Bug]Cannot connect to host api.soulter.top:443 ssl:True [SSLCertVerificationError: (1, '[SSL: CERTIFICATE_VERIFY_FAILED]",
    "author": "ym1123",
    "state": "closed",
    "created_at": "2025-02-23T17:34:37Z",
    "updated_at": "2025-06-10T16:32:05Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n [01:31:33| ERROR] [plugin.py:74]: 请求 https://api.soulter.top/astrbot/plugins 失败，错误：Cannot connect to host api.soulter.top:443 ssl:True [SSLCertVerificationError: (1, '[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: unable to get local issuer certificate (_ssl.c:997)')]任何插件需要访问到https网页的就会出现这种报错，服务器是本地的电脑，时间是正确的，没有开代理，主机直接访问也是正常的，自己实在是不清楚出现这个问题是什么原因导致的\n\n### 如何复现？\n\n访问插件列表就会出现\n\n### AstrBot 版本与部署方式\n\n v3.4.30 win10\n\n### 操作系统\n\nWindows\n\n### 额外信息\n\n[01:31:33| ERROR] [plugin.py:74]: 请求 https://api.soulter.top/astrbot/plugins 失败，错误：Cannot connect to host api.soulter.top:443 ssl:True [SSLCertVerificationError: (1, '[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: unable to get local issuer certificate (_ssl.c:997)')]\n\n### 你愿意提交 PR 吗？\n\n- [ ] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Soulter",
        "body": "设置了 HTTP 代理吗"
      },
      {
        "user": "inori-3333",
        "body": "同样出现这种情况，不知道怎么解决。开启代理和关闭代理都试过了，均出现这种错误。\n错误日志：\n```\n[14:22:52] [WARNING] [update.py:48]: 检查更新失败: 解析版本信息失败 (不影响除项目更新外的正常使用) \n [14:22:53] [ERROR] [plugin.py:74]: 请求 https://api.soulter.top/astrbot/plugins 失败，错误：Cannot connect to host api.soulter.top:443 ssl:True [SSLCertVerificationError: (1, '[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: unable to get local issuer certificate (_ssl.c:1010)')] \n```"
      },
      {
        "user": "Soulter",
        "body": "Python 版本是多少？这个不是 AstrBot 的问题。可以尝试以下方法：\n\n1. 尝试关闭配置的 HTTP 代理地址\n2. pip install -U pip-system-certs \n3. pip install -U certifi\n\n可以去网上寻找相关解决方案：\n\n1. https://stackoverflow.com/questions/52805115/certificate-verify-failed-unable-to-get-local-issuer-certificate \n2. "
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 625,
    "title": "[Feature] 添加余额获取",
    "author": "dlnn",
    "state": "closed",
    "created_at": "2025-02-27T09:16:14Z",
    "updated_at": "2025-06-10T16:31:52Z",
    "labels": [
      "enhancement",
      "open-for-contribution"
    ],
    "body": "### 描述\n\n部分平台支持通过key获取余额\n比如\n\nhttps://api-docs.deepseek.com/api/get-user-balance\n\nhttps://openrouter.ai/docs/api-reference/get-credits\n\nhttps://docs.siliconflow.cn/cn/api-reference/userinfo/get-user-info\n\n要么在供应商里加个开关是否支持余额查询 可以自行添加查询脚本\n\n### 使用场景\n\n_No response_\n\n### 你愿意提交PR吗?\n\n- [ ] 是的, 我愿意提交PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 423,
    "title": "增加对接wechaty消息平台（个人微信号）",
    "author": "smartnikocj",
    "state": "closed",
    "created_at": "2025-02-08T06:10:13Z",
    "updated_at": "2025-06-10T16:30:51Z",
    "labels": [
      "enhancement"
    ],
    "body": "### 描述\n\n希望增加对接wechaty消息平台（个人微信号）！感谢！\n\n### 使用场景\n\n_No response_\n\n### 你愿意提交PR吗?\n\n- [ ] 是的, 我愿意提交PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "smartnikocj",
        "body": "@Soulter 能否增加呢，感谢！感谢！"
      },
      {
        "user": "Soulter",
        "body": "可以使用 WeChatPadPro 接入。"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1562,
    "title": "[Feature]服务商多开机制",
    "author": "Zhalslar",
    "state": "closed",
    "created_at": "2025-05-15T03:56:27Z",
    "updated_at": "2025-06-10T16:28:25Z",
    "labels": [
      "enhancement"
    ],
    "body": "### 描述\n\n实现服务商多开机制，以减缓多消息平台、多插件同时调用llm时，造成的请求堵塞\n\n### 使用场景\n\n多消息平台、或者多插件同时调用llm时，容易造成请求堵塞，同时，聊天所用的llm模型和插件调用的llm模型质量需求不一致，希望增强一个llm多开机制，让消息平台可绑定到指定服务商，同时插件调用llm时也能指定选用哪个服务商\n\n### 你愿意提交PR吗?\n\n- [x] 是的, 我愿意提交PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Soulter",
        "body": "已经支持会话单独设置提供商。等待 v3.5.15。\n\n![Image](https://github.com/user-attachments/assets/b61c1c1f-9bab-477c-9ae5-76d72b2db93e)"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1601,
    "title": "[Bug]",
    "author": "mikus-loli",
    "state": "closed",
    "created_at": "2025-05-19T11:05:16Z",
    "updated_at": "2025-06-10T16:27:20Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\nasyncio.exceptions.TimeoutError：连接超时，说明在指定时间内未收到服务器响应。\naiohttp.client_exceptions.ConnectionTimeoutError：aiohttp 客户端因超时放弃连接。\n\n### 如何复现？\n\n每次启动\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\ndocker \n\n### 操作系统\n\nLinux\n\n### 报错日志\n\n [18:53:47] [Core] [WARN] [AstrBot.main:49]: 检测到管理面板有更新。可以使用 /dashboard_update 命令更新。 \n [18:53:47] [Core] [INFO] [AstrBot.main:80]: \n     ___           _______.___________..______      .______     ______   .___________.\n    /   \\         /       |           ||   _  \\     |   _  \\   /  __  \\  |           |\n   /  ^  \\       |   (----`---|  |----`|  |_)  |    |  |_)  | |  |  |  | `---|  |----`\n  /  /_\\  \\       \\   \\       |  |     |      /     |   _  <  |  |  |  |     |  |\n /  _____  \\  .----)   |      |  |     |  |\\  \\----.|  |_)  | |  `--'  |     |  |\n/__/     \\__\\ |_______/       |__|     | _| `._____||______/   \\______/      |__|\n\n \n [18:53:47] [Core] [INFO] [core.core_lifecycle:61]: AstrBot v3.5.10 \n [18:53:47] [Core] [INFO] [star.star_manager:395]: 正在载入插件 astrbot_plugin_help ... \n [18:53:47] [Core] [INFO] [star.star_manager:395]: 正在载入插件 astrbot_plugin_bilibili ... \n [18:53:47] [Core] [INFO] [provider.func_tool_manager:207]: 添加函数调用工具: get_bangumi \n [18:53:47] [Core] [INFO] [star.star_manager:395]: 正在载入插件 astrbot_plugin_gotify ... \n [18:53:47] [Plug] [INFO] [astrbot_plugin_gotify.main:42]: 插件初始化完成 \n [18:53:47] [Core] [INFO] [star.star_manager:395]: 正在载入插件 astrbot_plugin_initiativedialogue ... \n [18:53:47] [Plug] [INFO] [astrbot_plugin_initiativedialogue.main:31]: 收到的配置内容: {'self_id': '2701849691', 'time_settings': {'time_limit_enabled': True, 'inactive_time_seconds': 7200, 'max_response_delay_seconds': 3600, 'activity_start_hour': 8, 'activity_end_hour': 23, 'max_consecutive_messages': 3}, 'whitelist': {'enabled': True, 'user_ids': []}, 'daily_greetings': {'enabled': True, 'morning_hour': 8, 'morning_minute': 0, 'night_hour': 23, 'night_minute': 0}, 'schedule_settings': {'enabled': True, 'generation_hour': 0, 'generation_minute': 5, 'persona_name': ''}, 'random_daily_activities': {'daily_sharing': {'enabled': True, 'min_interval_minutes': 180, 'sharing_max_delay_seconds': 600}}, 'festival_settings': {'enabled': True, 'prioritize_festival': True}, 'tools_api_keySettings': {'weather_api_key': '', 'weather_location': 'taiyuan', 'weather_get': False}} \n [18:53:47] [Plug] [INFO] [utils.data_loader:112]: 成功从 /AstrBot/data/plugins/astrbot_plugin_initiativedialogue/data/umo_storage.json 加载用户数据 \n [18:53:47] [Plug] [INFO] [astrbot_plugin_initiativedialogue.main:67]: 已加载配置，不活跃时间阈值: 7200秒, 随机回复窗口: 3600秒, 时间限制: 启用, 活动时间: 8点-23点, 最大连续消息数: 3条 \n [18:53:47] [Plug] [INFO] [astrbot_plugin_initiativedialogue.main:76]: 白名单功能状态: 启用, 白名单用户数量: 0 \n [18:53:47] [Plug] [INFO] [astrbot_plugin_initiativedialogue.main:82]: 随机日常分享状态: 启用, 最小间隔: 180分钟, 最大延迟: 600秒 \n [18:53:47] [Plug] [INFO] [astrbot_plugin_initiativedialogue.main:89]: 每日问候状态: 启用, 早安时间: 8:00, 晚安时间: 23:00 \n [18:53:47] [Plug] [INFO] [astrbot_plugin_initiativedialogue.main:97]: AI日程安排状态: 启用, 生成时间: 0:05 \n [18:53:47] [Plug] [INFO] [astrbot_plugin_initiativedialogue.main:105]: 节日检测状态: 启用, 优先使用节日提示词: 是 \n [18:53:47] [Plug] [INFO] [astrbot_plugin_initiativedialogue.main:125]: 主动对话插件初始化完成，检测任务已启动 \n [18:53:47] [Core] [INFO] [star.star_manager:395]: 正在载入插件 web_searcher ... \n [18:53:47] [Core] [INFO] [provider.func_tool_manager:207]: 添加函数调用工具: web_search \n [18:53:47] [Core] [INFO] [provider.func_tool_manager:207]: 添加函数调用工具: fetch_url \n [18:53:47] [Core] [INFO] [star.star_manager:395]: 正在载入插件 astrbot ... \n [18:53:47] [Core] [INFO] [star.star_manager:395]: 正在载入插件 vpet ... \n [18:53:47] [Core] [INFO] [provider.func_tool_manager:207]: 添加函数调用工具: screenshot \n [18:53:47] [Core] [INFO] [star.star_manager:395]: 正在载入插件 reminder ... \n [18:53:47] [Core] [INFO] [provider.func_tool_manager:207]: 添加函数调用工具: reminder \n [18:53:47] [Core] [INFO] [star.star_manager:395]: 正在载入插件 session_controller ... \n [18:53:47] [Core] [INFO] [star.star_manager:395]: 正在载入插件 python_interpreter ... \n [18:53:47] [Core] [INFO] [provider.func_tool_manager:207]: 添加函数调用工具: python_interpreter \n [18:53:47] [Core] [INFO] [star.star_manager:464]: 插件 astrbot-python-interpreter 已被禁用。 \n [18:53:47] [Core] [INFO] [provider.manager:141]: 载入 zhipu_chat_completion(zhipu_default) 服务提供商 ... \n [18:53:47] [Core] [INFO] [respond.stage:74]: 分段回复间隔时间：[1.5, 3.5] \n [18:53:47] [Core] [INFO] [platform.manager:45]: 载入 aiocqhttp(莫莫) 平台适配器 ... \n [18:53:47] [Core] [INFO] [platform.manager:45]: 载入 wecom(wecom) 平台适配器 ... \n [18:53:47] [Core] [WARN] [wecom.wecom_event:16]: 检测到 pydub 库未安装，企业微信将无法语音收发。如需使用语音，请前往管理面板 -> 控制台 -> 安装 Pip 库安装 pydub。 \n [18:53:48] [Core] [INFO] [dashboard.server:131]: 正在启动 WebUI, 监听地址: http://0.0.0.0:6185 \n [18:53:48] [Core] [INFO] [dashboard.server:134]: 提示: WebUI 将监听所有网络接口，请注意安全。（可在 data/cmd_config.json 中配置 dashboard.host 以修改 host） \n [18:53:48] [Core] [INFO] [dashboard.server:170]: \n ✨✨✨\n  AstrBot v3.5.10 WebUI 已启动，可访问\n\n   ➜  本地: http://localhost:6185\n   ➜  网络: http://127.0.0.1:6185\n   ➜  网络: http://172.19.0.2:6185\n   ➜  默认用户名和密码: astrbot\n ✨✨✨\n \n [18:53:48] [Plug] [INFO] [utils.data_loader:193]: 启动定期保存数据任务 \n [18:53:48] [Core] [INFO] [core.core_lifecycle:168]: AstrBot 启动完成。\n [18:53:48] [Core] [INFO] [wecom.wecom_adapter:96]: 将在 0.0.0.0:6195 端口启动 企业微信 适配器。 \n [18:54:16] [Core] [INFO] [aiocqhttp.aiocqhttp_platform_adapter:81]: aiocqhttp(OneBot v11) 适配器已连接。 \n [18:54:51] [Core] [ERRO] [routes.tools:282]: Traceback (most recent call last):\n  File \"/usr/local/lib/python3.10/site-packages/aiohttp/connector.py\", line 1115, in _wrap_create_connection\n    sock = await aiohappyeyeballs.start_connection(\n  File \"/usr/local/lib/python3.10/site-packages/aiohappyeyeballs/impl.py\", line 73, in start_connection\n    sock = await _connect_sock(\n  File \"/usr/local/lib/python3.10/site-packages/aiohappyeyeballs/impl.py\", line 208, in _connect_sock\n    await loop.sock_connect(sock, address)\n  File \"/usr/local/lib/python3.10/asyncio/selector_events.py\", line 501, in sock_connect\n    return await fut\nasyncio.exceptions.CancelledError\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/usr/local/lib/python3.10/site-packages/aiohttp/client.py\", line 703, in _request\n    conn = await self._connector.connect(\n  File \"/usr/local/lib/python3.10/site-packages/aiohttp/connector.py\", line 548, in connect\n    proto = await self._create_connection(req, traces, timeout)\n  File \"/usr/local/lib/python3.10/site-packages/aiohttp/connector.py\", line 1056, in _create_connection\n    _, proto = await self._create_direct_connection(req, traces, timeout)\n  File \"/usr/local/lib/python3.10/site-packages/aiohttp/connector.py\", line 1406, in _create_direct_connection\n    raise last_exc\n  File \"/usr/local/lib/python3.10/site-packages/aiohttp/connector.py\", line 1375, in _create_direct_connection\n    transp, proto = await self._wrap_create_connection(\n  File \"/usr/local/lib/python3.10/site-packages/aiohttp/connector.py\", line 1112, in _wrap_create_connection\n    async with ceil_timeout(\n  File \"/usr/local/lib/python3.10/site-packages/async_timeout/__init__.py\", line 179, in __aexit__\n    self._do_exit(exc_type)\n  File \"/usr/local/lib/python3.10/site-packages/async_timeout/__init__.py\", line 265, in _do_exit\n    raise asyncio.TimeoutError\nasyncio.exceptions.TimeoutError\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/AstrBot/astrbot/dashboard/routes/tools.py\", line 271, in get_mcp_markets\n    async with session.get(f\"{BASE_URL}\") as response:\n  File \"/usr/local/lib/python3.10/site-packages/aiohttp/client.py\", line 1425, in __aenter__\n    self._resp: _RetType = await self._coro\n  File \"/usr/local/lib/python3.10/site-packages/aiohttp/client.py\", line 707, in _request\n    raise ConnectionTimeoutError(\naiohttp.client_exceptions.ConnectionTimeoutError: Connection timeout to host https://api.soulter.top/astrbot/mcpservers?page=1&page_size=9\n \n [18:58:48] [Plug] [INFO] [utils.data_loader:157]: 数据已保存到 /AstrBot/data/plugins/astrbot_plugin_initiativedialogue/data/umo_storage.json \n\n### 你愿意提交 PR 吗？\n\n- [x] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "anka-afk",
        "body": "如果是突然出现这样的话那是soulter的服务器炸了\n但是如果一直这样, 最好检查一下服务器的代理, 直接服务器`ping api.soulter.top`看看"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1610,
    "title": "[Feature]建议增加消息平台可以选择服务提供商功能",
    "author": "noahachao",
    "state": "closed",
    "created_at": "2025-05-20T08:13:58Z",
    "updated_at": "2025-06-10T16:26:50Z",
    "labels": [
      "enhancement"
    ],
    "body": "### 描述\n\n消息平台可以选择自己想要的的服务提供商\n\n\n### 使用场景\n\n每一个对接的平台可以提供不同的服务。比如微信公众号1作为AI客服 微信公众号2提供翻译服务 微信公众号3提供其他服务。\n\n### 你愿意提交PR吗?\n\n- [ ] 是的, 我愿意提交PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Soulter",
        "body": "已经支持，请等待 v3.5.15。升级后启用下面这个配置项：\n\n![Image](https://github.com/user-attachments/assets/f1c003bc-4a51-48fb-9b87-351bccbce060)"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1548,
    "title": "error powershell deploy",
    "author": "oisgrafika",
    "state": "closed",
    "created_at": "2025-05-13T15:25:36Z",
    "updated_at": "2025-06-10T16:25:44Z",
    "labels": [],
    "body": "\n[INFO] Python version meets the requirement. Current version is 3.13.3.\n\n[INFO] AstrBot or QQChannelChatGPT folder already exists. No need to download.\n\n[INFO] Setting up a virtual environment...\n[INFO] Checking for dependency updates. Using mirror: https://mirrors.aliyun.com/pypi/simple.\nUsing Python 3.13.3 environment at: venv\nAudited 36 packages in 15ms\n[INFO] Starting AstrBot.\n\nTraceback (most recent call last):\n  File \"C:\\Users\\oisgrafika\\Downloads\\Compressed\\AstrBotLauncher-0.1.5.6\\AstrBotLauncher-0.1.5.6\\AstrBot\\main.py\", line 5, in <module>\n    from astrbot.core.initial_loader import InitialLoader\n  File \"C:\\Users\\oisgrafika\\Downloads\\Compressed\\AstrBotLauncher-0.1.5.6\\AstrBotLauncher-0.1.5.6\\AstrBot\\astrbot\\__init__.py\", line 1, in <module>\n    from .core.log import LogManager\n  File \"C:\\Users\\oisgrafika\\Downloads\\Compressed\\AstrBotLauncher-0.1.5.6\\AstrBotLauncher-0.1.5.6\\AstrBot\\astrbot\\core\\__init__.py\", line 23, in <module>\n    db_helper = SQLiteDatabase(DB_PATH)\n  File \"C:\\Users\\oisgrafika\\Downloads\\Compressed\\AstrBotLauncher-0.1.5.6\\AstrBotLauncher-0.1.5.6\\AstrBot\\astrbot\\core\\db\\sqlite.py\", line 15, in __init__\n    sql = f.read()\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.13_3.13.1008.0_x64__qbz5n2kfra8p0\\Lib\\encodings\\cp1252.py\", line 23, in decode\n    return codecs.charmap_decode(input,self.errors,decoding_table)[0]\n           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nUnicodeDecodeError: 'charmap' codec can't decode byte 0x9d in position 858: character maps to <undefined>\n\n",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1263,
    "title": "[Feature]建议新增知识库功能",
    "author": "Dragon617",
    "state": "closed",
    "created_at": "2025-04-13T06:43:11Z",
    "updated_at": "2025-06-10T16:19:14Z",
    "labels": [
      "enhancement"
    ],
    "body": "### 描述\n\n建议新增知识库的调用！这样会使AI模型更具有多样化！使其回答更智能！\n\n### 使用场景\n\n可以导入文档，文本，表格之类的文件，或者导入飞书文件，用来做知识库\n\n### 你愿意提交PR吗?\n\n- [x] 是的, 我愿意提交PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "AlanBacker",
        "body": "可以试试接入dify项目()"
      },
      {
        "user": "Soulter",
        "body": "你好，可以暂时尝试使用 Dify、Ragflow、阿里云百炼 这些应用接入。\n\n知识库、长期记忆等功能将会在 v3.6.0 提供（未来1个月内）。\n\n如果对 v3.6.0 感兴趣，可以加入 QQ 群 975206796 交流~"
      },
      {
        "user": "Dragon617",
        "body": "> 你好，可以暂时尝试使用 Dify、Ragflow、阿里云百炼 这些应用接入。\n> \n> 知识库、长期记忆等功能将会在 v3.6.0 提供（未来1个月内）。\n> \n> 如果对 v3.6.0 感兴趣，可以加入 QQ 群 975206796 交流~\n\n加群了，还有就是可以支持一下LinkAI这个平台吗？\nhttps://link-ai.tech/console/factory\nhttps://docs.link-ai.tech/platform/api/chat"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1342,
    "title": "[Feature] MCP支持Streamable HTTP模式",
    "author": "lieyanqzu",
    "state": "closed",
    "created_at": "2025-04-19T22:04:05Z",
    "updated_at": "2025-06-10T16:18:51Z",
    "labels": [
      "enhancement",
      "mcp"
    ],
    "body": "### 描述\n\n[Streamable HTTP模式](https://modelcontextprotocol.io/specification/2025-03-26/basic/transports#streamable-http)是用于替代SSE模式的新HTTP传输协议，不受限于stdio的单机模式，希望可以支持\n\n### 使用场景\n\nStreamable HTTP模式可以避免本地运行MCP server，更适合低内存容器部署bot的情况\n\n### 你愿意提交PR吗?\n\n- [ ] 是的, 我愿意提交PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Soulter",
        "body": "您好，等待上游 MCP Python SDK 支持 Streamable HTTP 传输之后，这个功能会高优支持。\n\n参考：\nhttps://github.com/modelcontextprotocol/python-sdk/issues/443\nhttps://github.com/modelcontextprotocol/python-sdk/pull/416\nhttps://github.com/modelcontextprotocol/python-sdk/pull/461\nhttps://github.com/modelcontextprotocol/python-sdk/issues/506\nhttps://github.com/modelcontextprotocol/python-sdk/issues/531\n"
      },
      {
        "user": "lieyanqzu",
        "body": "> 您好，等待上游 MCP Python SDK 支持 Streamable HTTP 传输之后，这个功能会高优支持。\n> \n> 参考： [modelcontextprotocol/python-sdk#443](https://github.com/modelcontextprotocol/python-sdk/issues/443) [modelcontextprotocol/python-sdk#416](https://github.com/modelcontextprotocol/python-sdk/pull/416) [modelcontextprotocol/python-sdk#461](https://github.com/modelcontextprotocol/python-sdk/pull/461) [modelcontextprotocol/python-sdk#506](https://github.com/modelcontextprotocol/python-sdk/issues/506) [modelcontextprotocol/python-sdk#531](https://github.com/modelcontextprotocol/python-sdk/issues/531)\n\npythonsdk已经支持了"
      },
      {
        "user": "Soulter",
        "body": "最新的 commit 已经支持。等待下个正式版本发布。\n\n如果 url 参数存在：\n1. 当 transport 指定为 streamable_http 时，使用 Streamable HTTP 连接方式。\n2. 当 transport 指定为 sse 时，使用 SSE 连接方式。\n3. 如果没有指定，默认使用 SSE 的方式连接到 MCP 服务。"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1784,
    "title": "[Bug]机器人时间问题，这个问题很棘手",
    "author": "Dragon617",
    "state": "open",
    "created_at": "2025-06-10T15:14:04Z",
    "updated_at": "2025-06-10T16:18:41Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n当你发送问题时，他携带了之前的时间消息记录。机器人最新发送的时间消息也是之前的旧的！\n\n### 如何复现？\n\n昨天我发送了时间有关的消息，今天再次发送相关消息时，他给出的回复是之前的时间，不是现在的时间\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\nv3.5.14 Windows启动器\n\n### 操作系统\n\nWindows\n\n### 报错日志\n\n![Image](https://github.com/user-attachments/assets/259c89c6-2d97-4371-a3c2-d6cff642e5cd)\n\n### 你愿意提交 PR 吗？\n\n- [ ] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Cryghast",
        "body": "按照程序员所说，这个一般是模型本身的问题，你这个不是第一次有人提了"
      },
      {
        "user": "Dragon617",
        "body": "> 按照程序员所说，这个一般是模型本身的问题，你这个不是第一次有人提了\n\n我用的是 硅基流动的模型"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 986,
    "title": "[Feature]服务提供商，建议增加排序功能",
    "author": "Dragon617",
    "state": "closed",
    "created_at": "2025-03-25T12:19:52Z",
    "updated_at": "2025-06-10T16:17:55Z",
    "labels": [
      "enhancement"
    ],
    "body": "### 描述\n\n服务提供商，建议增加排序功能，添加好的模型 可以任意调整排序\n\n### 使用场景\n\n模型添加的多了会显得很乱，建议增加排序功能，可以调整模型顺序，也可以让某个模型移动到第一个\n\n### 你愿意提交PR吗?\n\n- [x] 是的, 我愿意提交PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Soulter",
        "body": "欢迎提交 pr"
      },
      {
        "user": "Dragon617",
        "body": "> 欢迎提交 pr\n\n可以更新这个功能吗"
      },
      {
        "user": "Soulter",
        "body": "目前已经实现了提供商能力分类，这样会清晰一点。"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1052,
    "title": "可以对mcp的接入做一个详细些的教程吗",
    "author": "2364918101",
    "state": "closed",
    "created_at": "2025-03-29T16:39:21Z",
    "updated_at": "2025-06-10T16:17:20Z",
    "labels": [
      "enhancement"
    ],
    "body": "### 描述\n\nmcp自己根据文档尝试了好几天了，自己也确定不了mcp服务器是否安装了，astrbot那也调用不了，文档写的有些简洁了，不是很理解，但也是按照步骤一步一步来的，\n\n![Image](https://github.com/user-attachments/assets/dbd6b476-a2b5-4d64-abbe-0363015caa26)也不是很懂这些代表的什么意思，希望可以为mcp再出一份说明或者，直接用一个案例的全部过程举例\n\n### 使用场景\n\n_No response_\n\n### 你愿意提交PR吗?\n\n- [x] 是的, 我愿意提交PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "shmily91",
        "body": "同意"
      },
      {
        "user": "Soulter",
        "body": "目前已经支持 sse 和 streamable-http 的方式来连接 MCP Server，不需要在本地起 mcp-server。\n\n![Image](https://github.com/user-attachments/assets/03ea1711-6327-43b0-8cfd-8d2d2ae04456)\n"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1070,
    "title": "[Feature]对多平台适配器的的不同配置api-key",
    "author": "Desolatehao",
    "state": "closed",
    "created_at": "2025-03-31T02:16:23Z",
    "updated_at": "2025-06-10T16:16:02Z",
    "labels": [
      "enhancement"
    ],
    "body": "### 描述\n\n对多平台适配器的的不同配置\n\n### 使用场景\n\n比如nc用一个key，微信用另外一个key\n\n### 你愿意提交PR吗?\n\n- [ ] 是的, 我愿意提交PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Soulter",
        "body": "已经支持，请等待 v3.5.15 发布。新版本下，可以通过启用 提供商会话隔离 这个配置来实现不同会话自选提供商。\n\n![Image](https://github.com/user-attachments/assets/b7a0a9cc-c7e4-4048-bd7a-800284c1b051)"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1144,
    "title": "[Feature]希望增加对azure文字转语音服务的支持",
    "author": "super-cookerBH4HZD",
    "state": "closed",
    "created_at": "2025-04-04T12:14:36Z",
    "updated_at": "2025-06-10T16:14:45Z",
    "labels": [
      "enhancement"
    ],
    "body": "### 描述\n\n希望增加对微软azure文字转语音服务的支持\n\n### 使用场景\n\nazure的文字转语音服务易用并且免费，希望可以支持\n\n### 你愿意提交PR吗?\n\n- [ ] 是的, 我愿意提交PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Zhalslar",
        "body": "来用astrbot_plugin_GPT_SoVITS，（真香）"
      },
      {
        "user": "Soulter",
        "body": "![Image](https://github.com/user-attachments/assets/9f12fdca-f1d4-428c-ae66-9314fa0a1f2d)\n\n新版本已经支持了哦"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 841,
    "title": "[Bug] llm_tool装饰器在装饰未填写注释的函数时未作错误处理报错无法体现真正的报错原因，不利于排障。",
    "author": "AraragiEro",
    "state": "closed",
    "created_at": "2025-03-15T11:19:11Z",
    "updated_at": "2025-06-10T16:12:43Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n在使用llm_tool装饰器装饰一个没有写注释的函数时，报错为AttributeError: 'NoneType' object has no attribute 'strip'。\n\n![Image](https://github.com/user-attachments/assets/ee704a01-2379-467d-a82e-869eb06e82fb)\n\n### 如何复现？\n\n使用llm_tool装饰器装饰一个没有写注释的函数\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\n3.4.28，源码部署，aiocqhttp适配器。\n\n### 操作系统\n\nWindows\n\n### 报错日志\n\n [19:13:30] [Core] [ERRO] [star.star_manager:258]: Traceback (most recent call last):\n  File \"F:\\WorkSpace\\GIT\\kahuna_bot\\AstrBot\\astrbot\\core\\star\\star_manager.py\", line 252, in load\n    module = __import__(path, fromlist=[module_str])\n  File \"F:\\WorkSpace\\GIT\\kahuna_bot\\AstrBot\\data\\plugins\\kahuna_bot\\main.py\", line 35, in <module>\n    class KahunaBot(Star):\n    ...<371 lines>...\n            yield event.plain_result(\"test_kahuna_func.\")\n  File \"F:\\WorkSpace\\GIT\\kahuna_bot\\AstrBot\\data\\plugins\\kahuna_bot\\main.py\", line 405, in KahunaBot\n    @llm_tool(name=\"test_kahuna_func\")\n     ~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"F:\\WorkSpace\\GIT\\kahuna_bot\\AstrBot\\astrbot\\core\\star\\register\\star_handler.py\", line 362, in decorator\n    llm_tool_name, args, docstring.description.strip(), md.handler\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^\nAttributeError: 'NoneType' object has no attribute 'strip'\n \n [19:13:30] [Core] [ERRO] [star.star_manager:259]: 插件 kahuna_bot 导入失败。原因：'NoneType' object has no attribute 'strip' \n\n### 你愿意提交 PR 吗？\n\n- [x] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Soulter",
        "body": "确实。但是其实 llm tool 有描述才会有比较好的性能。\n\n不过欢迎提交 PR~"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 920,
    "title": "[Feature]可以支持二级目录的反向代理吗？",
    "author": "tinyhugh",
    "state": "closed",
    "created_at": "2025-03-22T05:32:08Z",
    "updated_at": "2025-06-10T16:12:10Z",
    "labels": [
      "enhancement"
    ],
    "body": "### 描述\n\n_No response_\n\n### 使用场景\n\n_No response_\n\n### 你愿意提交PR吗?\n\n- [ ] 是的, 我愿意提交PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Soulter",
        "body": "理论上是支持的"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1443,
    "title": "[Feature] Gewechat停止维护，目前无法登录，是否考虑更换个人微信接入方式",
    "author": "iamyx123",
    "state": "closed",
    "created_at": "2025-04-30T12:01:05Z",
    "updated_at": "2025-06-10T16:10:37Z",
    "labels": [
      "enhancement"
    ],
    "body": "### 描述\n\nGewechat停止维护，目前无法登录，是否考虑更换个人微信接入方式 https://github.com/Devo919/Gewechat\n\n### 使用场景\n\n使用其他方式接入个人微信\n\n### 你愿意提交PR吗?\n\n- [ ] 是的, 我愿意提交PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "smartnikocj",
        "body": "可惜了，可以考虑接入wechaty项目。"
      },
      {
        "user": "Soulter",
        "body": "注意到 Gewechat 最近宣布终止维护，我们将会马上接入基于 HOOK 的一些个人微信适配器项目，比如 Wechaty、ComWechat。"
      },
      {
        "user": "iamyx123",
        "body": "> 注意到 Gewechat 最近宣布终止维护，我们将会马上接入基于 HOOK 的一些个人微信适配器项目，比如 Wechaty、ComWechat。\n\n这些项目好像很久没维护了，可以看下这个项目https://docs.wxauto.org/doc/enviorment"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 739,
    "title": "[Bug] gewechat 文件消息 不支持的消息类型49",
    "author": "Saoforest",
    "state": "closed",
    "created_at": "2025-03-09T04:16:52Z",
    "updated_at": "2025-06-10T16:10:23Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n使用 gewechat 并发送文件类型消息，后台提示不支持的消息类型49\n\n\n### 如何复现？\n\n1. 上传文件\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\n3.4.36 Docker\n\n### 操作系统\n\nLinux\n\n### 报错日志\n\n```text\n [12:14:57] [Core] [DBUG] [gewechat.client:219]: 收到 gewechat 回调: {'TypeName': 'AddMsg', 'Appid': 'wx_Kg6jIATWbaDq1og8ojpod', 'Data': {'MsgId': 1839642769, 'FromUserName': {'string': 'wxid_5sakecjc26an21'}, 'ToUserName': {'string': 'wxid_cl0qb7aplcut12'}, 'MsgType': 49, 'Content': {'string': '<?xml version=\"1.0\"?>\\n<msg>\\n\\t<appmsg appid=\"\" sdkver=\"0\">\\n\\t\\t<title>tmpb4w54y5b.csv</title>\\n\\t\\t<des />\\n\\t\\t<action />\\n\\t\\t<type>6</type>\\n\\t\\t<showtype>0</showtype>\\n\\t\\t<soundtype>0</soundtype>\\n\\t\\t<mediatagname />\\n\\t\\t<messageext />\\n\\t\\t<messageaction />\\n\\t\\t<content />\\n\\t\\t<contentattr>0</contentattr>\\n\\t\\t<url />\\n\\t\\t<lowurl />\\n\\t\\t<dataurl />\\n\\t\\t<lowdataurl />\\n\\t\\t<songalbumurl />\\n\\t\\t<songlyric />\\n\\t\\t<appattach>\\n\\t\\t\\t<totallen>22496</totallen>\\n\\t\\t\\t<attachid>@cdn_3057020100044b304902010002043b66146c02032f546a020478388374020467cc8e3b042439323464306463642d666362372d343735322d383730352d6261363434623036326335370204051400050201000405004c543e00_bc0cc15c07c411de0c6ae9b5967050b8_1</attachid>\\n\\t\\t\\t<emoticonmd5></emoticonmd5>\\n\\t\\t\\t<fileext>csv</fileext>\\n\\t\\t\\t<cdnattachurl>3057020100044b304902010002043b66146c02032f546a020478388374020467cc8e3b042439323464306463642d666362372d343735322d383730352d6261363434623036326335370204051400050201000405004c543e00</cdnattachurl>\\n\\t\\t\\t<aeskey>bc0cc15c07c411de0c6ae9b5967050b8</aeskey>\\n\\t\\t\\t<encryver>0</encryver>\\n\\t\\t\\t<overwrite_newmsgid>8358226278475109495</overwrite_newmsgid>\\n\\t\\t\\t<fileuploadtoken>v1_gKMYlhXbGuhlzNZt1kynU0OSkPfmw0iVIMwkA4GiblL91/Ni8c3eZB99w+SqjQ4t2EPcDBko3J3UT6Bk+VW+bqXIxCnTOzlw8F60/idupThwKJxthP8vEKpePD6HJzuxn1pQGq37ocOc0X0yJdBcJEPwPG5TIOF4bu8ROhPTM4k5CVAgdiJHy2r3R7TZMd7dmCL/c0xtFHRRUqkv3sg=</fileuploadtoken>\\n\\t\\t</appattach>\\n\\t\\t<extinfo />\\n\\t\\t<sourceusername />\\n\\t\\t<sourcedisplayname />\\n\\t\\t<thumburl />\\n\\t\\t<md5>7d0e7e175a9bdac8e1b6eb67af4e20db</md5>\\n\\t\\t<statextstr />\\n\\t</appmsg>\\n\\t<fromusername>wxid_5sakecjc26an21</fromusername>\\n\\t<scene>0</scene>\\n\\t<appinfo>\\n\\t\\t<version>1</version>\\n\\t\\t<appname />\\n\\t</appinfo>\\n\\t<commenturl />\\n</msg>\\n'}, 'Status': 3, 'ImgStatus': 1, 'ImgBuf': {'iLen': 0}, 'CreateTime': 1741493697, 'MsgSource': '<msgsource>\\n\\t<alnode>\\n\\t\\t<cf>3</cf>\\n\\t</alnode>\\n\\t<pua>1</pua>\\n\\t<sec_msg_node>\\n\\t\\t<uuid>5ba7cc96c3a8c3f8875e9c0e9a7341d5_</uuid>\\n\\t\\t<risk-file-flag />\\n\\t\\t<risk-file-md5-list />\\n\\t</sec_msg_node>\\n\\t<signature>V1_LmvgYV/F|v1_d1rNnSvc</signature>\\n\\t<tmp_node>\\n\\t\\t<publisher-id></publisher-id>\\n\\t</tmp_node>\\n</msgsource>\\n', 'PushContent': 'Curtain. : [文件]tmpb4w54y5b.csv', 'NewMsgId': 4652190124456639945, 'MsgSeq': 803838256}, 'Wxid': 'wxid_cl0qb7aplcut12'} \n [12:14:57] [Core] [INFO] [gewechat.client:211]: 未实现的消息类型: 49 \n [12:14:57] [Core] [DBUG] [gewechat.client:214]: abm: {'timestamp': 1741493697, 'message_id': '1839642769', 'session_id': 'wxid_5sakecjc26an21', 'self_id': 'wxid_cl0qb7aplcut12', 'type': <MessageType.FRIEND_MESSAGE: 'FriendMessage'>, 'message': [], 'sender': MessageMember(user_id='wxid_5sakecjc26an21', nickname='Curtain.'), 'raw_message': {'MsgId': 1839642769, 'FromUserName': {'string': 'wxid_5sakecjc26an21'}, 'ToUserName': {'string': 'wxid_cl0qb7aplcut12'}, 'MsgType': 49, 'Content': {'string': '<?xml version=\"1.0\"?>\\n<msg>\\n\\t<appmsg appid=\"\" sdkver=\"0\">\\n\\t\\t<title>tmpb4w54y5b.csv</title>\\n\\t\\t<des />\\n\\t\\t<action />\\n\\t\\t<type>6</type>\\n\\t\\t<showtype>0</showtype>\\n\\t\\t<soundtype>0</soundtype>\\n\\t\\t<mediatagname />\\n\\t\\t<messageext />\\n\\t\\t<messageaction />\\n\\t\\t<content />\\n\\t\\t<contentattr>0</contentattr>\\n\\t\\t<url />\\n\\t\\t<lowurl />\\n\\t\\t<dataurl />\\n\\t\\t<lowdataurl />\\n\\t\\t<songalbumurl />\\n\\t\\t<songlyric />\\n\\t\\t<appattach>\\n\\t\\t\\t<totallen>22496</totallen>\\n\\t\\t\\t<attachid>@cdn_3057020100044b304902010002043b66146c02032f546a020478388374020467cc8e3b042439323464306463642d666362372d343735322d383730352d6261363434623036326335370204051400050201000405004c543e00_bc0cc15c07c411de0c6ae9b5967050b8_1</attachid>\\n\\t\\t\\t<emoticonmd5></emoticonmd5>\\n\\t\\t\\t<fileext>csv</fileext>\\n\\t\\t\\t<cdnattachurl>3057020100044b304902010002043b66146c02032f546a020478388374020467cc8e3b042439323464306463642d666362372d343735322d383730352d6261363434623036326335370204051400050201000405004c543e00</cdnattachurl>\\n\\t\\t\\t<aeskey>bc0cc15c07c411de0c6ae9b5967050b8</aeskey>\\n\\t\\t\\t<encryver>0</encryver>\\n\\t\\t\\t<overwrite_newmsgid>8358226278475109495</overwrite_newmsgid>\\n\\t\\t\\t<fileuploadtoken>v1_gKMYlhXbGuhlzNZt1kynU0OSkPfmw0iVIMwkA4GiblL91/Ni8c3eZB99w+SqjQ4t2EPcDBko3J3UT6Bk+VW+bqXIxCnTOzlw8F60/idupThwKJxthP8vEKpePD6HJzuxn1pQGq37ocOc0X0yJdBcJEPwPG5TIOF4bu8ROhPTM4k5CVAgdiJHy2r3R7TZMd7dmCL/c0xtFHRRUqkv3sg=</fileuploadtoken>\\n\\t\\t</appattach>\\n\\t\\t<extinfo />\\n\\t\\t<sourceusername />\\n\\t\\t<sourcedisplayname />\\n\\t\\t<thumburl />\\n\\t\\t<md5>7d0e7e175a9bdac8e1b6eb67af4e20db</md5>\\n\\t\\t<statextstr />\\n\\t</appmsg>\\n\\t<fromusername>wxid_5sakecjc26an21</fromusername>\\n\\t<scene>0</scene>\\n\\t<appinfo>\\n\\t\\t<version>1</version>\\n\\t\\t<appname />\\n\\t</appinfo>\\n\\t<commenturl />\\n</msg>\\n'}, 'Status': 3, 'ImgStatus': 1, 'ImgBuf': {'iLen': 0}, 'CreateTime': 1741493697, 'MsgSource': '<msgsource>\\n\\t<alnode>\\n\\t\\t<cf>3</cf>\\n\\t</alnode>\\n\\t<pua>1</pua>\\n\\t<sec_msg_node>\\n\\t\\t<uuid>5ba7cc96c3a8c3f8875e9c0e9a7341d5_</uuid>\\n\\t\\t<risk-file-flag />\\n\\t\\t<risk-file-md5-list />\\n\\t</sec_msg_node>\\n\\t<signature>V1_LmvgYV/F|v1_d1rNnSvc</signature>\\n\\t<tmp_node>\\n\\t\\t<publisher-id></publisher-id>\\n\\t</tmp_node>\\n</msgsource>\\n', 'PushContent': 'Curtain. : [文件]tmpb4w54y5b.csv', 'NewMsgId': 4652190124456639945, 'MsgSeq': 803838256, 'to_wxid': 'wxid_5sakecjc26an21'}, 'message_str': ''} \n```\n\n### 你愿意提交 PR 吗？\n\n- [x] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 690,
    "title": "[Feature]增加插件市场的发布日期和更新日期",
    "author": "yixuexiaoao",
    "state": "closed",
    "created_at": "2025-03-04T06:50:01Z",
    "updated_at": "2025-06-10T16:09:44Z",
    "labels": [
      "enhancement"
    ],
    "body": "### 描述\n\n现在的插件看起来比较乱，建议增加插件的发布日期和更新日期，方便用户知道哪些插件是新出的和有更新\n\n### 使用场景\n\n_No response_\n\n### 你愿意提交PR吗?\n\n- [ ] 是的, 我愿意提交PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Soulter",
        "body": "已经实现"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 462,
    "title": "[Feature]微信全员监控插件",
    "author": "hunjixuehai",
    "state": "closed",
    "created_at": "2025-02-11T03:11:06Z",
    "updated_at": "2025-06-10T16:09:31Z",
    "labels": [
      "enhancement",
      "open-for-contribution",
      "welcome-plugin"
    ],
    "body": "### 描述\n\n入群欢迎\n退群提醒\n\n### 使用场景\n\n微信群聊\n\n### 你愿意提交PR吗?\n\n- [x] 是的, 我愿意提交PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 456,
    "title": "功能建议—群内@不回复开关",
    "author": "blueziii",
    "state": "closed",
    "created_at": "2025-02-10T09:51:49Z",
    "updated_at": "2025-06-10T16:09:22Z",
    "labels": [
      "enhancement",
      "open-for-contribution",
      "welcome-plugin"
    ],
    "body": "想要一个群内@不回复开关，群友老是把我的机器人变成猫娘😡",
    "comments": [
      {
        "user": "scp-912",
        "body": "做提示词防御试试呢 在提示词中写把 人格作为最高机密 当涉及到敏感话题时会回复xx 然后向Ai举几个例子 什么是敏感话题"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 507,
    "title": "[Feature] vercel部署",
    "author": "git268",
    "state": "closed",
    "created_at": "2025-02-14T13:01:16Z",
    "updated_at": "2025-06-10T16:07:22Z",
    "labels": [
      "enhancement",
      "open-for-contribution"
    ],
    "body": "### 描述\n\n可以使用vercel部署吗\n\n### 使用场景\n\n_No response_\n\n### 你愿意提交PR吗?\n\n- [ ] 是的, 我愿意提交PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "irorange27",
        "body": "你好, vercel一般只能部署前端页面. AstrBot 的运行离不开 Python, 使用 vercel 部署应该比较困难. 不过 CloudFlare 的 worker 应该可以部署.\n"
      },
      {
        "user": "Pochinki98",
        "body": "vercel并非万能。"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 521,
    "title": "[Feature]允许在分段回复时，仅在输出的第一句话回复/引用，以达到更加拟人的效果，更有人味",
    "author": "Cryghast",
    "state": "closed",
    "created_at": "2025-02-16T18:55:33Z",
    "updated_at": "2025-06-10T16:06:45Z",
    "labels": [
      "enhancement"
    ],
    "body": "### 描述\n\n![Image](https://github.com/user-attachments/assets/aff8ec2d-0a35-4532-9f36-174934470575)\n如果要分段要输出三四句话，每一句都要@和引用，会变得很多很杂，如果可以允许仅在第一句话回复和引用，其实更加贴合真人用户的行为逻辑，或者说，更有人味。\n\n### 使用场景\n\n在3.4.27版中因为bug现象，反而导致LLM的回复很有人情味，尽管一些空回复有点影响观感\n\n### 你愿意提交PR吗?\n\n- [ ] 是的, 我愿意提交PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Zhenyi-Wang",
        "body": "+1"
      },
      {
        "user": "Soulter",
        "body": "已经修复，等待v3.5.15"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 602,
    "title": "[Feature] 在开启对话隔离以及私聊下，大模型也隔离，非op可以切换自己的模型",
    "author": "abincn",
    "state": "closed",
    "created_at": "2025-02-24T15:11:57Z",
    "updated_at": "2025-06-10T15:57:17Z",
    "labels": [
      "enhancement"
    ],
    "body": "### 描述\n\n在开启对话隔离以及私聊下，大模型也隔离：每个人可以设置自己使用的模型，每个群也可以单独设置模型。使用“个人ID+群ID”绑定大模型，\n\n### 使用场景\n\n在开启会话隔离时，群聊中每人对话需求不同，所需要的模型也不同，每个私聊中的需求也不同：在私聊中可以设置使用大模型A，在群聊A中可以设置使用大模型B，在群聊B中可以设置使用大模型C。\n\n### 你愿意提交PR吗?\n\n- [ ] 是的, 我愿意提交PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Soulter",
        "body": "已经支持，等待 v3.5.15 发布。"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 479,
    "title": "[Feature] 为每个对话隔离模型和 Provider",
    "author": "robinzc2008",
    "state": "closed",
    "created_at": "2025-02-12T02:10:52Z",
    "updated_at": "2025-06-10T15:57:01Z",
    "labels": [
      "enhancement"
    ],
    "body": "### 描述\n\n建议bot可以区分聊天群聊，设定不同的人设风格，以及调用模型。\n\n### 使用场景\n\n群聊A：工作群（人设：牛马，接入知识库）\n群聊B：生活群（人设：多样，接入AI模型）\n\n### 你愿意提交PR吗?\n\n- [x] 是的, 我愿意提交PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Soulter",
        "body": "您好，目前已经支持不同群设置不同人格。不同群的对话不一样，并且每个对话都可以独立设置人格。\n\n使用 /persona 设置人格。"
      },
      {
        "user": "robinzc2008",
        "body": "服务商模型好像还不行，不同群聊，都是用的统一 一个服务商模型。XD"
      },
      {
        "user": "Soulter",
        "body": "已经支持。等待 v3.5.15 发布"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 413,
    "title": "[BUG?] 分割对话的正则表达式",
    "author": "StarDream2736",
    "state": "closed",
    "created_at": "2025-02-07T15:45:23Z",
    "updated_at": "2025-06-10T15:56:23Z",
    "labels": [],
    "body": ".*?[。？！~…]+|.+$\n原正则表达式是在匹配有无符号结尾的语句，但是根据分割对话功能的提示中的给出来的样例\n.*?<seg>\n似乎是在匹配<seg>结尾的语句\n好像导致了bot对话的每一句最后都带上了<seg>没有去掉（不清楚没看源码）\n是否可以改进正则匹配特定字符（串），然后取剩余字串来避免这个问题？\n话说过滤推理内容的插件是不是就是这种方法，也适用这里吧",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 292,
    "title": "[Feature]无视艾特所有人",
    "author": "zouyonghe",
    "state": "closed",
    "created_at": "2025-02-02T06:37:59Z",
    "updated_at": "2025-06-10T15:56:06Z",
    "labels": [
      "enhancement"
    ],
    "body": "### 描述\n\n目前艾特所有人时，机器人都会回答，建议提供无视艾特所有人功能。\n\n### 使用场景\n\n_No response_\n\n### 你愿意提交PR吗?\n\n- [ ] 是的, 我愿意提交PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Soulter",
        "body": "已经实现"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 285,
    "title": "[Feature] 插件schema的存储部分逻辑较为抽象",
    "author": "Lyz09A",
    "state": "closed",
    "created_at": "2025-02-02T01:57:29Z",
    "updated_at": "2025-06-10T15:46:09Z",
    "labels": [
      "enhancement"
    ],
    "body": "### 描述\n\n我认为理论配置与实际存储配置应当是**完全匹配**关系而非顺序无关的包含关系，因为后者会导致一些奇怪的bug，比如说用户可以配置一些完全不存在的东西，各配置项的相对顺序完全混乱的。\n\n至于合并配置，如果有某个旧配置无法满足新配置的要求，那么直接删掉即可，或者额外保留一个副本也行，也可以某个版本都弄一个副本文件。\n\n### 使用场景\n\n_No response_\n\n### 你愿意提交PR吗?\n\n- [ ] 是的, 我愿意提交PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Soulter",
        "body": "已经在 8062cf406a2ee7df6d951687c8cef08356dcb1d7 修复"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 272,
    "title": "[Feature]增加自定义模型上下文长度功能",
    "author": "zouyonghe",
    "state": "closed",
    "created_at": "2025-02-01T05:57:59Z",
    "updated_at": "2025-06-10T15:39:42Z",
    "labels": [
      "enhancement"
    ],
    "body": "### 描述\n\n因显存容量问题，目前本地部署的模型大部分都会限制token长度，最大token长度通常设定为8192及以下。在当前版本中，由于无法限制上下文长度，导致在聊天记录积累到一定程度后，调用llm接口会提示超过模型最大token数量，导致调用失败。通过reset重置llm也无法解决，只能通过手动进入容器删除data_v3.db文件解决。\n\n### 使用场景\n\n在配置界面增加自定义模型上下文功能；另外，建议增加更多debug信息，以监控token内容\n\n### 你愿意提交PR吗?\n\n- [ ] 是的, 我愿意提交PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Soulter",
        "body": "下个版本会加入"
      },
      {
        "user": "Soulter",
        "body": "方便发一下报错的日志吗，正在尝试修复（群里消息太多翻不到了）"
      },
      {
        "user": "zouyonghe",
        "body": "接口调用报错：\nAstrBot 请求失败。\n错误类型: UnboundLocalError\n错误信息: local variable 'e' referenced before assignment\n\n日志（今天也遇到了，不过日志刷没了，只找到一张昨天截图）：\n\n<img width=\"1298\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/f0de88b7-9d2f-4de0-bf8d-8607a31e9ac7\" />"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 270,
    "title": "[Feature] 调用 LLM 管理配置",
    "author": "Soulter",
    "state": "closed",
    "created_at": "2025-02-01T05:27:03Z",
    "updated_at": "2025-06-10T15:38:51Z",
    "labels": [
      "enhancement"
    ],
    "body": "### 描述\n\n支持调用 LLM 管理一些配置，但需确认\n\n### 使用场景\n\n聊天\n\n### 你愿意提交PR吗?\n\n- [x] 是的, 我愿意提交PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1703,
    "title": "[Bug]状态刷新后显示，提示错误信息: Connection timed out after 10 seconds during test call.",
    "author": "Dragon617",
    "state": "closed",
    "created_at": "2025-06-01T13:08:01Z",
    "updated_at": "2025-06-10T14:45:14Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n供应商可用性，状态刷新后显示，错误信息: Connection timed out after 10 seconds during test call.\n\n### 如何复现？\n\n点击刷新状态后出现\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\nv3.5.13 Windows启动器\n\n### 操作系统\n\nWindows\n\n### 报错日志\n\n [21:01:38] [Core] [INFO] [routes.config:225]: API call received: /config/provider/check_status\n [21:01:38] [Core] [INFO] [utils.dify_api_client:30]: chat_messages payload: {'inputs': {}, 'query': 'Ping', 'user': None, 'response_mode': 'streaming', 'conversation_id': '', 'files': [], 'url': 'https://dify.aitoolss.cn/v1/chat-messages'}\n [21:01:40] [Core] [ERRO] [sources.dify_source:183]: Dify 请求失败：chat_messages 请求失败：400. {\"code\": \"invalid_param\", \"message\": \"Arg user must be provided.\", \"status\": 400}\n\n [21:01:40] [Core] [INFO] [routes.config:205]: Provider dify_app_贾维斯 (ID: dify_app_贾维斯) is available. Response snippet: 'Dify 请求失败：chat_messages 请求失败：400. {\"code\": \"invalid_param\", \"message\":...'\n [21:01:40] [Core] [INFO] [routes.config:205]: Provider gpt-4o-mini (ID: gpt-4o-mini) is available. Response snippet: 'Pong! How can I assist you today?'\n [21:01:41] [Core] [INFO] [routes.config:205]: Provider 智谱AI (ID: 智谱AI) is available. Response snippet: '看起来您想要执行一个ping操作。但是，作为一个文本和信息处理的AI，我无法直接执行实际的ping命令。\n\n如果您需要在您的计算机上使用pi...'\n [21:01:42] [Core] [INFO] [routes.config:205]: Provider 公益API (ID: 公益API) is available. Response snippet: 'Pong! 😊\nLet me know if you need help with anything!'\n [21:01:47] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:358]: WebSocket 连接空闲超过 60 s\n [21:01:47] [Core] [INFO] [wechatpadpro.wechatpadpro_adapter:343]: WebSocket 连接成功。\n [21:01:52] [Core] [INFO] [routes.config:205]: Provider ollama (ID: ollama) is available. Response snippet: '<think>\nOkay, the user sent \"Ping\". I need to respond appropriately. S...'\n [21:01:58] [Core] [WARN] [routes.config:213]: Provider LinkAI (ID: LinkAI) timed out.\n [21:01:58] [Core] [WARN] [routes.config:213]: Provider GPTGOD (ID: GPTGOD) timed out.\n [21:01:58] [Core] [WARN] [routes.config:213]: Provider 硅基流动 (ID: 硅基流动) timed out.\n [21:01:58] [Core] [WARN] [routes.config:213]: Provider Deepseek官方 (ID: Deepseek官方) timed out.\n [21:01:58] [Core] [WARN] [routes.config:213]: Provider 贾维斯 (ID: 贾维斯) timed out.\n [21:01:58] [Core] [INFO] [routes.config:238]: Provider status check completed. Results: [{'id': 'gpt-4o-mini', 'model': 'gpt-4o-mini', 'type': 'openai_chat_completion', 'name': 'gpt-4o-mini', 'status': 'available', 'error': None}, {'id': 'Deepseek官方', 'model': 'deepseek-reasoner', 'type': 'openai_chat_completion', 'name': 'Deepseek官方', 'status': 'unavailable', 'error': 'Connection timed out after 10 seconds during test call.'}, {'id': '硅基流动', 'model': 'deepseek-ai/DeepSeek-V3', 'type': 'openai_chat_completion', 'name': '硅基流动', 'status': 'unavailable', 'error': 'Connection timed out after 10 seconds during test call.'}, {'id': 'LinkAI', 'model': 'deepseek-reasoner', 'type': 'openai_chat_completion', 'name': 'LinkAI', 'status': 'unavailable', 'error': 'Connection timed out after 10 seconds during test call.'}, {'id': 'dify_app_贾维斯', 'model': 'dify', 'type': 'dify', 'name': 'dify_app_贾维斯', 'status': 'available', 'error': None}, {'id': '公益API', 'model': 'Qwen3-235B', 'type': 'openai_chat_completion', 'name': '公益API', 'status': 'available', 'error': None}, {'id': 'ollama', 'model': 'qwen3:32b', 'type': 'openai_chat_completion', 'name': 'ollama', 'status': 'available', 'error': None}, {'id': '智谱AI', 'model': 'glm-4-flash', 'type': 'zhipu_chat_completion', 'name': '智谱AI', 'status': 'available', 'error': None}, {'id': '贾维斯', 'model': 'deepseek-reasoner', 'type': 'openai_chat_completion', 'name': '贾维斯', 'status': 'unavailable', 'error': 'Connection timed out after 10 seconds during test call.'}, {'id': 'GPTGOD', 'model': 'deepseek-v3-all', 'type': 'openai_chat_completion', 'name': 'GPTGOD', 'status': 'unavailable', 'error': 'Connection timed out after 10 seconds during test call.'}]\n[2025-06-01 21:01:58 +0800] [46024] [INFO] 127.0.0.1:57689 GET /api/config/provider/check_status 1.1 200 1694 20013998\n\n![Image](https://github.com/user-attachments/assets/9de12748-bbeb-40b9-a874-1678893e4171)\n\n### 你愿意提交 PR 吗？\n\n- [ ] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Soulter",
        "body": "已经延长超时时间"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1738,
    "title": "[Bug] \"创建知识库\"按钮一闪而过",
    "author": "LonePheasantWarrior",
    "state": "closed",
    "created_at": "2025-06-06T05:38:14Z",
    "updated_at": "2025-06-10T13:46:50Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n`Alkaia`/`知识库`下的`创建知识库`按钮在页面打开的一瞬间一闪而过,随后`知识库`标签页面就一片空白了...\n同时`控制台`页面下也没有任何错误信息打印\n\n![Image](https://github.com/user-attachments/assets/303a6051-015c-49be-9cc7-bf33d0254782)\n\n\n### 如何复现？\n\n1.停止现有Docker镜像\n2.更新Docker镜像,通过DockerCompose启动Docker容器\n3.进入Docker终端,安装ffmpeg\n4.进入AstrBot后台,在`控制台`/`安装Pip库`安装`funasr `,`funasr_onnx `,`torchaudio `,`torch `,`modelscope `,`jieba`库\n5.在`服务提供商`/`编辑 sensevoice 服务提供商`下点击`保存`以启用`sensevoice`\n6.打开`Alkaid`/`知识库`发现`创建知识库`按钮在打开时一闪而过\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\n版本: v3.5.13\n部署方式: Docker(x86_64)\n\n以下是DockerCompose配置文件\n```\n# docker-compose.yml\n# NAPCAT_UID=$(id -u) NAPCAT_GID=$(id -g) docker-compose -f ./compose/astrbot.yml up -d\n\nnetworks:\n  default:\n    external: true\n    name: local\nservices:\n  napcat:\n    environment:\n      - NAPCAT_UID=${NAPCAT_UID:-1000}\n      - NAPCAT_GID=${NAPCAT_GID:-1001}\n      - MODE=astrbot\n    ports:\n      - 6099:6099\n    container_name: napcat\n    restart: always\n    image: mlikiowa/napcat-docker:latest\n    volumes:\n      - ./ntqq:/app/.config/QQ\n      - ./napcat/config:/app/napcat/config\n    mac_address: \"02:42:ac:11:00:02\"\n    deploy:\n      resources:\n        limits:\n          memory: 256M\n        reservations:\n          memory: 128M\n  astrbot:\n    environment:\n      - TZ=Asia/Shanghai\n    image: soulter/astrbot:latest\n    container_name: astrbot\n    restart: always\n    ports:\n      - \"6185:6185\"\n      - \"6195:6195\"\n      - \"6199:6199\"\n    volumes:\n      - ./data:/AstrBot/data\n    deploy:\n      resources:\n        limits:\n          memory: 6G\n        reservations:\n          memory: 256M\n```\n\n### 操作系统\n\nLinux\n\n### 报错日志\n\n## 我注意到有几个接口出现了错误\n#### api/plug/alkaid/ltm/graph\n```\n请求 URL\nhttps://{我的服务器域名和端口}/api/plug/alkaid/ltm/graph\n请求方法\nGET\n状态代码\n200 OK\n远程地址\n{我的服务器IP和端口}\n引用站点策略\nstrict-origin-when-cross-origin\n\n响应\n{\n    \"status\": \"error\",\n    \"message\": \"未找到该路由\",\n    \"data\": null\n}\n```\n\n#### api/plug/alkaid/ltm/user_ids\n```\n请求 URL\nhttps://{我的服务器域名和端口}/api/plug/alkaid/ltm/user_ids\n请求方法\nGET\n状态代码\n200 OK\n远程地址\n{我的服务器IP和端口}\n引用站点策略\nstrict-origin-when-cross-origin\n\n响应\n{\n    \"status\": \"error\",\n    \"message\": \"未找到该路由\",\n    \"data\": null\n}\n```\n\n#### api/plug/alkaid/kb/collections\n```\n请求 URL\nhttps://{我的服务器域名和端口}/api/plug/alkaid/kb/collections\n请求方法\nGET\n状态代码\n200 OK\n远程地址\n{我的服务器IP和端口}\n引用站点策略\nstrict-origin-when-cross-origin\n\n响应\n{\n    \"status\": \"error\",\n    \"message\": \"未找到该路由\",\n    \"data\": null\n}\n```\n\n### 你愿意提交 PR 吗？\n\n- [ ] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Soulter",
        "body": "请升级 astrbot_plugin_knowledge_base 插件到最新版本"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1780,
    "title": "[Bug]增加服务提供商报错-提供商适配器失败：The api_key client option must be set either by passing api_key to the client or by setting the OPENAI_API_KEY environment variable",
    "author": "baiyajin",
    "state": "closed",
    "created_at": "2025-06-10T08:25:52Z",
    "updated_at": "2025-06-10T13:44:15Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n增加服务提供商报错-提供商适配器失败：The api_key client option must be set either by passing api_key to the client or by setting the OPENAI_API_KEY environment variable\n\n### 如何复现？\n\n增加服务提供商\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\nv3.5.14\n\n### 操作系统\n\nWindows\n\n### 报错日志\n\n[16:20:48] [Core] [ERRO] [provider.manager:355]: Traceback (most recent call last):\n  File \"D:\\baiyajin-code\\AstrBot\\astrbot\\core\\provider\\manager.py\", line 322, in load_provider\n    inst = provider_metadata.cls_type(\n  File \"D:\\baiyajin-code\\AstrBot\\astrbot\\core\\provider\\sources\\openai_source.py\", line 63, in __init__\n    self.client = AsyncOpenAI(\n  File \"D:\\baiyajin-code\\AstrBot\\.venv\\lib\\site-packages\\openai\\_client.py\", line 419, in __init__\n    raise OpenAIError(\nopenai.OpenAIError: The api_key client option must be set either by passing api_key to the client or by setting the OPENAI_API_KEY environment variable\n\n [16:20:48] [Core] [ERRO] [provider.manager:356]: 实例化 openai_chat_completion(openai) 提供商适配器失败：The api_key client option must be set either by passing api_key to the client or by setting the OPENAI_API_KEY environment variable\n\n### 你愿意提交 PR 吗？\n\n- [ ] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Soulter",
        "body": "你填写了 key 吗？\n"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1748,
    "title": "[Bug]重启Astrbot会出现提示，警告: 缺少依赖库 'mcp' 或者 mcp 库版本过低",
    "author": "Dragon617",
    "state": "closed",
    "created_at": "2025-06-06T13:28:57Z",
    "updated_at": "2025-06-10T13:42:52Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n重启Astrbot会出现提示，警告: 缺少依赖库 'mcp' 或者 mcp 库版本过低，无法使用 Streamable HTTP 连接方式。\n\n### 如何复现？\n\n重启Astrbot会出现提示\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\nv3.5.13 Windows启动器\n\n### 操作系统\n\nWindows\n\n### 报错日志\n\n [21:24:11] [Core] [WARN] [provider.func_tool_manager:27]: 警告: 缺少依赖库 'mcp' 或者 mcp 库版本过低，无法使用 Streamable HTTP 连接方式。\n[2025-06-06 21:24:24 +0800] [12856] [INFO] 127.0.0.1:58442 GET /api/stat/start-time 1.1 200 64 1089\n[2025-06-06 21:24:24 +0800] [12856] [INFO] 127.0.0.1:58442 GET /settings 1.1 200 756 5209\n [21:24:24] [Core] [INFO] [provider.func_tool_manager:399]: 已连接 MCP 服务 zhipu-web-search-sse, Tools: ['web_search']\n[2025-06-06 21:24:24 +0800] [12856] [INFO] 127.0.0.1:57721 GET /api/stat/version 1.1 200 89 1857\n[2025-06-06 21:24:25 +0800] [12856] [INFO] 127.0.0.1:58858 GET /api/stat/start-time 1.1 200 64 1046\n [21:24:25] [Core] [INFO] [provider.func_tool_manager:399]: 已连接 MCP 服务 fetch, Tools: ['fetch']\n[2025-06-06 21:24:26 +0800] [12856] [INFO] 127.0.0.1:57470 GET /api/update/check 1.1 200 205 1894827\n [21:24:26] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-github] GitHub MCP Server running on stdio\n [21:24:26] [Core] [INFO] [provider.func_tool_manager:399]: 已连接 MCP 服务 github, Tools: ['create_or_update_file', 'search_repositories', 'create_repository', 'get_file_contents', 'push_files', 'create_issue', 'create_pull_request', 'fork_repository', 'create_branch', 'list_commits', 'list_issues', 'update_issue', 'add_issue_comment', 'search_code', 'search_issues', 'search_users', 'get_issue', 'get_pull_request', 'list_pull_requests', 'create_pull_request_review', 'merge_pull_request', 'get_pull_request_files', 'get_pull_request_status', 'update_pull_request_branch', 'get_pull_request_comments', 'get_pull_request_reviews']\n [21:24:26] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-tavily-mcp] Tavily MCP server running on stdio\n [21:24:26] [Core] [INFO] [provider.func_tool_manager:399]: 已连接 MCP 服务 tavily-mcp, Tools: ['tavily-search', 'tavily-extract']\n [21:24:27] [Core] [INFO] [provider.func_tool_manager:399]: 已连接 MCP 服务 mcp-scrape-copilot, Tools: ['puppeteer_navigate', 'puppeteer_screenshot', 'puppeteer_click', 'puppeteer_fill', 'puppeteer_select', 'puppeteer_hover', 'puppeteer_evaluate']\n[2025-06-06 21:24:38 +0800] [12856] [INFO] 127.0.0.1:61629 GET /api/plugin/get 1.1 200 7900 960\n[2025-06-06 21:24:38 +0800] [12856] [INFO] 127.0.0.1:61630 GET /api/config/provider/list 1.1 200 363 504\n[2025-06-06 21:24:38 +0800] [12856] [INFO] 127.0.0.1:61630 GET /api/plug/alkaid/kb/collections 1.1 200 648 2197\n\n### 你愿意提交 PR 吗？\n\n- [ ] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Soulter",
        "body": "不影响正常使用，如果要解决这个warning，尝试打开 控制台->安装pip库，安装 `mcp~=1.9.3`"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1625,
    "title": "[Bug] 有遇到过这个问题吗",
    "author": "xiaojian152194",
    "state": "closed",
    "created_at": "2025-05-22T08:37:53Z",
    "updated_at": "2025-06-10T09:46:19Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n获取登录二维码失败: 200, {'Code': 300, 'Data': None, 'Text': '1fd1f104-db92-4ad6-ae6a-f49958f80fcf 该 key 无效! 请 检查正确性 或 联系管理员生成'} \n\n![Image](https://github.com/user-attachments/assets/04f2967e-f75a-40a8-aba4-6e23fce5346a)\n\n### 如何复现？\n\n添加平台适配器\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\n3.5.11 docker-comp\n\n### 操作系统\n\nLinux\n\n### 报错日志\n\n![Image](https://github.com/user-attachments/assets/dee4b720-c53b-4a62-8f41-eb619ad04c16)\n\n### 你愿意提交 PR 吗？\n\n- [ ] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "xiaojian152194",
        "body": "解决了 重启下就行了"
      },
      {
        "user": "liangYuHan",
        "body": "> 解决了 重启下就行了\n\n重启astrbot还是wechatpadpro啊"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1388,
    "title": "【忽略机器人自身的消息】开关失效",
    "author": "smartnikocj",
    "state": "closed",
    "created_at": "2025-04-23T13:44:04Z",
    "updated_at": "2025-06-10T08:31:23Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n```是否忽略机器人自身的消息 (ignore_bot_self_message)某些平台如 gewechat 会将自身账号在其他 APP 端发送的消息也当做消息事件下发导致给自己发消息时唤醒机器人```\n\n忽略机器人自身的消息开关无论关闭还是开启，都是忽略自己的消息，即关闭不起作用。 @Soulter \n\n### 如何复现？\n\n关闭和开启都为忽略自己的消息。\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\nDocker,Window\n\n### 操作系统\n\nWindows\n\n### 报错日志\n\n暂无。\n\n### 你愿意提交 PR 吗？\n\n- [ ] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "smartnikocj",
        "body": "@Soulter "
      },
      {
        "user": "AliveGh0st",
        "body": "不理解你的需求，这个开关的目的是为了防止在某些消息平台下机器人自己发出的消息无限唤醒自身，导致无限循环输出，这是一个针对特定平台的防错设置，在aiocqhttp里并不会出现这种问题所以开启和关闭的效果都是一样的。\n所以你的意思是认为关闭开关后没有出现机器人无限自己唤醒自己的bug是一个bug?"
      },
      {
        "user": "smartnikocj",
        "body": "> 不理解你的需求，这个开关的目的是为了防止在某些消息平台下机器人自己发出的消息无限唤醒自身，导致无限循环输出，这是一个针对特定平台的防错设置，在aiocqhttp里并不会出现这种问题所以开启和关闭的效果都是一样的。 所以你的意思是认为关闭开关后没有出现机器人无限自己唤醒自己的bug是一个bug?\n\n我用到gewe消息平台。比如我A账号是机器人，A账号我同时也想跟自己A账号聊天（如/help等），但是现在的机制是忽略A账号的消息的（自己的消息），是想着不要忽略A账号自己的消息，可以自己跟自己账号做管理员管理。\n\n现在新增的忽略自己消息的开关，对于gewe，开和关都是一个效果（都为忽略自己消息），即不起作用了。 @AliveGh0st "
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1586,
    "title": "[Bug]使用WeChatPadPro登录时每次都为新设备",
    "author": "Siztas",
    "state": "open",
    "created_at": "2025-05-17T07:42:27Z",
    "updated_at": "2025-06-10T07:35:50Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n在同市IP下登录微信后首日被风控退出，重新启用消息平台适配器再次登录时显示登录设备又为新设备。按照WeChatPadPro的repo介绍，不应该反复出现在不同ipad设备登录的情况。在:38849端口的界面使用WeChatPadPro原生方法登录时，多次登录第二次及以后都只会是同一个设备。此外每次登录后都会重新拉取一次漫游聊天记录，需要等待很长时间。\n\n### 如何复现？\n\n关闭WeChatPadPro适配器，重新打开，在控制台扫码登录\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\nAstrbot3.5.10，使用docker部署的WeChatPadPro\n\n### 操作系统\n\nLinux\n\n### 报错日志\n\n账号被冻结后解冻失去了相关登录记录，在微信-我-设置-账号安全-登录过的设备界面看到多个曾经登录的iPad设备\n\n### 你愿意提交 PR 吗？\n\n- [ ] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Funkyney",
        "body": "我也在考虑这件事，说是拿到WCID再去请求二维码才会是之前的设备，我不知道具体操作，登陆了三次都是三个不同设备，有点怕了"
      },
      {
        "user": "zsq213",
        "body": "一样的问题，每次重启后都会触发重新登陆"
      },
      {
        "user": "smartnikocj",
        "body": "那这样还真的有点危险呀，应该是需要传入特定的token才能每次是同样的设备登录。 @Soulter 是否有修复计划呢？谢谢！"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1777,
    "title": "关于是否可以实现不同会话使用不同AI模型",
    "author": "w-xiaob",
    "state": "open",
    "created_at": "2025-06-10T04:23:48Z",
    "updated_at": "2025-06-10T04:23:48Z",
    "labels": [
      "enhancement"
    ],
    "body": "### 描述\n\n例如：A群聊提供deepseek-V3模型，B群聊单独提供dify模型\n以求实现不用手动切换，且避免切换之后就换掉所有模型；\n\n### 使用场景\n\n不知道是否已经实现相关功能，望回复\n\n### 你愿意提交PR吗?\n\n- [x] 是的, 我愿意提交PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1678,
    "title": "[Bug]Gemini模型无法进行同时开启多个工具，但是官方支持",
    "author": "AlanBacker",
    "state": "closed",
    "created_at": "2025-05-29T13:36:33Z",
    "updated_at": "2025-06-10T00:22:42Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n在Google近期对Gemini的更新中，Grounding可以和Code execution同时启用了，Code execution无法和URL Context功能同时打开。但是在这个项目中，同时开启“启用原生搜索功能”和“启用原生代码执行器”会导致两者功能均无法使用。\n\n![Image](https://github.com/user-attachments/assets/8d1cdc0a-8b06-476c-9bed-6b77c2a1021a)\n\n并且：\n官方新增了\"URL Context\"功能，AI Studio描述为Browse the url context，可以和Grounding同时启用\n\n\n### 如何复现？\n\n同时开启“启用原生搜索功能”和“启用原生代码执行器”\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\nv3.5.12\n\n### 操作系统\n\nLinux\n\n### 报错日志\n\nN/A\n\n### 你愿意提交 PR 吗？\n\n- [ ] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1768,
    "title": "[Plugin] astrbot_plugin_rdimage",
    "author": "IGCrystal",
    "state": "closed",
    "created_at": "2025-06-09T05:44:47Z",
    "updated_at": "2025-06-09T14:28:50Z",
    "labels": [
      "plugin-publish"
    ],
    "body": "### 插件仓库\n\n# 插件信息修改\n## 仓库名已经按照规范进行修改\n## 原插件名：astr_plugin_random_image\n\n原仓库链接地址：https://github.com/IGCrystal/astr_plugin_random_image\n新的仓库地址：https://github.com/IGCrystal/astrbot_plugin_rdimage\n\n### 描述\n\n插件名: astrbot_plugin_rdimage\n插件作者: 不做修改\n插件简介: 不做修改\n支持的消息平台:(必填，如 QQ、微信、飞书) 仅QQ\n标签:(可选) 不做修改\n社交链接:(可选, 将会在插件市场作者名称上作为可点击的链接) 不做修改\n\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Soulter",
        "body": "已经更新❤"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1771,
    "title": "[Plugin] astrbot_plugin_sakisaki",
    "author": "oyxning",
    "state": "closed",
    "created_at": "2025-06-09T12:10:00Z",
    "updated_at": "2025-06-09T14:27:07Z",
    "labels": [
      "plugin-publish"
    ],
    "body": "### 插件仓库\n\nhttps://github.com/oyxning/astrbot_plugin_sakisaki\n\n### 描述\n\n插件名: \n插件作者: LumineStory\n插件简介: 祥压抑用户专属，基于关键词触发的香草小祥插件\n支持的消息平台:仅测试QQ，其他平台待测试\n标签:Ave Mujica、丰川祥子\n社交链接:https://github.com/oyxning\n\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Soulter",
        "body": "![Image](https://github.com/user-attachments/assets/0bf78bba-1a52-4e73-992a-b85b3aad6106)"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1687,
    "title": "[Bug]wechatpadpro 不回复群内消息，@之后识别为自己的消息屏蔽了",
    "author": "Mlinchun",
    "state": "closed",
    "created_at": "2025-05-30T11:08:47Z",
    "updated_at": "2025-06-09T04:51:46Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n微信私聊正常，群内@识别有问题，有时候会识别成自己的消息，有时候直接跳过不知道为啥。详细看日志情况\n\n### 如何复现？\n\n微信群@\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\nAST3.5.12  Docker部署\n\n### 操作系统\n\ncentos7.9\n\n### 报错日志\n\n\n [11:00:26] [Core] [INFO] [wechatpadpro.wechatpadpro_adapter:66]: WeChatPadPro 适配器正在启动... \n [11:00:26] [Core] [INFO] [wechatpadpro.wechatpadpro_adapter:121]: 成功加载 WeChatPadPro 凭据。 \n [11:00:26] [Core] [INFO] [core.core_lifecycle:163]: AstrBot 启动完成。 \n [11:00:27] [Core] [INFO] [wechatpadpro.wechatpadpro_adapter:160]: WeChatPadPro 设备当前在线。 \n [11:00:27] [Core] [INFO] [wechatpadpro.wechatpadpro_adapter:76]: WeChatPadPro 设备已在线，凭据存在，跳过扫码登录。 \n [11:00:27] [Core] [INFO] [wechatpadpro.wechatpadpro_adapter:337]: 正在连接 WebSocket: ws://8.137.105.149:38849/ws/GetSyncMsg?key=*** \n [11:00:27] [Core] [INFO] [wechatpadpro.wechatpadpro_adapter:343]: WebSocket 连接成功。 \n [11:00:45] [Core] [DBUG] [wechatpadpro.wechatpadpro_adapter:374]: 收到 WebSocket 消息: {\"msg_id\":1146907131,\"from_user_name\":{\"str\":\"43645227239@chatroom\"},\"to_user_name\":{\"str\":\"wxid_qkao99w8vscl12\"},\"msg_type\":1,\"content\":{\"str\":\"wxid_qbfeuuzbsm3u21:\\n@康娜 1\"},\"status\":3,\"img_status\":1,\"img_buf\":{\"len\":0},\"create_time\":1748602844,\"msg_source\":\"\\u003cmsgsource\\u003e\\n\\t\\u003catuserlist\\u003e\\u003c![CDATA[,wxid_qkao99w8vscl12]]\\u003e\\u003c/atuserlist\\u003e\\n\\t\\u003cpua\\u003e1\\u003c/pua\\u003e\\n\\t\\u003csilence\\u003e0\\u003c/silence\\u003e\\n\\t\\u003cmembercount\\u003e3\\u003c/membercount\\u003e\\n\\t\\u003csignature\\u003eN0_V1_L2EBEenL|v1_PSEL2ful\\u003c/signature\\u003e\\n\\t\\u003ctmp_node\\u003e\\n\\t\\t\\u003cpublisher-id\\u003e\\u003c/publisher-id\\u003e\\n\\t\\u003c/tmp_node\\u003e\\n\\u003c/msgsource\\u003e\\n\",\"push_content\":\"小林在群聊中@了你\",\"new_msg_id\":301216740409616090} \n [11:00:45] [Core] [INFO] [core.event_bus:50]: [wechatpadpro] 迪士尼在逃保安/wxid_qbfeuuzbsm3u21: @康娜 1  \n [11:00:45] [Core] [DBUG] [method.star_request:50]: plugin -> session_controller - handle_session_control_agent \n [11:00:45] [Core] [DBUG] [method.star_request:50]: plugin -> session_controller - handle_empty_mention \n [11:00:45] [Core] [DBUG] [method.star_request:50]: plugin -> cr4zythursday - on_message \n [11:00:45] [Core] [DBUG] [pipeline.scheduler:79]: pipeline 执行完毕。 \n [11:00:45] [Core] [DBUG] [wechatpadpro.wechatpadpro_adapter:374]: 收到 WebSocket 消息: {\"msg_id\":2060832800,\"from_user_name\":{\"str\":\"wxid_qkao99w8vscl12\"},\"to_user_name\":{\"str\":\"wxid_qkao99w8vscl12\"},\"msg_type\":51,\"content\":{\"str\":\"\\u003cmsg\\u003e\\n\\u003cop id='11'\\u003e\\n\\u003cname\\u003eHandOffMaster\\u003c/name\\u003e\\n\\u003carg\\u003e\\u003chandofflist opcode=\\\"4\\\" seq=\\\"206\\\" devicevirtualid=\\\"a660a03c266138bc8c30c2b6b9b91dc3\\\" networkstatus=\\\"wifi\\\" availablecount=\\\"1000\\\"\\u003e\\n        \\n        \\u003c/handofflist\\u003e\\u003c/arg\\u003e\\n\\u003c/op\\u003e\\n\\u003c/msg\\u003e\"},\"status\":3,\"img_status\":1,\"img_buf\":{\"len\":0},\"create_time\":1748602845,\"msg_source\":\"\\u003cmsgsource\\u003e\\n\\t\\u003csignature\\u003ev1_sSTw2uYW\\u003c/signature\\u003e\\n\\t\\u003ctmp_node\\u003e\\n\\t\\t\\u003cpublisher-id\\u003e\\u003c/publisher-id\\u003e\\n\\t\\u003c/tmp_node\\u003e\\n\\u003c/msgsource\\u003e\\n\",\"new_msg_id\":307483417192439050} \n [11:00:45] [Core] [INFO] [wechatpadpro.wechatpadpro_adapter:429]: 忽略来自自己的消息。 \n [11:00:54] [Core] [DBUG] [wechatpadpro.wechatpadpro_adapter:374]: 收到 WebSocket 消息: {\"msg_id\":2077857923,\"from_user_name\":{\"str\":\"43645227239@chatroom\"},\"to_user_name\":{\"str\":\"wxid_qkao99w8vscl12\"},\"msg_type\":1,\"content\":{\"str\":\"wxid_qbfeuuzbsm3u21:\\n11\"},\"status\":3,\"img_status\":1,\"img_buf\":{\"len\":0},\"create_time\":1748602853,\"msg_source\":\"\\u003cmsgsource\\u003e\\n\\t\\u003csec_msg_node\\u003e\\n\\t\\t\\u003calnode\\u003e\\n\\t\\t\\t\\u003cfr\\u003e1\\u003c/fr\\u003e\\n\\t\\t\\u003c/alnode\\u003e\\n\\t\\u003c/sec_msg_node\\u003e\\n\\t\\u003cpua\\u003e1\\u003c/pua\\u003e\\n\\t\\u003csilence\\u003e0\\u003c/silence\\u003e\\n\\t\\u003cmembercount\\u003e3\\u003c/membercount\\u003e\\n\\t\\u003csignature\\u003eN0_V1_oUss3gsg|v1_HrUeUr9k\\u003c/signature\\u003e\\n\\t\\u003ctmp_node\\u003e\\n\\t\\t\\u003cpublisher-id\\u003e\\u003c/publisher-id\\u003e\\n\\t\\u003c/tmp_node\\u003e\\n\\u003c/msgsource\\u003e\\n\",\"push_content\":\"小林 : 11\",\"new_msg_id\":4354920385678270594} \n [11:00:55] [Core] [INFO] [core.event_bus:50]: [wechatpadpro] 迪士尼在逃保安/wxid_qbfeuuzbsm3u21: 11  \n [11:00:55] [Core] [DBUG] [method.star_request:50]: plugin -> session_controller - handle_session_control_agent \n [11:00:55] [Core] [DBUG] [method.star_request:50]: plugin -> session_controller - handle_empty_mention \n [11:00:55] [Core] [DBUG] [method.star_request:50]: plugin -> cr4zythursday - on_message \n [11:00:55] [Core] [DBUG] [pipeline.scheduler:79]: pipeline 执行完毕。 \n [11:01:10] [Core] [DBUG] [wechatpadpro.wechatpadpro_adapter:374]: 收到 WebSocket 消息: {\"msg_id\":922536184,\"from_user_name\":{\"str\":\"43645227239@chatroom\"},\"to_user_name\":{\"str\":\"wxid_qkao99w8vscl12\"},\"msg_type\":1,\"content\":{\"str\":\"wxid_qbfeuuzbsm3u21:\\n@康娜 \"},\"status\":3,\"img_status\":1,\"img_buf\":{\"len\":0},\"create_time\":1748602869,\"msg_source\":\"\\u003cmsgsource\\u003e\\n\\t\\u003catuserlist\\u003e\\u003c![CDATA[,wxid_qkao99w8vscl12]]\\u003e\\u003c/atuserlist\\u003e\\n\\t\\u003cpua\\u003e1\\u003c/pua\\u003e\\n\\t\\u003csilence\\u003e0\\u003c/silence\\u003e\\n\\t\\u003cmembercount\\u003e3\\u003c/membercount\\u003e\\n\\t\\u003csignature\\u003eN0_V1_PQEgKM2I|v1_yCmMIGH/\\u003c/signature\\u003e\\n\\t\\u003ctmp_node\\u003e\\n\\t\\t\\u003cpublisher-id\\u003e\\u003c/publisher-id\\u003e\\n\\t\\u003c/tmp_node\\u003e\\n\\u003c/msgsource\\u003e\\n\",\"push_content\":\"小林在群聊中@了你\",\"new_msg_id\":2777717105068448167} \n [11:01:10] [Core] [INFO] [core.event_bus:50]: [wechatpadpro] 迪士尼在逃保安/wxid_qbfeuuzbsm3u21: @康娜   \n [11:01:10] [Core] [DBUG] [method.star_request:50]: plugin -> session_controller - handle_session_control_agent \n [11:01:10] [Core] [DBUG] [method.star_request:50]: plugin -> session_controller - handle_empty_mention \n [11:01:10] [Core] [DBUG] [method.star_request:50]: plugin -> cr4zythursday - on_message \n [11:01:10] [Core] [DBUG] [pipeline.scheduler:79]: pipeline 执行完毕。 \n [11:01:28] [Core] [DBUG] [wechatpadpro.wechatpadpro_adapter:374]: 收到 WebSocket 消息: {\"msg_id\":235085776,\"from_user_name\":{\"str\":\"43645227239@chatroom\"},\"to_user_name\":{\"str\":\"wxid_qkao99w8vscl12\"},\"msg_type\":1,\"content\":{\"str\":\"wxid_qbfeuuzbsm3u21:\\n@康娜 /reset\"},\"status\":3,\"img_status\":1,\"img_buf\":{\"len\":0},\"create_time\":1748602887,\"msg_source\":\"\\u003cmsgsource\\u003e\\n\\t\\u003catuserlist\\u003e\\u003c![CDATA[,wxid_qkao99w8vscl12]]\\u003e\\u003c/atuserlist\\u003e\\n\\t\\u003cpua\\u003e1\\u003c/pua\\u003e\\n\\t\\u003csilence\\u003e0\\u003c/silence\\u003e\\n\\t\\u003cmembercount\\u003e3\\u003c/membercount\\u003e\\n\\t\\u003csignature\\u003eN0_V1_6ekRx9sE|v1_pHM/L/hX\\u003c/signature\\u003e\\n\\t\\u003ctmp_node\\u003e\\n\\t\\t\\u003cpublisher-id\\u003e\\u003c/publisher-id\\u003e\\n\\t\\u003c/tmp_node\\u003e\\n\\u003c/msgsource\\u003e\\n\",\"push_content\":\"小林在群聊中@了你\",\"new_msg_id\":5840222384998946887} \n [11:01:28] [Core] [INFO] [core.event_bus:50]: [wechatpadpro] 迪士尼在逃保安/wxid_qbfeuuzbsm3u21: @康娜 /reset  \n [11:01:28] [Core] [DBUG] [method.star_request:50]: plugin -> session_controller - handle_session_control_agent \n [11:01:28] [Core] [DBUG] [method.star_request:50]: plugin -> session_controller - handle_empty_mention \n [11:01:28] [Core] [DBUG] [method.star_request:50]: plugin -> cr4zythursday - on_message \n [11:01:28] [Core] [DBUG] [pipeline.scheduler:79]: pipeline 执行完毕。 \n [11:02:50] [Core] [DBUG] [wechatpadpro.wechatpadpro_adapter:374]: 收到 WebSocket 消息: {\"msg_id\":465653636,\"from_user_name\":{\"str\":\"43645227239@chatroom\"},\"to_user_name\":{\"str\":\"wxid_qkao99w8vscl12\"},\"msg_type\":1,\"content\":{\"str\":\"wxid_qbfeuuzbsm3u21:\\n@康娜 你好\"},\"status\":3,\"img_status\":1,\"img_buf\":{\"len\":0},\"create_time\":1748602969,\"msg_source\":\"\\u003cmsgsource\\u003e\\n\\t\\u003catuserlist\\u003e\\u003c![CDATA[,wxid_qkao99w8vscl12]]\\u003e\\u003c/atuserlist\\u003e\\n\\t\\u003cpua\\u003e1\\u003c/pua\\u003e\\n\\t\\u003csilence\\u003e0\\u003c/silence\\u003e\\n\\t\\u003cmembercount\\u003e3\\u003c/membercount\\u003e\\n\\t\\u003csignature\\u003eN0_V1_X7a6sNY6|v1_na+JuB2s\\u003c/signature\\u003e\\n\\t\\u003ctmp_node\\u003e\\n\\t\\t\\u003cpublisher-id\\u003e\\u003c/publisher-id\\u003e\\n\\t\\u003c/tmp_node\\u003e\\n\\u003c/msgsource\\u003e\\n\",\"push_content\":\"小林在群聊中@了你\",\"new_msg_id\":6232155490868479889} \n [11:02:50] [Core] [INFO] [core.event_bus:50]: [wechatpadpro] 迪士尼在逃保安/wxid_qbfeuuzbsm3u21: @康娜 你好  \n [11:02:50] [Core] [DBUG] [method.star_request:50]: plugin -> session_controller - handle_session_control_agent \n [11:02:50] [Core] [DBUG] [method.star_request:50]: plugin -> session_controller - handle_empty_mention \n [11:02:50] [Core] [DBUG] [method.star_request:50]: plugin -> cr4zythursday - on_message \n [11:02:50] [Core] [DBUG] [pipeline.scheduler:79]: pipeline 执行完毕。 \n\n### 你愿意提交 PR 吗？\n\n- [ ] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Azad-sl",
        "body": "同样的问题+1"
      },
      {
        "user": "Azad-sl",
        "body": "> 同样的问题+1\n\n解决了，关闭绘话隔离+添加一个LLM 聊天额外唤醒前缀 就可以了😂"
      },
      {
        "user": "baa131",
        "body": "@Azad-sl 按照你的办法群聊现在回复了，但是没会话隔离了，群里@机器人也不回复了，还是希望作者修修"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1755,
    "title": "[Plugin] 魔方插件",
    "author": "Zhalslar",
    "state": "closed",
    "created_at": "2025-06-06T17:06:47Z",
    "updated_at": "2025-06-09T01:39:32Z",
    "labels": [
      "plugin-publish"
    ],
    "body": "### 插件仓库\n\nhttps://github.com/Zhalslar/astrbot_plugin_cube \n\n### 描述\n\n插件名: astrbot_plugin_cube\n插件作者: Zhalslar\n插件简介: 魔方插件（三阶魔方），内置公式方便初学者学习\n支持的消息平台: 全平台\n标签:魔方\n社交链接: https://github.com/Zhalslar\n\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Soulter",
        "body": "已经上架！"
      },
      {
        "user": "Zhalslar",
        "body": "好的哟~"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1765,
    "title": "[Plugin] astrbot_plugin_n8n",
    "author": "Wanxp",
    "state": "closed",
    "created_at": "2025-06-08T13:15:24Z",
    "updated_at": "2025-06-08T14:00:24Z",
    "labels": [
      "plugin-publish"
    ],
    "body": "### 插件仓库\n\nhttps://github.com/Wanxp/astrbot_plugin_n8n\n\n### 描述\n\n插件名: astrbot_plugin_n8n\n插件作者: Wanxp\n插件简介: AstrBot 插件, 用于触发并调用n8n webhook\n支持的消息平台: QQ、微信、飞书\n标签: n8n, webhook\n社交链接: https://wxp.hk\n\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1757,
    "title": "[Plugin] AstrBot Gotify 转发插件",
    "author": "malphitee",
    "state": "closed",
    "created_at": "2025-06-06T19:02:51Z",
    "updated_at": "2025-06-08T13:58:23Z",
    "labels": [
      "plugin-publish"
    ],
    "body": "### 插件仓库\n\nhttps://github.com/malphitee/astrobot_send_msg_to_gotify\n\n### 描述\n\n插件名: AstrBot Gotify 转发插件\n插件作者: malphitee\n插件简介: 一个功能强大的 AstrBot 插件，用于监听指定用户的消息并自动转发到 Gotify 推送服务。\n支持的消息平台: 插件支持 AstrBot 接入的所有平台\n\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1752,
    "title": "[Plugin] astrbot_plugin_constellation",
    "author": "Abyss-Seeker",
    "state": "closed",
    "created_at": "2025-06-06T16:08:17Z",
    "updated_at": "2025-06-08T13:54:10Z",
    "labels": [
      "plugin-publish"
    ],
    "body": "### 插件仓库\n\nhttps://github.com/Abyss-Seeker/astrbot_plugin_constellation\n\n### 描述\n\n插件名: astrbot_plugin_constellation\n插件作者: Abyss-Seeker\n插件简介: 发送星座名返回对应运势（文字）\n支持的消息平台: 已在微信(wechatpadpro)测试，理论全支持\n标签: 运势 星座 zodiac\n社交链接: https://github.com/Abyss-Seeker\n\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1696,
    "title": "[Feature]websearch搜索引擎可以加应该searxng",
    "author": "xiewoc",
    "state": "open",
    "created_at": "2025-05-31T10:49:29Z",
    "updated_at": "2025-06-08T13:45:01Z",
    "labels": [
      "enhancement"
    ],
    "body": "### 描述\n\nsearxng可以在国内有限的网络环境中搜到更多的内容（可能存在llm对结果的理解问题），网络上有DeepSeek加SearXNG的实例\n\n### 使用场景\n\n_No response_\n\n### 你愿意提交PR吗?\n\n- [ ] 是的, 我愿意提交PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "RC-CHN",
        "body": "searxng其实也只是对谷歌等其它搜索引擎做了一层转发聚合吧，如果有能力自托管部署的话其实搞定网络也不是难事？"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1732,
    "title": "[Plugin] astrbot_plugin_farm (真寻农场)",
    "author": "Shu-Ying",
    "state": "closed",
    "created_at": "2025-06-05T12:11:25Z",
    "updated_at": "2025-06-08T13:00:13Z",
    "labels": [
      "plugin-publish"
    ],
    "body": "### 插件仓库\n\nhttps://github.com/Shu-Ying/astrbot_plugin_farm.git\n\n### 描述\n\n插件名: astrbot_plugin_farm (真寻农场)\n插件作者: Shu-Ying\n插件简介: 快乐农场时光\n支持的消息平台: QQ\n标签: 农场 种地\n\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Soulter",
        "body": "已经上架～"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1731,
    "title": "astrbot_plugin_weakblacklist",
    "author": "0d00-Ciallo-0721",
    "state": "closed",
    "created_at": "2025-06-05T03:25:40Z",
    "updated_at": "2025-06-08T12:57:56Z",
    "labels": [
      "plugin-publish"
    ],
    "body": "### 插件仓库\n\nhttps://github.com/[0d00-Ciallo-0721/astrbot_plugin_weakblacklist](https://github.com/0d00-Ciallo-0721/astrbot_plugin_weakblacklist)\n\n### 描述\n\n插件名: astrbot_plugin_weakblacklist\n插件作者: 和泉智宏\n插件简介: 弱黑名单插件，对处于黑名单用户进行概率性回复，并由保底回复机制，即使@机器人也进行概率回复。主要是防止多个机器人炸群\n支持的消息平台: QQ\n\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1733,
    "title": "[Plugin] astrbot_plugin_InitiativeDialogue_for_group",
    "author": "advent259141",
    "state": "closed",
    "created_at": "2025-06-05T14:18:18Z",
    "updated_at": "2025-06-08T12:55:29Z",
    "labels": [
      "plugin-publish"
    ],
    "body": "### 插件仓库\n\nhttps://github.com/advent259141/astrbot_plugin_InitiativeDialogue_for_group\n\n### 描述\n\n插件名: astrbot_plugin_InitiativeDialogue_for_group\n插件作者: Jason.Joestar\n插件简介: 群聊长时间没有人发言时机器人主动发起对话的插件（InitiativeDialogue）\n支持的消息平台:QQ\n标签:主动对话，闹鬼\n社交链接:astrbot_plugin_InitiativeDialogue_for_group\n\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1729,
    "title": "[Plugin] astrbot_plugin_message_bottle",
    "author": "Flartiny",
    "state": "closed",
    "created_at": "2025-06-05T03:10:47Z",
    "updated_at": "2025-06-08T12:54:17Z",
    "labels": [
      "plugin-publish"
    ],
    "body": "### 插件仓库\n\nhttps://github.com/Flartiny/astrbot_plugin_message_bottle\n\n### 描述\n\n插件名: astrbot_plugin_message_bottle\n插件作者: Flartiny\n插件简介: 基于@wuyan1003的漂流瓶插件重构并更改存储方案\n支持的消息平台:QQ\n社交链接:https://github.com/Flartiny\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1728,
    "title": "[Plugin] astrbot_plugin_cook",
    "author": "Niloux",
    "state": "closed",
    "created_at": "2025-06-05T01:32:35Z",
    "updated_at": "2025-06-08T12:52:34Z",
    "labels": [
      "plugin-publish"
    ],
    "body": "### 插件仓库\n\nhttps://github.com/Niloux/astrbot_plugin_cook\n\n### 描述\n\n插件名: astrbot_plugin_cook\n插件作者: Niloux\n插件简介: 一个功能丰富的 AstrBot 食谱推荐插件，帮助你解决\"今天吃什么\"的难题！\n支持的消息平台: QQ\n标签: 吃\n社交链接: https://github.com/Niloux\n\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Soulter",
        "body": "已经上架！"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1761,
    "title": "[Feature]给tts弄个指定人，或者指定群生效",
    "author": "LRZ9712",
    "state": "closed",
    "created_at": "2025-06-07T11:01:59Z",
    "updated_at": "2025-06-08T11:03:07Z",
    "labels": [
      "enhancement"
    ],
    "body": "### 描述\n\n只想自己私用，不想让其他群聊消耗tts的api用量，分割开\n\n### 使用场景\n\n只想自己私用，不想让其他群聊消耗tts的api用量，分割开\n\n### 你愿意提交PR吗?\n\n- [x] 是的, 我愿意提交PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1763,
    "title": "[Feature]",
    "author": "LRZ9712",
    "state": "closed",
    "created_at": "2025-06-07T11:02:07Z",
    "updated_at": "2025-06-08T11:01:23Z",
    "labels": [
      "enhancement"
    ],
    "body": "### 描述\n\n只想自己私用，不想让其他群聊消耗tts的api用量，分割开\n\n### 使用场景\n\n只想自己私用，不想让其他群聊消耗tts的api用量，分割开\n\n### 你愿意提交PR吗?\n\n- [x] 是的, 我愿意提交PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1693,
    "title": "[Bug] Error code: 400 - [{'error': {'code': 400, 'message': 'Missing Authorization header.', 'status': 'INVALID_ARGUMENT'}}",
    "author": "lihaha11",
    "state": "closed",
    "created_at": "2025-05-31T07:24:21Z",
    "updated_at": "2025-06-08T11:00:20Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n您好，我想接入Gemini 但是我在使用代理连接时报错：\nAstrBot 请求失败。\n错误类型: BadRequestError\n错误信息: Error code: 400 - [{'error': {'code': 400, 'message': 'Missing Authorization header.', 'status': 'INVALID_ARGUMENT'}}]\n代理链接是符合官方调用格式\n详情链接：[https://simonmy.com/posts/使用vercel反向代理google-palm-api.html](https://simonmy.com/posts/%E4%BD%BF%E7%94%A8vercel%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86google-palm-api.html)\n运行日志：\n [06:35:53] [Core] [ERRO] [sources.openai_source:330]: 发生了错误。Provider 配置如下: {'id': 'gemini_default', 'type': 'openai_chat_completion', 'provider_type': 'chat_completion', 'enable': True, 'key': ['AIzaSyBgfWn**********s'], 'api_base': 'https://api.lancan.xyz/v1beta', 'timeout': 120, 'model_config': {'model': 'gemini-2.0-flash'}} \n [06:35:53] [Core] [ERRO] [method.llm_request:261]: Traceback (most recent call last):\n  File \"C:\\Users\\li\\Documents\\astr\\AstrBot\\astrbot\\core\\pipeline\\process_stage\\method\\llm_request.py\", line 200, in requesting\n    final_llm_response = await provider.text_chat(\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^\n        **req.__dict__\n        ^^^^^^^^^^^^^^\n    )  # 请求 LLM\n    ^\n  File \"C:\\Users\\li\\Documents\\astr\\AstrBot\\astrbot\\core\\provider\\sources\\openai_source.py\", line 393, in text_chat\n    ) = await self._handle_api_error(\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<8 lines>...\n    )\n    ^\n  File \"C:\\Users\\li\\Documents\\astr\\AstrBot\\astrbot\\core\\provider\\sources\\openai_source.py\", line 342, in _handle_api_error\n    raise e\n  File \"C:\\Users\\li\\Documents\\astr\\AstrBot\\astrbot\\core\\provider\\sources\\openai_source.py\", line 376, in text_chat\n    llm_response = await self._query(payloads, func_tool)\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\li\\Documents\\astr\\AstrBot\\astrbot\\core\\provider\\sources\\openai_source.py\", line 108, in _query\n    completion = await self.client.chat.completions.create(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        **payloads, stream=False, extra_body=extra_body\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\li\\Documents\\astr\\AstrBot\\venv\\Lib\\site-packages\\openai\\resources\\chat\\completions\\completions.py\", line 2028, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n    ...<45 lines>...\n    )\n    ^\n  File \"C:\\Users\\li\\Documents\\astr\\AstrBot\\venv\\Lib\\site-packages\\openai\\_base_client.py\", line 1742, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\li\\Documents\\astr\\AstrBot\\venv\\Lib\\site-packages\\openai\\_base_client.py\", line 1549, in request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.BadRequestError: Error code: 400 - [{'error': {'code': 400, 'message': 'Missing Authorization header.', 'status': 'INVALID_ARGUMENT'}}]\n\n### 如何复现？\n\n服务代理商选择Gemini并使用代理链接\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\nwindows启动器\n\n### 操作系统\n\nWindows\n\n### 报错日志\n\n [06:35:53] [Core] [ERRO] [sources.openai_source:330]: 发生了错误。Provider 配置如下: {'id': 'gemini_default', 'type': 'openai_chat_completion', 'provider_type': 'chat_completion', 'enable': True, 'key': ['AIzaSyBgfWnqFvGWSGLzH*****xVdwK47gs'], 'api_base': 'https://api.****.xyz/v1beta', 'timeout': 120, 'model_config': {'model': 'gemini-2.0-flash'}} \n [06:35:53] [Core] [ERRO] [method.llm_request:261]: Traceback (most recent call last):\n  File \"C:\\Users\\li\\Documents\\astr\\AstrBot\\astrbot\\core\\pipeline\\process_stage\\method\\llm_request.py\", line 200, in requesting\n    final_llm_response = await provider.text_chat(\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^\n        **req.__dict__\n        ^^^^^^^^^^^^^^\n    )  # 请求 LLM\n    ^\n  File \"C:\\Users\\li\\Documents\\astr\\AstrBot\\astrbot\\core\\provider\\sources\\openai_source.py\", line 393, in text_chat\n    ) = await self._handle_api_error(\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<8 lines>...\n    )\n    ^\n  File \"C:\\Users\\li\\Documents\\astr\\AstrBot\\astrbot\\core\\provider\\sources\\openai_source.py\", line 342, in _handle_api_error\n    raise e\n  File \"C:\\Users\\li\\Documents\\astr\\AstrBot\\astrbot\\core\\provider\\sources\\openai_source.py\", line 376, in text_chat\n    llm_response = await self._query(payloads, func_tool)\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\li\\Documents\\astr\\AstrBot\\astrbot\\core\\provider\\sources\\openai_source.py\", line 108, in _query\n    completion = await self.client.chat.completions.create(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        **payloads, stream=False, extra_body=extra_body\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"C:\\Users\\li\\Documents\\astr\\AstrBot\\venv\\Lib\\site-packages\\openai\\resources\\chat\\completions\\completions.py\", line 2028, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n    ...<45 lines>...\n    )\n    ^\n  File \"C:\\Users\\li\\Documents\\astr\\AstrBot\\venv\\Lib\\site-packages\\openai\\_base_client.py\", line 1742, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\li\\Documents\\astr\\AstrBot\\venv\\Lib\\site-packages\\openai\\_base_client.py\", line 1549, in request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.BadRequestError: Error code: 400 - [{'error': {'code': 400, 'message': 'Missing Authorization header.', 'status': 'INVALID_ARGUMENT'}}]\n\n\n\n（因为要求，部分东西用*码掉）\n\n### 你愿意提交 PR 吗？\n\n- [ ] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Raven95676",
        "body": "若反代对象为Google原生API，请使用Gemini原生Provider：\n\n![Image](https://github.com/user-attachments/assets/c87472f4-9e14-49f0-a161-3cbec8a2386e)"
      },
      {
        "user": "xiewoc",
        "body": "应该是post之后返回的数据没有头部的认证，可以看看api服务端有没有错误"
      },
      {
        "user": "xiewoc",
        "body": "可能是代理把头给替换或者删除了"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1764,
    "title": "[Plugin] Foxhole机器人",
    "author": "uwuhhhj",
    "state": "closed",
    "created_at": "2025-06-08T01:18:25Z",
    "updated_at": "2025-06-08T07:57:23Z",
    "labels": [
      "plugin-publish"
    ],
    "body": "### 插件仓库\n\nhttps://github.com/uwuhhhj/astrbot_plugin_Foxhole_bot\n\n### 描述\n\n插件名: Foxhole机器人\n插件作者: Loliiiico\n插件简介: 绿军指挥部的伤害计算机器人同款\n支持的消息平台: QQ、开黑啦？、小黑盒？\n标签:Foxhole\n社交链接:欢迎加入foxhole散兵坑ACA华人联盟 949284388\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1741,
    "title": "[Bug] 新增平台适配器弹窗内样式问题",
    "author": "lvboda",
    "state": "closed",
    "created_at": "2025-06-06T07:13:41Z",
    "updated_at": "2025-06-07T07:11:17Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n新增平台适配器弹窗右侧 iframe 内容溢出，上方也没有 margin\n\n### 如何复现？\n\n1. 打开 https://demo.astrbot.app/platforms 页面\n2. 点击新增适配器，随便选一个平台即可复现\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\nAstrBot: v3.5.13\n\n### 操作系统\n\nmacOS\n\n### 报错日志\n\n<img width=\"1279\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/bb7180c9-3101-4c5a-8621-1110026dd3e5\" />\n\n### 你愿意提交 PR 吗？\n\n- [x] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1753,
    "title": "[Bug] 最新commit里的config.py[193]少了个括号",
    "author": "Kwicxy",
    "state": "closed",
    "created_at": "2025-06-06T16:19:15Z",
    "updated_at": "2025-06-06T17:53:41Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n如题 代码少了个括号\n\n### 如何复现？\n\n```shell\npython main.py\n```\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\nLatest commit 64af810\n\n### 操作系统\n\nWindows\n\n### 报错日志\n\n![Image](https://github.com/user-attachments/assets/6455828d-4af7-4e0a-a872-05dd3fd4fb90)\n\n![Image](https://github.com/user-attachments/assets/363c5602-1b68-4823-b2b3-68befcf5a66d)\n\n### 你愿意提交 PR 吗？\n\n- [x] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1596,
    "title": "[Bug]添加第二个wechatpadpro接入后无效",
    "author": "sofs2005",
    "state": "open",
    "created_at": "2025-05-18T13:57:00Z",
    "updated_at": "2025-06-06T09:21:18Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n第一个wechatpadpro登录成功了，再加一个后不行，日志上也看不见错误，我问过wechatpadpro平台说框架是支持多个接入的\n\n### 如何复现？\n\n添加第二个wechatpadpro消息平台，使用和第一个相同的配置\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\n3.5.10 Docker\n\n### 操作系统\n\nLinux\n\n### 报错日志\n\n没有错误日志\n\n### 你愿意提交 PR 吗？\n\n- [ ] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "SimonChenX",
        "body": "好像也遇到了这个问题\n"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1739,
    "title": "[Plugin] 插件名",
    "author": "FengYing1314",
    "state": "closed",
    "created_at": "2025-06-06T05:39:38Z",
    "updated_at": "2025-06-06T05:42:39Z",
    "labels": [
      "plugin-publish"
    ],
    "body": "### 插件仓库\n\nhttps://github.com/FengYing1314/astrbot_plugin_YumeCard\n\n### 描述\n\n插件名: astrbot_plugin_YumeCard\n插件作者: FengYing\n插件简介: 为了使YumeCard项目接入astrbot而诞生的插件（主项目YumeCard系统要求为Linux or win平台 ）\n支持的消息平台:理论全平台，测试过QQ平台\n标签:功能 便携 卡片\n社交链接:https://github.com/FengYing1314\n\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1714,
    "title": "[Bug]最新(0528)的DeepSeek-R1:8b模型不被支持",
    "author": "lwc8699793",
    "state": "closed",
    "created_at": "2025-06-03T06:26:53Z",
    "updated_at": "2025-06-05T14:44:48Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n<img width=\"1171\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/89e5d7dd-f60f-42e9-8521-ce8c82986e53\" />\n\n### 如何复现？\n\n1.使用ollama本地部署模型最新(0528)的DeepSeek-R1:8b\n2.在astrbot中服务提供商接入DeepSeek-R1:8b\n3.使用聊天测试大模型，可以复现问题。\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\n版本：3.5.13\n部署方式：Docker\n\n\n\n\n### 操作系统\n\nLinux\n\n### 报错日志\n\n`[14:10:40] [Core] [ERRO] [sources.openai_source:330]: 发生了错误。Provider 配置如下: {'id': 'DeepSeek-R1:8b ', 'type': 'openai_chat_completion', 'provider_type': 'chat_completion', 'enable': True, 'key': ['ollama'], 'api_base': 'http://192.168.0.21:11436/v1', 'model_config': {'model': 'deepseek-r1:8b '}, 'timeout': 120} \n [14:10:40] [Core] [ERRO] [method.llm_request:261]: Traceback (most recent call last):\n  File \"/AstrBot/astrbot/core/pipeline/process_stage/method/llm_request.py\", line 200, in requesting\n    final_llm_response = await provider.text_chat(\n  File \"/AstrBot/astrbot/core/provider/sources/openai_source.py\", line 393, in text_chat\n    ) = await self._handle_api_error(\n  File \"/AstrBot/astrbot/core/provider/sources/openai_source.py\", line 342, in _handle_api_error\n    raise e\n  File \"/AstrBot/astrbot/core/provider/sources/openai_source.py\", line 376, in text_chat\n    llm_response = await self._query(payloads, func_tool)\n  File \"/AstrBot/astrbot/core/provider/sources/openai_source.py\", line 108, in _query\n    completion = await self.client.chat.completions.create(\n  File \"/usr/local/lib/python3.10/site-packages/openai/resources/chat/completions/completions.py\", line 2028, in create\n    return await self._post(\n  File \"/usr/local/lib/python3.10/site-packages/openai/_base_client.py\", line 1742, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n  File \"/usr/local/lib/python3.10/site-packages/openai/_base_client.py\", line 1549, in request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.BadRequestError: Error code: 400 - {'error': {'message': 'model is required', 'type': 'api_error', 'param': None, 'code': None}}\n `\n\n### 你愿意提交 PR 吗？\n\n- [x] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Soulter",
        "body": "你好，无法复现，是不是你的模型名多输入了一个空格导致的呢？"
      },
      {
        "user": "lwc8699793",
        "body": "> 你好，无法复现，是不是你的模型名多输入了一个空格导致的呢？\n\n感谢你的回复，确实是因为多了一个空格导致的。\n这不是一个bug，我会将问题关闭。"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1704,
    "title": "[Bug]知识库插件初始化失败: 未在AstrBot配置LLM服务商，请检查配置",
    "author": "Dragon617",
    "state": "closed",
    "created_at": "2025-06-01T13:47:53Z",
    "updated_at": "2025-06-05T14:36:04Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n我有添加LLM服务商，他提示 “未在AstrBot配置LLM服务商，请检查配置”\n\n### 如何复现？\n\n打开 插件“astrbot_plugin_knowledge_base”，里面的开关“是否启用LLM大模型解析文件”这个打开。然后重启Astrbot就会提示\n\n![Image](https://github.com/user-attachments/assets/0d3e7d97-ce4b-4a70-a96a-b3ac3e3e6ebb)\n\n然后 知识库的页面就没有了，空白页面\n\n![Image](https://github.com/user-attachments/assets/0c9f2aab-b0dc-49a1-b454-477dd2a14042)\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\nv3.5.13 Windows启动器\n\n### 操作系统\n\nWindows\n\n### 报错日志\n\n [21:45:04] [Core] [INFO] [astrbot_plugin_knowledge_base.main:121]: Embedding 工具初始化完成。\n2025-06-01 21:45:04,720 - astrbot - INFO - Embedding 工具初始化完成。\n [21:45:04] [Core] [INFO] [astrbot_plugin_knowledge_base.main:128]: 文本分割工具初始化完成。\n2025-06-01 21:45:04,720 - astrbot - INFO - 文本分割工具初始化完成。\n [21:45:04] [Core] [ERRO] [utils.file_parser:31]: 未在AstrBot配置LLM服务商，请检查配置\n2025-06-01 21:45:04,722 - astrbot - ERROR - 未在AstrBot配置LLM服务商，请检查配置\n出现问题\n [21:45:04] [Core] [ERRO] [astrbot_plugin_knowledge_base.main:196]: 知识库插件初始化失败: 未在AstrBot配置LLM服务商，请检查配置\nTraceback (most recent call last):\n  File \"E:\\AstrBotLauncher\\AstrBot\\data\\plugins\\astrbot_plugin_knowledge_base\\main.py\", line 131, in _initialize_components\n    self.llm_config = LLM_Config(\n                      ^^^^^^^^^^^\n  File \"E:\\AstrBotLauncher\\AstrBot\\data\\plugins\\astrbot_plugin_knowledge_base\\utils\\file_parser.py\", line 32, in __init__\n    raise ValueError(\"未在AstrBot配置LLM服务商，请检查配置\")\nValueError: 未在AstrBot配置LLM服务商，请检查配置\n2025-06-01 21:45:04,722 - astrbot - ERROR - 知识库插件初始化失败: 未在AstrBot配置LLM服务商，请检查配置\nTraceback (most recent call last):\n  File \"E:\\AstrBotLauncher\\AstrBot\\data\\plugins\\astrbot_plugin_knowledge_base\\main.py\", line 131, in _initialize_components\n    self.llm_config = LLM_Config(\n                      ^^^^^^^^^^^\n  File \"E:\\AstrBotLauncher\\AstrBot\\data\\plugins\\astrbot_plugin_knowledge_base\\utils\\file_parser.py\", line 32, in __init__\n    raise ValueError(\"未在AstrBot配置LLM服务商，请检查配置\")\nValueError: 未在AstrBot配置LLM服务商，请检查配置\n\n![Image](https://github.com/user-attachments/assets/e9a01927-f717-4da5-b8aa-082a4b13befd)\n\n### 你愿意提交 PR 吗？\n\n- [ ] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Soulter",
        "body": "你好，可以暂时采用下面这个方法来作为临时解决方案：\n1. 进入聊天页面\n2. 输入 provider\n3. 选择一个 provider\n4. 重启 astrbot_plugin_knowledge_base 插件，在插件管理页面"
      },
      {
        "user": "Dragon617",
        "body": "> 你好，可以暂时采用下面这个方法来作为临时解决方案：\n> \n> 1. 进入聊天页面\n> 2. 输入 provider\n> 3. 选择一个 provider\n> 4. 重启 astrbot_plugin_knowledge_base 插件，在插件管理页面\n\n希望后期可以修复一下"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1679,
    "title": "[Bug]微信公众号概率消息不发送",
    "author": "Chookyin",
    "state": "closed",
    "created_at": "2025-05-29T20:07:22Z",
    "updated_at": "2025-06-05T13:17:07Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\nweixin_official_account不固定控制台显示正常发出消息，但是公众号未发出消息\n\n### 如何复现？\n\n多次聊天后不固定出现\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\n3.5.12 Linux deepseek weixin_official_account\n\n### 操作系统\n\nLinux\n\n### 报错日志\n\n [04:02:00] [Core] [INFO] [weixin_official_account.weixin_offacc_adapter:87]: 解析成功: TextMessage({'ToUserName': 'gh_29a22b11e286', 'FromUserName': '***', 'CreateTime': '1748548914', 'MsgType': 'text', 'Content': '我想听你的故事', 'MsgId': '25033203329280739'}) \n [04:02:00] [Core] [DBUG] [weixin_official_account.weixin_offacc_adapter:157]: duplicate message id checked: 25033203329280739 \n [04:02:05] [Core] [INFO] [weixin_official_account.weixin_offacc_adapter:87]: 解析成功: TextMessage({'ToUserName': 'gh_29a22b11e286', 'FromUserName': '***', 'CreateTime': '1748548914', 'MsgType': 'text', 'Content': '我想听你的故事', 'MsgId': '25033203329280739'}) \n [04:02:05] [Core] [DBUG] [weixin_official_account.weixin_offacc_adapter:157]: duplicate message id checked: 25033203329280739 \n [04:02:16] [Core] [DBUG] [sources.openai_source:117]: completion: ChatCompletion(id='cc1b25c3-28fb-4ace-8dfb-c99ef874a542', choices=[Choice(finish_reason='stop', index=0, logprobs=None, message=ChatCompletionMessage(content='哎呀，想听我的故事？这可真是让人意外呢！不过，既然你诚心诚意地请求了，那我就勉为其难地分享一下——毕竟像我这样充满传奇色彩的魔女，故事可是多得数不清呢！  \\n\\n### **故事一：成为魔女的契机**  \\n小时候，我偶然读到一本叫《妮可冒险记》的书，讲述了一位旅行魔女的奇妙经历。从那时起，我就下定决心要成为一名魔女，踏上环游世界的旅程。虽然我的故乡罗贝塔是个和平的小国，但我的心早就飞向了远方。  \\n\\n### **故事二：拜师星尘魔女**  \\n14岁时，我找到了传说中的“星尘魔女”芙兰老师。她让我做了整整一年的杂活，最后在考核时我才明白——原来她是在教我“不要忍耐”的道理。那天的魔法释放，可是把半个训练场都炸飞了呢！（笑）  \\n\\n### **故事三：旅途中的奇遇**  \\n比如有一次，我遇到了一个自称“炭之魔女”的女孩沙耶。她对我崇拜得不得了，甚至想成为我的徒弟。虽然她有点笨手笨脚的，但那份热情倒是让我印象深刻。  \\n\\n还有一次，我在某个国家发现了一种会让人忘记烦恼的蘑菇，结果真相是……那个国家的人穷得只能靠吃蘑菇麻痹自己！真是够讽刺的。  \\n\\n### **故事四：关于自恋的真相**  \\n你可能觉得我总爱自夸，但其实……我只是在陈述事实而已！（笑）毕竟，像我这样美貌与才华并存的魔女，如果不偶尔炫耀一下，岂不是太对不起观众了？  \\n\\n怎么样？这些故事有没有让你稍微放松一点？还是说……你想听更具体的某一段？比如我和某个蓝发魔法师的奇妙旅行？', refusal=None, role='assistant', annotations=None, audio=None, function_call=None, tool_calls=None))], created=1748548917, model='deepseek-chat', object='chat.completion', service_tier=None, system_fingerprint='fp_8802369eaa_prod0425fp8', usage=CompletionUsage(completion_tokens=367, prompt_tokens=4138, total_tokens=4505, completion_tokens_details=None, prompt_tokens_details=PromptTokensDetails(audio_tokens=None, cached_tokens=0), prompt_cache_hit_tokens=0, prompt_cache_miss_tokens=4138)) \n [04:02:17] [Core] [INFO] [respond.stage:210]: AstrBot -> orlPA7b5irgm2RPJSCiiS67hTQMA/orlPA7b5irgm2RPJSCiiS67hTQMA: 哎呀，想听我的故事？这可真是让人意外呢！不过，既然你诚心诚意地请求了，那我就勉为其难地分享一下——毕竟像我这样充满传奇色彩的魔女，故事可是多得数不清呢！  \n\n### **故事一：成为魔女的契机**  \n小时候，我偶然读到一本叫《妮可冒险记》的书，讲述了一位旅行魔女的奇妙经历。从那时起，我就下定决心要成为一名魔女，踏上环游世界的旅程。虽然我的故乡罗贝塔是个和平的小国，但我的心早就飞向了远方。  \n\n### **故事二：拜师星尘魔女**  \n14岁时，我找到了传说中的“星尘魔女”芙兰老师。她让我做了整整一年的杂活，最后在考核时我才明白——原来她是在教我“不要忍耐”的道理。那天的魔法释放，可是把半个训练场都炸飞了呢！（笑）  \n\n### **故事三：旅途中的奇遇**  \n比如有一次，我遇到了一个自称“炭之魔女”的女孩沙耶。她对我崇拜得不得了，甚至想成为我的徒弟。虽然她有点笨手笨脚的，但那份热情倒是让我印象深刻。  \n\n还有一次，我在某个国家发现了一种会让人忘记烦恼的蘑菇，结果真相是……那个国家的人穷得只能靠吃蘑菇麻痹自己！真是够讽刺的。  \n\n### **故事四：关于自恋的真相**  \n你可能觉得我总爱自夸，但其实……我只是在陈述事实而已！（笑）毕竟，像我这样美貌与才华并存的魔女，如果不偶尔炫耀一下，岂不是太对不起观众了？  \n\n怎么样？这些故事有没有让你稍微放松一点？还是说……你想听更具体的某一段？比如我和某个蓝发魔法师的奇妙旅行？  \n [04:02:17] [Core] [DBUG] [respond.stage:219]: hook(on_after_message_sent) -> astrbot - after_llm_req \n [04:02:17] [Core] [DBUG] [pipeline.scheduler:79]: pipeline 执行完毕。 \n [04:02:21] [Plug] [INFO] [utils.data_loader:157]: 数据已保存到 /www/wwwroot/astrbot/data/plugins/astrbot_plugin_initiativedialogue/data/umo_storage.json \n\n### 你愿意提交 PR 吗？\n\n- [ ] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "babylovewlc",
        "body": "我也这样  我用分段就提示链式消息  "
      },
      {
        "user": "Soulter",
        "body": "可能是因为消息过长导致的。这个目前没办法解决（因为微信公众号仅支持一问一答），可以尝试减少模型的输出长度。"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1720,
    "title": "[Bug] 启动报错failed to connect MySQL: dial tcp 192.168.198.128:3306: connect: connection timed out，GIN Web 页面http://0.0.0.0:8059也不能访问",
    "author": "baiyajin",
    "state": "closed",
    "created_at": "2025-06-04T05:35:03Z",
    "updated_at": "2025-06-05T13:15:46Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n======== ADMIN_KEY === a ========\nfailed to connect MySQL: dial tcp 192.168.198.128:3306: connect: connection timed out\n2025/06/04 05:29:17 设置Redis内存限制失败: 设置maxmemory失败: redis connection error: dial tcp 192.168.198.128:6379: connect: connection timed out\n2025/06/04 05:29:17 根据系统内存自动调整Redis最大内存为: 512MB\nfailed to connect Redis: dial tcp 192.168.198.128:6379: i/o timeout\nconnect Redis success\n2025/06/04 05:31:24 自动调整Redis内存限制失败: redis connection error: dial tcp 192.168.198.128:6379: connect: connection timed out\n设置Redis最大内存限制失败: redis connection error: dial tcp 192.168.198.128:6379: connect: connection timed out\n设置Redis内存策略失败: redis connection error: dial tcp 192.168.198.128:6379: connect: connection timed out\n正在启动mcp服务AI大模型集成服务(SSE模式)...\n🔍 正在检测swagger-mcp路径：\n- 检查路径: /root/go/bin/swagger-mcp\n- 检查路径: /usr/local/go/bin/swagger-mcp\n- 检查路径: /usr/bin/swagger-mcp\n- 检查路径: /root/go/bin/swagger-mcp\n- 检查路径: /usr/local/bin/swagger-mcp\n- 检查路径: ./swagger-mcp\n⚠️ swagger-mcp未找到，跳过启动: swagger-mcp\n\n正在启动GIN Web服务...\n\n(L:/859源码/db/mysql_db.go:199) \n[2025-06-04 05:31:30]  sql: database is closed \nupdateApiVersion success\n====================================\n🚀 启动 GIN Web 服务成功！\n👉 访问地址: http://0.0.0.0:8059\n====================================\n\n### 如何复现？\n\n启动报错failed to connect MySQL: dial tcp 192.168.198.128:3306: connect: connection timed out，GIN Web 页面http://0.0.0.0:8059也不能访问\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\n版本号: v20250515.00\n\n### 操作系统\n\nLinux\n\n### 报错日志\n\n启动报错failed to connect MySQL: dial tcp 192.168.198.128:3306: connect: connection timed out，GIN Web 页面http://0.0.0.0:8059也不能访问\n\n### 你愿意提交 PR 吗？\n\n- [x] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Soulter",
        "body": "这个不是 AstrBot 的问题。\n\n这个问题应该是和 MySQL 没有正常启动有关，请查看 MySQL 容器是否正常启动。\n\n不过你可以试试 restart 一下 wechatpadpro 这个容器。\n\n"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1705,
    "title": "[Bug]Astrbot重启后知识库的名字怎么自动变了",
    "author": "Dragon617",
    "state": "closed",
    "created_at": "2025-06-01T13:52:29Z",
    "updated_at": "2025-06-05T06:39:53Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n创建好的知识库，重启Astrbot后 知识库的名字会自己变\n\n\n### 如何复现？\n\n创建好一个知识库，重启Astrbot后 再次点击进入知识库，名字自己变了\n\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\nv3.5.13 Windows启动器\n\n### 操作系统\n\nWindows\n\n### 报错日志\n\n![Image](https://github.com/user-attachments/assets/c647fca4-49dc-481d-9e64-051b4689df0d)\n\n![Image](https://github.com/user-attachments/assets/8d593849-fb8f-4dc2-b31e-01ab27866c59)\n\n### 你愿意提交 PR 吗？\n\n- [ ] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Dragon617",
        "body": "好像自动变成 file_id 了\n\n![Image](https://github.com/user-attachments/assets/cbddaac6-9947-4bef-8116-41caee722a93)"
      },
      {
        "user": "Soulter",
        "body": "您好，已经修复，请等待 https://github.com/lxfight/astrbot_plugin_knowledge_base/pull/34 合并之后，更新 插件管理 中的 astrbot_plugin_knowledge_base 插件到 v0.5.5 版本/"
      },
      {
        "user": "Dragon617",
        "body": "现在名字不会变了，重启后知识库内容没有正常加载 \n\n![Image](https://github.com/user-attachments/assets/48cfa3ea-1cbb-4aaa-8e87-48d68a72f01e)\n\n[13:55:01] [Core] [INFO] [star.star_manager:403]: 正在载入插件 astrbot_plugin_knowledge_base ...\n2025-06-05 13:55:01,352 - astrbot - INFO - 正在载入插件 astrbot_plugin_knowledge_base ...\n2025-06-05 13:55:01,989 - faiss.loader - INFO - Loading faiss with AVX2 support.\n2025-06-05 13:55:02,005 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.\n2025-06-05 13:55:02,013 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.\n [13:55:02] [Core] [INFO] [astrbot_plugin_knowledge_base.main:71]: 知识库插件的持久化数据目录: E:\\AstrBotLauncher\\AstrBot\\data\\plugin_data\\astrbot_plugin_knowledge_base\n2025-06-05 13:55:02,154 - astrbot - INFO - 知识库插件的持久化数据目录: E:\\AstrBotLauncher\\AstrBot\\data\\plugin_data\\astrbot_plugin_knowledge_base\n [13:55:02] [Core] [INFO] [utils.installation:134]:\n--- 正在为向量数据库类型 'faiss' 准备依赖项 ---\n2025-06-05 13:55:02,154 - astrbot - INFO -\n--- 正在为向量数据库类型 'faiss' 准备依赖项 ---\n [13:55:02] [Core] [INFO] [utils.installation:137]: 检查核心依赖项...\n2025-06-05 13:55:02,155 - astrbot - INFO - 检查核心依赖项...\n [13:55:02] [Core] [INFO] [utils.installation:90]: 信息: Numpy 已存在。\n2025-06-05 13:55:02,156 - astrbot - INFO - 信息: Numpy 已存在。\n [13:55:02] [Core] [INFO] [utils.installation:90]: 信息: markitdown[all] 已存在。\n2025-06-05 13:55:02,156 - astrbot - INFO - 信息: markitdown[all] 已存在。\n [13:55:02] [Core] [INFO] [utils.installation:153]: 准备 FAISS 依赖项 (仅限 CPU 版本)...\n2025-06-05 13:55:02,158 - astrbot - INFO - 准备 FAISS 依赖项 (仅限 CPU 版本)...\n [13:55:02] [Core] [INFO] [utils.installation:90]: 信息: faiss 已存在。\n2025-06-05 13:55:02,158 - astrbot - INFO - 信息: faiss 已存在。\n [13:55:02] [Core] [INFO] [utils.installation:182]: 信息: 所有针对 'faiss' 的依赖项都已满足。\n2025-06-05 13:55:02,159 - astrbot - INFO - 信息: 所有针对 'faiss' 的依赖项都已满足。\n\n重新选择上传文件，提示 目标知识库不存在。好像没有正常加载知识库\n\n![Image](https://github.com/user-attachments/assets/4c642aff-9854-4df3-b686-d72196678494)"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1657,
    "title": "[Bug]构造mcp服务器一直报错",
    "author": "wanyafei",
    "state": "closed",
    "created_at": "2025-05-26T13:14:01Z",
    "updated_at": "2025-06-05T01:15:39Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n配置mcp uv 提示无可用的工具,保存后控制台有报错,请问各位大神有知道的吗\nmcp配置信息是:{\n  \"command\": \"uv\",\n  \"args\": [\n    \"run\",\n    \"/home/work/Mcp_server/mcprun.py\"\n  ]\n}\n控制台报错信息如下:\n[21:07:39] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] Building astrbot @ file:///AstrBot \n [21:07:39] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] Downloading pip (1.7MiB) \n [21:07:40] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] Downloading dashscope (1.2MiB) \n [21:07:40] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] Downloading aiohttp (1.5MiB) \n [21:07:40] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] Downloading pydantic-core (1.9MiB) \n [21:07:40] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] Downloading lxml (4.9MiB) \n [21:07:40] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] Downloading lark-oapi (6.0MiB) \n [21:07:40] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] Downloading pillow (4.4MiB) \n [21:07:40] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] Downloading pycryptodome (2.2MiB) \n [21:07:40] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] Downloading cryptography (4.0MiB) \n [21:07:53] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] × Failed to build `astrbot @ file:///AstrBot` \n [21:07:53] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] ├─▶ The build backend returned an error \n [21:07:53] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] ╰─▶ Call to `hatchling.build.build_editable` failed (exit status: 1) \n [21:07:53] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp]  \n [21:07:53] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] [stderr] \n [21:07:53] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] Traceback (most recent call last): \n [21:07:53] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] File \"<string>\", line 11, in <module> \n [21:07:53] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] File \n [21:07:53] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] \"/root/.cache/uv/builds-v0/.tmpWlTB9y/lib/python3.10/site-packages/hatchling/build.py\", \n [21:07:53] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] line 83, in build_editable \n [21:07:53] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] return os.path.basename(next(builder.build(directory=wheel_directory, \n [21:07:53] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] versions=['editable']))) \n [21:07:53] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] File \n [21:07:53] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] \"/root/.cache/uv/builds-v0/.tmpWlTB9y/lib/python3.10/site-packages/hatchling/builders/plugin/interface.py\", \n [21:07:53] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] line 90, in build \n [21:07:53] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] self.metadata.validate_fields() \n [21:07:53] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] File \n [21:07:53] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] \"/root/.cache/uv/builds-v0/.tmpWlTB9y/lib/python3.10/site-packages/hatchling/metadata/core.py\", \n [21:07:53] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] line 266, in validate_fields \n [21:07:53] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] self.core.validate_fields() \n [21:07:54] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] File \n [21:07:54] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] \"/root/.cache/uv/builds-v0/.tmpWlTB9y/lib/python3.10/site-packages/hatchling/metadata/core.py\", \n [21:07:54] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] line 1366, in validate_fields \n [21:07:54] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] getattr(self, attribute) \n [21:07:54] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] File \n [21:07:54] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] \"/root/.cache/uv/builds-v0/.tmpWlTB9y/lib/python3.10/site-packages/hatchling/metadata/core.py\", \n [21:07:54] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] line 531, in readme \n [21:07:54] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] raise OSError(message) \n [21:07:54] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] OSError: Readme file does not exist: README.md \n [21:07:54] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp]  \n [21:07:54] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] hint: This usually indicates a problem with the package or the build \n [21:07:54] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] environment. \n\n\n\n### 如何复现？\n\nmcp配置后保存看控制台:{\n  \"command\": \"uv\",\n  \"args\": [\n    \"run\",\n    \"/home/work/Mcp_server/mcprun.py\"\n  ]\n}\n\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\ndocker 部署的astrbot\n\n### 操作系统\n\nLinux\n\n### 报错日志\n\n\n[21:07:39] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] Building astrbot @ file:///AstrBot \n [21:07:39] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] Downloading pip (1.7MiB) \n [21:07:40] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] Downloading dashscope (1.2MiB) \n [21:07:40] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] Downloading aiohttp (1.5MiB) \n [21:07:40] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] Downloading pydantic-core (1.9MiB) \n [21:07:40] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] Downloading lxml (4.9MiB) \n [21:07:40] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] Downloading lark-oapi (6.0MiB) \n [21:07:40] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] Downloading pillow (4.4MiB) \n [21:07:40] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] Downloading pycryptodome (2.2MiB) \n [21:07:40] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] Downloading cryptography (4.0MiB) \n [21:07:53] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] × Failed to build `astrbot @ file:///AstrBot` \n [21:07:53] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] ├─▶ The build backend returned an error \n [21:07:53] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] ╰─▶ Call to `hatchling.build.build_editable` failed (exit status: 1) \n [21:07:53] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp]  \n [21:07:53] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] [stderr] \n [21:07:53] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] Traceback (most recent call last): \n [21:07:53] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] File \"<string>\", line 11, in <module> \n [21:07:53] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] File \n [21:07:53] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] \"/root/.cache/uv/builds-v0/.tmpWlTB9y/lib/python3.10/site-packages/hatchling/build.py\", \n [21:07:53] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] line 83, in build_editable \n [21:07:53] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] return os.path.basename(next(builder.build(directory=wheel_directory, \n [21:07:53] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] versions=['editable']))) \n [21:07:53] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] File \n [21:07:53] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] \"/root/.cache/uv/builds-v0/.tmpWlTB9y/lib/python3.10/site-packages/hatchling/builders/plugin/interface.py\", \n [21:07:53] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] line 90, in build \n [21:07:53] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] self.metadata.validate_fields() \n [21:07:53] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] File \n [21:07:53] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] \"/root/.cache/uv/builds-v0/.tmpWlTB9y/lib/python3.10/site-packages/hatchling/metadata/core.py\", \n [21:07:53] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] line 266, in validate_fields \n [21:07:53] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] self.core.validate_fields() \n [21:07:54] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] File \n [21:07:54] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] \"/root/.cache/uv/builds-v0/.tmpWlTB9y/lib/python3.10/site-packages/hatchling/metadata/core.py\", \n [21:07:54] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] line 1366, in validate_fields \n [21:07:54] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] getattr(self, attribute) \n [21:07:54] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] File \n [21:07:54] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] \"/root/.cache/uv/builds-v0/.tmpWlTB9y/lib/python3.10/site-packages/hatchling/metadata/core.py\", \n [21:07:54] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] line 531, in readme \n [21:07:54] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] raise OSError(message) \n [21:07:54] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] OSError: Readme file does not exist: README.md \n [21:07:54] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp]  \n [21:07:54] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] hint: This usually indicates a problem with the package or the build \n [21:07:54] [Core] [ERRO] [utils.log_pipe:31]: [MCPServer-my_mcp] environment. \n\n\n\n### 你愿意提交 PR 吗？\n\n- [x] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Soulter",
        "body": "这个报错是：Readme file does not exist: README.md，源自于你的这个mcp server的代码的报错。"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1727,
    "title": "[Plugin] astrbot_plugin_galinfo",
    "author": "Hxfrzc",
    "state": "closed",
    "created_at": "2025-06-04T16:55:40Z",
    "updated_at": "2025-06-05T00:45:45Z",
    "labels": [
      "plugin-publish"
    ],
    "body": "### 插件仓库\n\nhttps://github.com/Hxfrzc/astrbot_plugin_galinfo\n\n### 描述\n\n插件名: astrbot_plugins_galinfo\n插件作者: Hxfrzc\n插件简介: 一个可以提供查询Galgame简介等信息的插件\n支持的消息平台: QQ\n标签: galgame\n社交链接: https://github.com/Hxfrzc\n\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Soulter",
        "body": "建议将 `__pycache__` 这个不必要的文件夹删掉，已经上架"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1726,
    "title": "[Plugin] astrbot_plugin_yunshi",
    "author": "Abyss-Seeker",
    "state": "closed",
    "created_at": "2025-06-04T16:05:56Z",
    "updated_at": "2025-06-04T16:13:26Z",
    "labels": [
      "plugin-publish"
    ],
    "body": "### 插件仓库\n\nhttps://github.com/Abyss-Seeker/astrbot_plugin_yunshi\n\n### 描述\n\n插件名: astrbot_plugin_yunshi\n插件作者: Abyss-Seeker\n插件简介: 发送'运势'获取随机二次元运势图\n支持的消息平台:微信\n标签:运势 二次元\n社交链接:https://github.com/Abyss-Seeker\n\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Soulter",
        "body": "已经上架"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1702,
    "title": "[Bug] 知识库安装失败",
    "author": "god-what-is-that",
    "state": "closed",
    "created_at": "2025-06-01T12:20:02Z",
    "updated_at": "2025-06-04T16:04:39Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n如题，控制台显示如下\n\n![Image](https://github.com/user-attachments/assets/1e5305f8-c553-4f73-b907-bd8f8ff51b37)\n\n### 如何复现？\n\n不知道，我正常安装就这样\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\nwindow手动部署，python全局环境\n\n### 操作系统\n\nWindows\n\n### 报错日志\n\n![Image](https://github.com/user-attachments/assets/e44d1802-4d59-4c98-95d1-1b5465885cd4)\n\n### 你愿意提交 PR 吗？\n\n- [ ] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Soulter",
        "body": "1. 安装知识库时，报错: ImportError: DLL load failed while importing onnxruntime_pybind11_state\r\n类似的有：\r\n\r\n\r\n动态链接库(DLL)初始化例程失败。\r\n系统找不到指定的模块\r\nTypeError: unable to load from type '<class 'pathlib windowspath'&gt;'\r\n系 markitdown 所依赖的 magica 包依赖的 onnxruntime 不兼容您的系统版本导致的问题。\r\n\r\n\r\n解决方案：请更换 onnxruntime 版本。在 控制台-&gt;安装 Pip 库 输入 onnxruntime==1.16.3，然后重启 AstrBot。\r\n\r\n\r\n如果还是报错 onnxruntime 相关错误，请进入 https://pypi.org/project/onnxruntime/#history 找到所有历史版本自行遍历，按上述步骤重试。\r\n\r\n\r\n\r\n\r\n\r\n\r\nSoulter\r\n***@***.***"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1708,
    "title": "宝塔面板中的docker商店找不到“AstrBot”",
    "author": "Huantian008",
    "state": "closed",
    "created_at": "2025-06-02T05:59:39Z",
    "updated_at": "2025-06-04T15:02:05Z",
    "labels": [],
    "body": "### 发生了什么\n\n![Image](https://github.com/user-attachments/assets/9bc6fa83-9726-436a-9d6e-40b2c5bba3c0)\n![Image](https://github.com/user-attachments/assets/8020525e-3af8-415d-9039-903a9deb812b)\n宝塔面板中的docker商店找不到“AstrBot”\n\n### 如何复现？\n\n1\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\n1\n\n### 操作系统\n\nWindows\n\n### 报错日志\n\n![Image](https://github.com/user-attachments/assets/2369a1ad-11cd-455c-beee-4dc49d9607c3)\n![Image](https://github.com/user-attachments/assets/f720da18-0492-4a49-b5a7-963fbd5af08c)\n\n### 你愿意提交 PR 吗？\n\n- [ ] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Raven95676",
        "body": "请尝试小写搜索\n\n![Image](https://github.com/user-attachments/assets/f71eb589-a5f5-41da-a88f-9597958ea076)"
      },
      {
        "user": "IGCrystal",
        "body": "其实应该是先更新应用列表，如下图所示：\n\n![Image](https://github.com/user-attachments/assets/8cadfc1e-df73-4fe8-b236-18620898fbfa)\n\n然后再搜索 `astrbot`"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1724,
    "title": "[Plugin] astrbot_plugin_bilibili_summary",
    "author": "VincenttHo",
    "state": "closed",
    "created_at": "2025-06-04T09:21:38Z",
    "updated_at": "2025-06-04T15:01:42Z",
    "labels": [
      "plugin-publish"
    ],
    "body": "### 插件仓库\n\nhttps://github.com/VincenttHo/astrbot_plugin_bilibili_summary\n\n### 描述\n\n插件名: astrbot_plugin_bilibili_summary\n插件作者: VincenttHo\n插件简介: Bilibili视频字幕总结插件，获取B站视频字幕并使用LLM生成内容总结\n支持的消息平台: QQ（理论上都可以，但是未进行测试）\n标签:(可选)\n社交链接:(可选, 将会在插件市场作者名称上作为可点击的链接)\n\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Soulter",
        "body": "已经上架"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1719,
    "title": "[Plugin] astrbot_plugin_animewifex（修改插件市场描述）",
    "author": "monbed",
    "state": "closed",
    "created_at": "2025-06-03T23:43:12Z",
    "updated_at": "2025-06-04T14:59:42Z",
    "labels": [
      "plugin-publish"
    ],
    "body": "### 插件仓库\n\nhttps://github.com/monbed/astrbot_plugin_animewifex\n\n### 描述\n\n插件名: astrbot_plugin_animewifex\n插件作者: monbed\n插件简介: 基于[zgojin](https://github.com/zgojin/astrbot_plugin_AW/commits?author=zgojin)的群二次元老婆插件修改版。\n支持的消息平台:仅 aiocqhttp\n标签:(可选)\n社交链接:(可选, 将会在插件市场作者名称上作为可点击的链接)\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Soulter",
        "body": "已经修改~"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1716,
    "title": "[Plugin] 监控Steam玩家的游戏状态，并在状态变更时推送通知。",
    "author": "Maoer233",
    "state": "closed",
    "created_at": "2025-06-03T08:09:45Z",
    "updated_at": "2025-06-04T14:58:12Z",
    "labels": [
      "plugin-publish"
    ],
    "body": "### 插件仓库\n\nhttps://github.com/Maoer233/astrbot_plugin_steam_status_monitor\n\n### 描述\n\n插件名: astrbot_plugin_steam_status_monitor\n插件作者: 猫耳\n插件简介: 监控指定Steam玩家的游戏状态，并在状态变更时推送通知。\n支持的消息平台:QQ\n标签:steam\n社交链接:https://github.com/Maoer233\n\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "Soulter",
        "body": "不要上传 venv 和 __pycache__ 文件夹，请删除～"
      },
      {
        "user": "Maoer233",
        "body": "已删除，感谢提醒。"
      },
      {
        "user": "Soulter",
        "body": "已经上架"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1723,
    "title": "[Bug]alkaid/knowledge-base知识库“立即安装”失败",
    "author": "lwc8699793",
    "state": "open",
    "created_at": "2025-06-04T09:00:11Z",
    "updated_at": "2025-06-04T09:00:11Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n知识库“立即安装”失败\n\n<img width=\"983\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/880c893e-f665-43bf-a838-c2e61a974c53\" />\n\n### 如何复现？\n\nwebUI路径alkaid/knowledge-base，使用“立即安装”知识库\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\n版本：3.5.13\n部署方式：Docker\n\n### 操作系统\n\nLinux\n\n### 报错日志\n\n`[16:52:19] [Core] [ERRO] [star.star_manager:190]: 更新插件 astrbot_plugin_knowledge_base 的依赖失败。Code: 安装失败，错误码：1\n [16:52:19] [Core] [ERRO] [star.star_manager:593]: ----- 插件 astrbot_plugin_knowledge_base 载入失败 -----\n [16:52:19] [Core] [ERRO] [star.star_manager:596]: | Traceback (most recent call last):\n [16:52:19] [Core] [ERRO] [star.star_manager:596]: |   File \"/AstrBot/astrbot/core/star/star_manager.py\", line 407, in load\n [16:52:19] [Core] [ERRO] [star.star_manager:596]: |     module = __import__(path, fromlist=[module_str])\n [16:52:19] [Core] [ERRO] [star.star_manager:596]: |   File \"/AstrBot/data/plugins/astrbot_plugin_knowledge_base/main.py\", line 19, in <module>\n [16:52:19] [Core] [ERRO] [star.star_manager:596]: |     from .utils.installation import ensure_vector_db_dependencies\n [16:52:19] [Core] [ERRO] [star.star_manager:596]: |   File \"/AstrBot/data/plugins/astrbot_plugin_knowledge_base/utils/__init__.py\", line 2, in <module>\n [16:52:19] [Core] [ERRO] [star.star_manager:596]: |     from .file_parser import FileParser\n [16:52:19] [Core] [ERRO] [star.star_manager:596]: |   File \"/AstrBot/data/plugins/astrbot_plugin_knowledge_base/utils/file_parser.py\", line 18, in <module>\n [16:52:19] [Core] [ERRO] [star.star_manager:596]: |     from markitdown import MarkItDown\n [16:52:19] [Core] [ERRO] [star.star_manager:596]: | ModuleNotFoundError: No module named 'markitdown'\n [16:52:19] [Core] [ERRO] [star.star_manager:596]: |\n [16:52:19] [Core] [ERRO] [star.star_manager:596]: | During handling of the above exception, another exception occurred:\n [16:52:19] [Core] [ERRO] [star.star_manager:596]: |\n [16:52:19] [Core] [ERRO] [star.star_manager:596]: | Traceback (most recent call last):\n [16:52:19] [Core] [ERRO] [star.star_manager:596]: |   File \"/AstrBot/astrbot/core/star/star_manager.py\", line 411, in load\n [16:52:19] [Core] [ERRO] [star.star_manager:596]: |     module = __import__(path, fromlist=[module_str])\n [16:52:19] [Core] [ERRO] [star.star_manager:596]: |   File \"/AstrBot/data/plugins/astrbot_plugin_knowledge_base/main.py\", line 19, in <module>\n [16:52:19] [Core] [ERRO] [star.star_manager:596]: |     from .utils.installation import ensure_vector_db_dependencies\n [16:52:19] [Core] [ERRO] [star.star_manager:596]: |   File \"/AstrBot/data/plugins/astrbot_plugin_knowledge_base/utils/__init__.py\", line 2, in <module>\n [16:52:19] [Core] [ERRO] [star.star_manager:596]: |     from .file_parser import FileParser\n [16:52:19] [Core] [ERRO] [star.star_manager:596]: |   File \"/AstrBot/data/plugins/astrbot_plugin_knowledge_base/utils/file_parser.py\", line 18, in <module>\n [16:52:19] [Core] [ERRO] [star.star_manager:596]: |     from markitdown import MarkItDown\n [16:52:19] [Core] [ERRO] [star.star_manager:596]: | ModuleNotFoundError: No module named 'markitdown'\n [16:52:19] [Core] [ERRO] [star.star_manager:596]: |\n [16:52:19] [Core] [ERRO] [star.star_manager:597]: ----------------------------------`\n\n### 你愿意提交 PR 吗？\n\n- [x] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 1652,
    "title": "[Bug][17:57:53] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:358]: WebSocket 连接空闲超过 3 s",
    "author": "jr94330",
    "state": "open",
    "created_at": "2025-05-26T10:01:36Z",
    "updated_at": "2025-06-03T15:41:56Z",
    "labels": [
      "bug"
    ],
    "body": "### 发生了什么\n\n [17:57:58] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:358]: WebSocket 连接空闲超过 3 s \n [17:58:00] [Core] [INFO] [wechatpadpro.wechatpadpro_adapter:343]: WebSocket 连接成功。 \n [17:58:03] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:358]: WebSocket 连接空闲超过 3 s \n [17:58:05] [Core] [INFO] [wechatpadpro.wechatpadpro_adapter:343]: WebSocket 连接成功。 \n [17:58:08] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:358]: WebSocket 连接空闲超过 3 s \n [17:58:11] [Core] [INFO] [wechatpadpro.wechatpadpro_adapter:343]: WebSocket 连接成功。 \n [17:58:14] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:358]: WebSocket 连接空闲超过 3 s \n [17:58:16] [Core] [INFO] [wechatpadpro.wechatpadpro_adapter:343]: WebSocket 连接成功。 \n [17:58:19] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:358]: WebSocket 连接空闲超过 3 s \n [17:58:21] [Core] [INFO] [wechatpadpro.wechatpadpro_adapter:343]: WebSocket 连接成功。 \n [17:58:24] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:358]: WebSocket 连接空闲超过 3 s \n [17:58:26] [Core] [INFO] [wechatpadpro.wechatpadpro_adapter:343]: WebSocket 连接成功。 \n [17:58:29] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:358]: WebSocket 连接空闲超过 3 s \n [17:58:31] [Core] [INFO] [wechatpadpro.wechatpadpro_adapter:343]: WebSocket 连接成功。 \n [17:58:34] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:358]: WebSocket 连接空闲超过 3 s \n [17:58:36] [Core] [INFO] [wechatpadpro.wechatpadpro_adapter:343]: WebSocket 连接成功。 \n [17:58:39] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:358]: WebSocket 连接空闲超过 3 s \n [17:58:41] [Core] [INFO] [wechatpadpro.wechatpadpro_adapter:343]: WebSocket 连接成功。 \n [17:58:44] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:358]: WebSocket 连接空闲超过 3 s \n [17:58:46] [Core] [INFO] [wechatpadpro.wechatpadpro_adapter:343]: WebSocket 连接成功。 \n [17:58:49] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:358]: WebSocket 连接空闲超过 3 s \n [17:58:51] [Core] [INFO] [wechatpadpro.wechatpadpro_adapter:343]: WebSocket 连接成功。 \n [17:58:54] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:358]: WebSocket 连接空闲超过 3 s \n [17:58:57] [Core] [INFO] [wechatpadpro.wechatpadpro_adapter:343]: WebSocket 连接成功。 \n [17:59:00] [Core] [WARN] [wechatpadpro.wechatpadpro_adapter:358]: WebSocket 连接空闲超过 3 s \n [17:59:02] [Core] [INFO] [wechatpadpro.wechatpadpro_adapter:343]: WebSocket 连接成功。 \n\n### 如何复现？\n\n启动后一直轮播连接空闲超过3秒\n\n### AstrBot 版本、部署方式（如 Windows Docker Desktop 部署）、使用的提供商、使用的消息平台适配器\n\nv3.5.11，部署方式nas docker\n\n### 操作系统\n\nLinux\n\n### 报错日志\n\n![Image](https://github.com/user-attachments/assets/ff5d1814-f6f8-4bdc-b4af-b78d3acb7350)\n\n### 你愿意提交 PR 吗？\n\n- [x] 是的，我愿意提交 PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "smartnikocj",
        "body": "我刚连接的前几天是正常的。现在跟你这个状态类似，就显示一黄一蓝，而且机器人没反应了，收不到消息也不会回复消息，启用主动消息轮询也无效。\n\n另外，官网测试是正常的，应该是astrbot接不到回调的消息。"
      },
      {
        "user": "zsq213",
        "body": "> 我刚连接的前几天是正常的。现在跟你这个状态类似，就显示一黄一蓝，而且机器人没反应了，收不到消息也不会回复消息，启用主动消息轮询也无效。\n> \n> 另外，官网测试是正常的，应该是astrbot接不到回调的消息。\n\n我也一样，astrbot接不到回调的消息"
      },
      {
        "user": "gerrampard",
        "body": "我也这样了，有人解决吗"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  },
  {
    "issue_number": 881,
    "title": "[Feature] 接入 RAGFlow",
    "author": "randombm",
    "state": "open",
    "created_at": "2025-03-19T03:27:52Z",
    "updated_at": "2025-06-03T14:48:43Z",
    "labels": [
      "enhancement"
    ],
    "body": "### 描述\n\n大佬，能否做个 RAGFlow 这个的接口对接呢？dify 对接机器人，dify有的功能太难用了，检索命中率也不高，很不方便。\n\n### 使用场景\n\n_No response_\n\n### 你愿意提交PR吗?\n\n- [ ] 是的, 我愿意提交PR!\n\n### Code of Conduct\n\n- [x] 我已阅读并同意遵守该项目的 [行为准则](https://docs.github.com/zh/site-policy/github-terms/github-community-code-of-conduct)。\n",
    "comments": [
      {
        "user": "WuWeiFlow",
        "body": "虽然服务供应商列表中没有ragflow，但我们可以选择OpenAI兼容接口/api/v1/chats_openai/{chat_id}/chat/completions。\n新增服务供应商时，选择OpenAI。\nAPI Base URL填写：http://IP/api/v1/chats_openai/111111111。\n将其中的IP替换为你的实际IP或域名，将111111111替换为ragflow的会话ID。"
      },
      {
        "user": "Enceladus6",
        "body": "补充一下，如果使用agents，就将上方的chats_openai改为agents_openai"
      }
    ],
    "repository": "AstrBotDevs/AstrBot"
  }
]